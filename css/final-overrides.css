/* ================================================================
   FINAL OVERRIDES — loads last, wins every conflict.
   Uses actual class names from dashboardView.js HTML:
   stats-section, bottom-stats, charts-section, dash-two-col
   ================================================================ */

/* ─── 1. DASHBOARD (dv-*) ───────────────────────────────────────── */

.dv-root {
  display: flex; flex-direction: column; gap: 20px;
  padding: 0 0 32px; width: 100%; box-sizing: border-box;
}
.dv-loading {
  display: flex; align-items: center; gap: 12px;
  padding: 40px; color: var(--muted); font-size: 14px;
}
.dv-spinner {
  width: 20px; height: 20px; border-radius: 50%;
  border: 2px solid var(--accent); border-top-color: transparent;
  animation: spin 0.8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Header */
.dv-header {
  display: flex; align-items: flex-start; justify-content: space-between;
  padding-bottom: 4px;
}
.dv-title {
  font-size: 26px; font-weight: 800; color: var(--text);
  margin: 0 0 4px; letter-spacing: -0.5px;
}
.dv-subtitle { font-size: 13px; color: var(--muted); margin: 0; }

/* Progress ring */
.dv-progress-ring { position: relative; width: 72px; height: 72px; flex-shrink: 0; }
.dv-ring-svg { width: 72px; height: 72px; transform: rotate(-90deg); }
.dv-ring-bg { fill: none; stroke: rgba(255,255,255,0.06); stroke-width: 5; }
body:not(.dark) .dv-ring-bg { stroke: rgba(0,0,0,0.06); }
.dv-ring-fg { fill: none; stroke-width: 5; stroke-linecap: round; transition: stroke-dashoffset 0.6s ease; }
.dv-ring-inner {
  position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%);
  text-align: center;
}
.dv-ring-pct { display: block; font-size: 14px; font-weight: 800; color: var(--text); line-height: 1; }
.dv-ring-lbl { display: block; font-size: 9px; color: var(--muted); text-transform: uppercase; letter-spacing: 0.5px; }

/* Stat row */
.dv-stats {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 10px;
}
.dv-stat {
  background: var(--surface);
  border: 1.5px solid rgba(0,0,0,0.05);
  border-radius: 16px;
  padding: 14px 12px;
  display: flex; align-items: center; gap: 10px;
  box-shadow: 0 1px 8px rgba(0,0,0,0.04);
  transition: transform 0.15s;
}
.dv-stat:hover { transform: translateY(-2px); }
body.dark .dv-stat { background: #111827; border-color: rgba(255,255,255,0.07); box-shadow: 0 4px 16px rgba(0,0,0,0.25); }
.dv-stat-alert { border-color: rgba(239,68,68,0.35) !important; }
.dv-stat-warn  { border-color: rgba(245,158,11,0.35) !important; }
.dv-stat-icon {
  width: 36px; height: 36px; border-radius: 10px; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  font-size: 16px; font-weight: 700;
}
.dv-stat-body { min-width: 0; }
.dv-stat-num { font-size: 22px; font-weight: 800; line-height: 1; letter-spacing: -0.5px; color: var(--text); }
.dv-stat-lbl { font-size: 10px; color: var(--muted); font-weight: 600; text-transform: uppercase; letter-spacing: 0.6px; margin-top: 2px; }

/* Main grid */
.dv-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
}
.dv-card {
  background: var(--surface);
  border: 1.5px solid rgba(0,0,0,0.05);
  border-radius: 18px;
  padding: 18px 20px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.04);
}
body.dark .dv-card { background: #111827; border-color: rgba(255,255,255,0.07); box-shadow: 0 4px 20px rgba(0,0,0,0.25); }
.dv-card-wide { grid-column: 1 / -1; }
.dv-card-types { grid-column: 1 / -1; }

.dv-card-head { display: flex; align-items: baseline; gap: 8px; margin-bottom: 14px; }
.dv-card-title { font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.8px; color: var(--text); }
.dv-card-sub { font-size: 11px; color: var(--muted); margin-left: auto; }

/* Custom bar chart */
.dv-bar-chart {
  display: flex; align-items: flex-end; gap: 8px; height: 120px;
}
.dv-bar-col { flex: 1; display: flex; flex-direction: column; align-items: center; gap: 6px; height: 100%; }
.dv-bar-wrap { flex: 1; width: 100%; display: flex; align-items: flex-end; }
.dv-bar-fill {
  width: 100%; border-radius: 6px 6px 0 0; min-height: 4px;
  position: relative; transition: height 0.4s ease;
}
.dv-bar-fill.dv-bar-today { border-radius: 6px 6px 0 0; }
.dv-bar-tip {
  position: absolute; top: -20px; left: 50%; transform: translateX(-50%);
  font-size: 10px; font-weight: 700; color: var(--text); white-space: nowrap;
}
.dv-bar-lbl { font-size: 10px; color: var(--muted); text-align: center; }

/* Task list */
.dv-task-list { display: flex; flex-direction: column; gap: 6px; }
.dv-task-row {
  display: flex; align-items: center; gap: 10px;
  padding: 9px 10px; border-radius: 10px;
  background: rgba(255,255,255,0.02);
  border: 1px solid rgba(255,255,255,0.05);
}
body:not(.dark) .dv-task-row { background: rgba(0,0,0,0.02); border-color: rgba(0,0,0,0.06); }
.dv-task-stripe { width: 3px; height: 32px; border-radius: 3px; flex-shrink: 0; }
.dv-task-info { flex: 1; min-width: 0; }
.dv-task-name { font-size: 13px; font-weight: 600; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.dv-task-meta { font-size: 10px; color: var(--muted); margin-top: 1px; text-transform: capitalize; }
.dv-task-badge { font-size: 10px; font-weight: 700; padding: 2px 7px; border-radius: 6px; flex-shrink: 0; }

/* Deadlines */
.dv-deadline-list { display: flex; flex-direction: column; gap: 8px; }
.dv-dl-row { display: flex; align-items: center; gap: 10px; }
.dv-dl-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--muted); flex-shrink: 0; }
.dv-dl-dot.dv-dl-red   { background: #ef4444; box-shadow: 0 0 6px #ef444466; }
.dv-dl-dot.dv-dl-amber { background: #f59e0b; box-shadow: 0 0 6px #f59e0b44; }
.dv-dl-info { flex: 1; min-width: 0; }
.dv-dl-name { font-size: 13px; font-weight: 600; color: var(--text); display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.dv-dl-type { font-size: 10px; color: var(--muted); text-transform: capitalize; }
.dv-dl-when { font-size: 11px; font-weight: 700; color: var(--muted); flex-shrink: 0; }
.dv-dl-when.dv-dl-red   { color: #ef4444; }
.dv-dl-when.dv-dl-amber { color: #f59e0b; }

/* Priority bars */
.dv-pri-bars { display: flex; flex-direction: column; gap: 9px; }
.dv-pri-row { display: flex; align-items: center; gap: 8px; }
.dv-pri-lbl { font-size: 11px; color: var(--muted); width: 42px; flex-shrink: 0; font-weight: 600; }
.dv-pri-track { flex: 1; height: 7px; background: rgba(255,255,255,0.06); border-radius: 4px; overflow: hidden; }
body:not(.dark) .dv-pri-track { background: rgba(0,0,0,0.07); }
.dv-pri-fill { height: 100%; border-radius: 4px; min-width: 4px; transition: width 0.5s ease; }
.dv-pri-num { font-size: 11px; font-weight: 700; color: var(--text); width: 20px; text-align: right; }

/* Type pills */
.dv-types-grid { display: flex; gap: 10px; flex-wrap: wrap; }
.dv-type-pill {
  display: flex; align-items: center; gap: 6px;
  padding: 8px 14px; border-radius: 12px;
  background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08);
}
body:not(.dark) .dv-type-pill { background: rgba(0,0,0,0.03); border-color: rgba(0,0,0,0.08); }
.dv-type-icon { font-size: 14px; }
.dv-type-count { font-size: 15px; font-weight: 800; color: var(--text); }
.dv-type-name { font-size: 11px; color: var(--muted); text-transform: capitalize; font-weight: 600; }

/* Empty state */
.dv-empty { font-size: 13px; color: var(--muted); padding: 16px 0; text-align: center; }

/* Responsive */
@media (max-width: 960px) {
  .dv-stats { grid-template-columns: repeat(3,1fr); }
  .dv-grid  { grid-template-columns: 1fr; }
  .dv-card-wide, .dv-card-types { grid-column: 1; }
}
@media (max-width: 600px) {
  .dv-stats { grid-template-columns: repeat(2,1fr); }
  .dv-stat-num { font-size: 18px; }
  .dv-bar-chart { height: 90px; }
}
@media (max-width: 360px) {
  .dv-stats { grid-template-columns: 1fr 1fr; }
}


/* ─── 2. ANALYTICS ────────────────────────────────────────────── */
#appContent .analytics-container { display:flex !important; flex-direction:column !important; gap:14px !important; }
#appContent .analytics-container .dash-charts { display:grid !important; grid-template-columns:1fr 1fr !important; gap:14px !important; overflow:visible !important; }
#appContent .analytics-container .dash-charts .chart-card { height:210px !important; padding:14px 16px !important; }
#appContent .analytics-container .dash-charts .chart-card canvas { max-height:155px !important; }
#appContent .analytics-container > .chart-card { height:auto !important; padding:16px 18px !important; }
#appContent .analytics-container > .chart-card canvas { max-height:165px !important; display:block !important; }
@media (max-width:680px) { #appContent .analytics-container .dash-charts { grid-template-columns:1fr !important; } }


/* ─── 3. FOCUS MODE layout ────────────────────────────────────── */
.focus-wrap { position:relative !important; width:100% !important; height:calc(100vh - 70px) !important; overflow:hidden !important; background:#02050f !important; }
.focus-ui { position:relative !important; z-index:2 !important; height:100% !important; display:flex !important; flex-direction:column !important; align-items:center !important; justify-content:space-between !important; padding:20px 24px 28px !important; box-sizing:border-box !important; overflow-y:auto !important; gap:0 !important; }
.focus-toprow { width:100% !important; max-width:640px !important; flex-shrink:0 !important; }
.focus-center-block { display:flex !important; flex-direction:column !important; align-items:center !important; justify-content:center !important; gap:16px !important; flex:1 !important; width:100% !important; max-width:600px !important; min-height:0 !important; }
.focus-quote-overlay { position:relative !important; text-align:center !important; flex-shrink:0 !important; display:flex !important; flex-direction:column !important; align-items:center !important; gap:6px !important; padding-bottom:2px !important; transition:opacity 0.4s ease !important; }
.focus-quote-overlay.hidden { opacity:0 !important; pointer-events:none !important; height:0 !important; overflow:hidden !important; padding:0 !important; }
.focus-quote-off-chip { position:relative !important; flex-shrink:0 !important; }


/* ─── 4. FOCUS FULLSCREEN ─────────────────────────────────────── */
.focus-wrap:fullscreen,
.focus-wrap:-webkit-full-screen {
  position: fixed !important;
  inset: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  z-index: 9999 !important;
  background: #02050f !important;
}
.focus-wrap:fullscreen .focus-canvas,
.focus-wrap:-webkit-full-screen .focus-canvas {
  width: 100vw !important;
  height: 100vh !important;
}
.focus-wrap:fullscreen .focus-ui,
.focus-wrap:-webkit-full-screen .focus-ui {
  height: 100vh !important;
  width: 100vw !important;
  padding: 32px 80px 36px !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: space-between !important;
  box-sizing: border-box !important;
}
.focus-wrap:fullscreen .focus-toprow,
.focus-wrap:-webkit-full-screen .focus-toprow {
  width: 100% !important;
  max-width: 900px !important;
  flex-shrink: 0 !important;
}
.focus-wrap:fullscreen .focus-center-block,
.focus-wrap:-webkit-full-screen .focus-center-block {
  flex: 1 !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 24px !important;
  width: 100% !important;
  max-width: 700px !important;
}
.focus-wrap:fullscreen .focus-ring-wrap,
.focus-wrap:-webkit-full-screen .focus-ring-wrap {
  width: 310px !important;
  height: 310px !important;
}
.focus-wrap:fullscreen .focus-time,
.focus-wrap:-webkit-full-screen .focus-time {
  font-size: 72px !important;
  letter-spacing: -3px !important;
}
.focus-wrap:fullscreen .focus-phase,
.focus-wrap:-webkit-full-screen .focus-phase {
  font-size: 13px !important;
  letter-spacing: 3px !important;
}
.focus-wrap:fullscreen .focus-btn-main,
.focus-wrap:-webkit-full-screen .focus-btn-main {
  padding: 16px 48px !important;
  font-size: 16px !important;
}
.focus-wrap:fullscreen .focus-quote-overlay,
.focus-wrap:-webkit-full-screen .focus-quote-overlay {
  flex-shrink: 0 !important;
  padding-bottom: 0 !important;
}
.focus-wrap:fullscreen .focus-sound-row,
.focus-wrap:-webkit-full-screen .focus-sound-row {
  max-width: 700px !important;
}


/* ─── 5. FOCUS ROOMS ─────────────────────────────────────────── */
.fr-room-center { position:relative !important; z-index:10 !important; display:flex !important; flex-direction:column !important; align-items:center !important; justify-content:center !important; gap:22px !important; flex:1 !important; padding:20px 200px 20px 20px !important; text-align:center !important; }
.fr-timer { font-size:80px !important; font-weight:100 !important; line-height:1 !important; letter-spacing:-5px !important; color:white !important; text-shadow:0 0 50px rgba(0,245,160,0.3) !important; font-variant-numeric:tabular-nums !important; }
.fr-timer-sub { font-size:11px !important; letter-spacing:3px !important; text-transform:uppercase !important; color:rgba(255,255,255,0.28) !important; margin-top:10px !important; }
.fr-aura-field { position:absolute !important; z-index:5 !important; bottom:60px !important; left:20px !important; right:170px !important; top:auto !important; display:flex !important; align-items:flex-end !important; flex-wrap:wrap !important; gap:22px !important; padding:10px !important; pointer-events:none !important; }
.fr-room:fullscreen, .fr-room:-webkit-full-screen { position:fixed !important; inset:0 !important; width:100vw !important; height:100vh !important; z-index:9999 !important; }
.fr-room:fullscreen .fr-timer, .fr-room:-webkit-full-screen .fr-timer { font-size:110px !important; letter-spacing:-7px !important; }
.fr-fullscreen-btn { width:34px !important; height:34px !important; border-radius:50% !important; border:1px solid rgba(255,255,255,0.15) !important; background:transparent !important; color:rgba(255,255,255,0.5) !important; font-size:16px !important; cursor:pointer !important; display:flex !important; align-items:center !important; justify-content:center !important; transition:all 0.2s !important; }
.fr-fullscreen-btn:hover { border-color:rgba(255,255,255,0.5) !important; color:white !important; }


/* ─── 6. AUTH VERIFY PANEL ───────────────────────────────────── */
.auth-verify-icon { font-size:46px; line-height:1; animation:bounceIn 0.5s ease; }
@keyframes bounceIn { 0%{transform:scale(0.5);opacity:0} 70%{transform:scale(1.1)} 100%{transform:scale(1);opacity:1} }
.auth-error-msg { font-size:13px; color:#ff6b6b; min-height:16px; text-align:center; line-height:1.4; }
.auth-reset-desc { font-size:13px; color:rgba(255,255,255,0.55); line-height:1.6; text-align:center; margin:0; }


/* ─── 7. NAV ACTIVE uses accent vars ────────────────────────── */
.sidebar nav button.nav-active { background:rgba(0,245,160,0.12) !important; color:var(--accent,#00f5a0) !important; border-left:3px solid var(--accent,#00f5a0) !important; padding-left:11px !important; }


/* ─── 8. SWOT PAGE ──────────────────────────────────────────── */
.swot-page { display:flex; flex-direction:column; gap:20px; }
.swot-grid { display:grid; grid-template-columns:1fr 1fr; gap:14px; }
.swot-card { background:var(--surface); border:1.5px solid rgba(0,0,0,0.07); border-radius:18px; padding:20px 22px; display:flex; flex-direction:column; gap:12px; min-height:220px; transition:border-color 0.2s; }
body.dark .swot-card { background:#1c2740; border-color:rgba(255,255,255,0.06); }
.swot-card:focus-within { border-color:var(--accent,#00f5a0); }
.swot-card-header { display:flex; align-items:center; gap:10px; }
.swot-icon { font-size:22px; }
.swot-label { font-size:12px; font-weight:800; letter-spacing:2px; text-transform:uppercase; }
.swot-sublabel { font-size:11px; color:var(--muted); margin-top:1px; }
.swot-items { flex:1; display:flex; flex-direction:column; gap:7px; overflow-y:auto; }
.swot-item { display:flex; align-items:center; gap:8px; padding:8px 10px; border-radius:10px; background:rgba(0,0,0,0.03); font-size:13px; color:var(--text); }
body.dark .swot-item { background:rgba(255,255,255,0.04); color:#e2e8f0; }
.swot-item-bullet { width:6px; height:6px; border-radius:50%; flex-shrink:0; }
.swot-item-text { flex:1; }
.swot-item-del { background:none; border:none; color:transparent; font-size:15px; cursor:pointer; line-height:1; padding:0 2px; transition:color 0.15s; }
.swot-item:hover .swot-item-del { color:rgba(255,77,77,0.55); }
.swot-item-del:hover { color:#ff4d4d !important; }
.swot-add-row { display:flex; gap:8px; }
.swot-add-input { flex:1; padding:9px 12px; border-radius:10px; border:1.5px solid rgba(0,0,0,0.1); background:rgba(0,0,0,0.03); color:var(--text); font-size:13px; font-family:inherit; outline:none; transition:border-color 0.2s; }
body.dark .swot-add-input { background:rgba(255,255,255,0.05); border-color:rgba(255,255,255,0.1); color:#e2e8f0; }
.swot-add-input:focus { border-color:var(--accent,#00f5a0); }
.swot-add-btn { padding:9px 14px; border-radius:10px; border:none; background:var(--accent,#00f5a0); color:#0b0f19; font-weight:700; font-size:16px; cursor:pointer; transition:opacity 0.2s; }
.swot-add-btn:hover { opacity:0.8; }
.swot-ai-section { display:flex; align-items:center; gap:12px; flex-wrap:wrap; padding:16px 20px; background:var(--surface); border:1.5px solid rgba(0,0,0,0.07); border-radius:16px; }
body.dark .swot-ai-section { background:#1c2740; border-color:rgba(255,255,255,0.06); }
.swot-ai-btn { padding:12px 24px; border-radius:28px; border:none; background:linear-gradient(135deg,var(--accent,#00f5a0),var(--accent2,#00d9f5)); color:#0b0f19; font-weight:700; font-size:14px; cursor:pointer; display:flex; align-items:center; gap:8px; transition:opacity 0.2s,transform 0.2s; }
.swot-ai-btn:hover { opacity:0.88; transform:translateY(-1px); }
.swot-ai-btn:disabled { opacity:0.5; cursor:not-allowed; transform:none; }
.swot-ai-result { flex:1; min-width:200px; font-size:13px; color:var(--text); line-height:1.7; white-space:pre-wrap; }
.swot-ai-spinner { width:20px; height:20px; border:2px solid rgba(0,245,160,0.2); border-top-color:var(--accent,#00f5a0); border-radius:50%; animation:spin 0.8s linear infinite; flex-shrink:0; }
@keyframes spin { to { transform:rotate(360deg); } }


/* ─── 9. AI DAILY REPORT PAGE ───────────────────────────────── */
.report-page { display:flex; flex-direction:column; gap:20px; max-width:820px; }
.report-header { display:flex; justify-content:space-between; align-items:flex-start; flex-wrap:wrap; gap:12px; }
.report-date-label { font-size:11px; letter-spacing:2px; text-transform:uppercase; color:var(--muted); margin-top:4px; }
.report-generate-btn { padding:12px 24px; border-radius:28px; border:none; background:linear-gradient(135deg,var(--accent,#00f5a0),var(--accent2,#00d9f5)); color:#0b0f19; font-weight:700; font-size:14px; cursor:pointer; display:flex; align-items:center; gap:8px; transition:opacity 0.2s,transform 0.2s; }
.report-generate-btn:hover { opacity:0.88; transform:translateY(-1px); }
.report-generate-btn:disabled { opacity:0.5; cursor:not-allowed; transform:none; }
.report-stats-row { display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:10px; }
.report-stat { background:rgba(0,0,0,0.03); border-radius:12px; padding:14px 10px; text-align:center; }
body.dark .report-stat { background:rgba(255,255,255,0.04); }
.report-stat-val { font-size:26px; font-weight:800; color:var(--accent); line-height:1; }
.report-stat-lbl { font-size:10px; font-weight:600; letter-spacing:0.5px; text-transform:uppercase; color:var(--muted); margin-top:4px; }
.report-card { background:var(--surface); border:1.5px solid rgba(0,0,0,0.06); border-radius:18px; padding:22px 24px; display:flex; flex-direction:column; gap:10px; }
body.dark .report-card { background:#1c2740; border-color:rgba(255,255,255,0.06); }
.report-section-title { font-size:11px; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; color:var(--accent,#00f5a0); margin-bottom:6px; }
.report-body { font-size:14px; color:var(--text); line-height:1.8; white-space:pre-wrap; }
.report-ai-card { background:var(--surface); border:1.5px solid var(--accent,#00f5a0); border-radius:18px; padding:22px 24px; display:flex; flex-direction:column; gap:10px; }
body.dark .report-ai-card { background:#1c2740; }
.report-ai-title { font-size:12px; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; color:var(--accent); display:flex; align-items:center; gap:8px; }
.report-spinner { width:18px; height:18px; border:2px solid rgba(0,245,160,0.2); border-top-color:var(--accent,#00f5a0); border-radius:50%; animation:spin 0.8s linear infinite; }
.report-ai-body { font-size:14px; color:var(--text); line-height:1.85; white-space:pre-wrap; }
.report-empty { text-align:center; padding:50px 20px; color:var(--muted); }
.report-empty-icon { font-size:48px; margin-bottom:14px; }
.report-empty-title { font-size:18px; font-weight:600; margin-bottom:8px; color:var(--text); }
.report-empty-sub { font-size:13px; line-height:1.6; }
@media (max-width:600px) { .swot-grid{grid-template-columns:1fr !important;} .report-stats-row{grid-template-columns:repeat(2,1fr) !important;} }

/* ─── 10. REPORT TABS ────────────────────────────────────────── */
.report-tab {
  padding: 9px 18px;
  border-radius: 22px;
  border: 1.5px solid rgba(0,0,0,0.12);
  background: transparent;
  color: var(--muted);
  font-size: 13px;
  font-family: inherit;
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
}
body.dark .report-tab { border-color: rgba(255,255,255,0.1); }
.report-tab:hover { border-color: var(--accent,#00f5a0); color: var(--accent,#00f5a0); }
.report-tab.active {
  background: var(--accent,#00f5a0);
  border-color: transparent;
  color: #0b0f19;
  font-weight: 700;
}

/* ─── SWOT PAGE ─────────────────────────────────────────────── */
.swot-page { display:flex; flex-direction:column; gap:20px; }
.swot-grid { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
@media(max-width:640px) { .swot-grid { grid-template-columns:1fr; } }
.swot-card {
  background:var(--surface);
  border-radius:18px;
  padding:20px;
  box-shadow:0 8px 24px rgba(0,0,0,0.06);
  border:1px solid rgba(0,0,0,0.06);
  display:flex; flex-direction:column; gap:12px;
  min-height:200px;
}
body.dark .swot-card { background:#1c2740; border-color:rgba(255,255,255,0.05); box-shadow:0 12px 40px rgba(0,0,0,0.4); }
.swot-card-header { display:flex; align-items:center; gap:10px; }
.swot-icon { font-size:22px; }
.swot-label { font-size:15px; font-weight:700; }
.swot-sublabel { font-size:11px; color:var(--muted); margin-top:1px; }
.swot-items { display:flex; flex-direction:column; gap:5px; flex:1; }
.swot-item { display:flex; align-items:center; gap:8px; padding:5px 0; }
.swot-item-bullet { width:7px; height:7px; border-radius:50%; flex-shrink:0; }
.swot-item-text { flex:1; font-size:13px; color:var(--text); line-height:1.4; }
.swot-item-del { background:none; border:none; color:transparent; font-size:16px; cursor:pointer; padding:0 4px; transition:color 0.15s; flex-shrink:0; line-height:1; }
.swot-item:hover .swot-item-del { color:rgba(255,77,77,0.6); }
.swot-item-del:hover { color:#ff4d4d !important; }
.swot-add-row { display:flex; gap:8px; align-items:center; margin-top:4px; }
.swot-add-input { flex:1; padding:8px 12px; border-radius:10px; border:1.5px solid rgba(0,0,0,0.1); background:rgba(0,0,0,0.03); font-size:13px; font-family:inherit; color:var(--text); outline:none; transition:border-color 0.2s; }
body.dark .swot-add-input { background:rgba(255,255,255,0.05); border-color:rgba(255,255,255,0.1); color:#e2e8f0; }
.swot-add-input:focus { border-color:var(--accent); }
.swot-add-btn { width:30px; height:30px; border-radius:50%; border:1.5px solid var(--accent); background:transparent; color:var(--accent); font-size:18px; cursor:pointer; display:flex; align-items:center; justify-content:center; line-height:1; transition:all 0.15s; flex-shrink:0; }
.swot-add-btn:hover { background:var(--accent); color:#0b0f19; }
.swot-ai-btn { padding:10px 18px; border-radius:22px; background:linear-gradient(135deg,var(--accent,#00f5a0),var(--accent2,#00d9f5)); color:#0b0f19; font-size:13px; font-weight:700; border:none; cursor:pointer; font-family:inherit; transition:opacity 0.2s,transform 0.15s; }
.swot-ai-btn:hover { opacity:0.88; transform:translateY(-1px); }

/* ─── REPORT PAGE ───────────────────────────────────────────── */
.report-page { display:flex; flex-direction:column; gap:18px; }
.report-header { display:flex; justify-content:space-between; align-items:flex-end; flex-wrap:wrap; gap:12px; }
.report-date-label { font-size:13px; color:var(--muted); }
.report-generate-btn { padding:10px 20px; border-radius:22px; background:linear-gradient(135deg,var(--accent,#00f5a0),var(--accent2,#00d9f5)); color:#0b0f19; font-size:13px; font-weight:700; border:none; cursor:pointer; font-family:inherit; transition:opacity 0.2s,transform 0.15s; }
.report-generate-btn:hover { opacity:0.88; transform:translateY(-1px); }
.report-generate-btn:disabled { opacity:0.5; transform:none; cursor:not-allowed; }
.report-empty { text-align:center; padding:48px 20px; color:var(--muted); }
.report-empty-icon { font-size:44px; margin-bottom:14px; }
.report-empty-title { font-size:17px; font-weight:600; color:var(--text); margin-bottom:8px; }
.report-empty-sub { font-size:13px; line-height:1.6; }
.report-card { background:var(--surface); border-radius:16px; padding:20px; border:1px solid rgba(0,0,0,0.06); box-shadow:0 6px 20px rgba(0,0,0,0.05); }
body.dark .report-card { background:#1c2740; border-color:rgba(255,255,255,0.05); box-shadow:0 10px 30px rgba(0,0,0,0.4); }
.report-section-title { font-size:13px; font-weight:700; letter-spacing:1px; text-transform:uppercase; color:var(--muted); margin-bottom:14px; }
.report-stats-row { display:grid; grid-template-columns:repeat(4,1fr); gap:12px; }
@media(max-width:480px) { .report-stats-row { grid-template-columns:repeat(2,1fr); } }
.report-stat { text-align:center; }
.report-stat-val { font-size:28px; font-weight:800; color:var(--accent); line-height:1; }
.report-stat-lbl { font-size:11px; color:var(--muted); margin-top:4px; text-transform:uppercase; letter-spacing:0.5px; }
.report-body { font-size:13px; color:var(--text); line-height:1.8; white-space:pre-line; }
.report-ai-card { background:var(--surface); border-radius:16px; padding:20px; border:1.5px solid var(--accent-border,rgba(0,200,122,0.25)); box-shadow:0 6px 20px rgba(0,0,0,0.05),0 0 20px var(--accent-glow,rgba(0,200,122,0.08)); }
body.dark .report-ai-card { background:#1a2540; }
.report-ai-title { font-size:13px; font-weight:700; letter-spacing:1px; text-transform:uppercase; color:var(--accent); margin-bottom:14px; display:flex; align-items:center; gap:8px; }
.report-ai-body { font-size:14px; color:var(--text); line-height:1.8; white-space:pre-line; }
.report-spinner { width:14px; height:14px; border:2px solid rgba(0,200,122,0.3); border-top-color:var(--accent,#00c87a); border-radius:50%; animation:spin 0.8s linear infinite; flex-shrink:0; }
@keyframes spin { to { transform:rotate(360deg); } }

/* ─── REPORT — new elements ──────────────────────────────────── */
.report-title { font-size:22px; font-weight:700; color:var(--text); margin:0 0 4px; }
.report-date-label { font-size:13px; color:var(--muted); }
.report-generate-btn {
  padding: 11px 22px;
  border-radius: 30px;
  background: linear-gradient(135deg, var(--accent,#00f5a0), var(--accent2,#00d9f5));
  color: #0b0f19;
  font-weight: 700;
  font-size: 13px;
  border: none;
  cursor: pointer;
  font-family: inherit;
  letter-spacing: 0.3px;
  transition: opacity 0.2s, transform 0.15s;
  white-space: nowrap;
}
.report-generate-btn:hover { opacity: 0.88; transform: translateY(-1px); }
.report-generate-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
.report-section-title { font-size:12px; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; color:var(--accent); }
.report-body { font-size:14px; color:var(--text); line-height:1.9; white-space:pre-wrap; }
.report-auto-notice {
  font-size: 12px;
  color: var(--accent,#00f5a0);
  background: rgba(0,200,122,0.07);
  border: 1px solid rgba(0,200,122,0.2);
  border-radius: 10px;
  padding: 8px 14px;
  width: fit-content;
}
.report-ai-header { display:flex; align-items:center; gap:8px; }
.report-ai-title-text { font-size:12px; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; color:var(--accent); }
.report-ai-spinner { width:16px; height:16px; border:2px solid rgba(0,245,160,0.2); border-top-color:var(--accent,#00f5a0); border-radius:50%; animation:spin 0.8s linear infinite; flex-shrink:0; }

/* ─── COLOR PICKER (acp) ─────────────────────────────────────── */
.acp-popup {
  position: fixed;
  z-index: 99999;
  background: #1a2540;
  border: 1px solid rgba(0,245,160,0.25);
  border-radius: 16px;
  padding: 16px;
  width: 260px;
  box-shadow: 0 24px 64px rgba(0,0,0,0.6), 0 0 30px rgba(0,245,160,0.08);
  display: flex;
  flex-direction: column;
  gap: 10px;
  animation: acpFadeIn 0.15s ease;
}
@keyframes acpFadeIn { from { opacity:0; transform:translateY(-6px); } to { opacity:1; transform:none; } }
.acp-section-label {
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: rgba(255,255,255,0.35);
  margin-bottom: -4px;
}
.acp-presets, .acp-recents {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 5px;
}
.acp-swatch {
  width: 24px;
  height: 24px;
  border-radius: 6px;
  cursor: pointer;
  border: 2px solid transparent;
  transition: transform 0.1s ease, border-color 0.1s ease;
  box-sizing: border-box;
}
.acp-swatch:hover { transform: scale(1.2); border-color: rgba(255,255,255,0.5); }
.acp-swatch.acp-active { border-color: white; transform: scale(1.15); box-shadow: 0 0 8px rgba(255,255,255,0.4); }
.acp-gradient-wrap {
  position: relative;
  border-radius: 8px;
  overflow: hidden;
  cursor: crosshair;
}
.acp-gradient { border-radius: 8px; display: block; width: 100%; height: 130px; }
.acp-cursor {
  position: absolute;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  border: 2px solid white;
  box-shadow: 0 0 4px rgba(0,0,0,0.5);
  transform: translate(-50%, -50%);
  pointer-events: none;
  top: 50%; left: 50%;
}
.acp-hue-wrap { position: relative; }
.acp-hue { border-radius: 6px; display: block; width: 100%; height: 14px; cursor: crosshair; }
.acp-hue-cursor {
  position: absolute;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 10px;
  height: 18px;
  border-radius: 4px;
  border: 2px solid white;
  box-shadow: 0 0 4px rgba(0,0,0,0.5);
  pointer-events: none;
}
.acp-hex-row {
  display: flex;
  gap: 8px;
  align-items: center;
}
.acp-hex-input {
  flex: 1;
  padding: 8px 10px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.15);
  background: rgba(255,255,255,0.06);
  color: white;
  font-size: 13px;
  font-family: monospace;
  outline: none;
}
.acp-hex-input:focus { border-color: #00f5a0; }
.acp-preview {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  flex-shrink: 0;
  border: 1px solid rgba(255,255,255,0.15);
}
.acp-confirm {
  padding: 8px 14px;
  border-radius: 8px;
  flex-shrink: 0;
  font-size: 13px;
  font-weight: 700;
}

/* ─── FOCUS TASK DROPDOWN ────────────────────────────────────── */
.focus-task-sel {
  flex: 1;
  padding: 11px 14px;
  border-radius: 14px;
  border: 1.5px solid rgba(255,255,255,0.2) !important;
  background: rgba(255,255,255,0.1) !important;
  color: rgba(255,255,255,0.9) !important;
  font-size: 13px;
  font-family: inherit;
  outline: none;
  cursor: pointer;
  -webkit-appearance: none;
  appearance: none;
}
.focus-task-sel option {
  background: #1a2540 !important;
  color: #e2e8f0 !important;
  padding: 8px !important;
}

/* ─── REPORT EXPORT BUTTON ───────────────────────────────────── */
.report-export-btn {
  padding: 11px 18px;
  border-radius: 30px;
  background: transparent;
  border: 1.5px solid var(--accent,#00f5a0);
  color: var(--accent,#00f5a0);
  font-weight: 600;
  font-size: 13px;
  cursor: pointer;
  font-family: inherit;
  transition: all 0.2s;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}
.report-export-btn:hover {
  background: var(--accent,#00f5a0);
  color: #0b0f19;
}

/* ─── TASK MODAL — FREQ + PRIORITY PILLS ─────────────────────── */
.freq-pills, .priority-pills {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}
.freq-pill, .priority-pill {
  padding: 7px 16px;
  border-radius: 22px;
  border: 1.5px solid rgba(0,0,0,0.12);
  background: transparent;
  color: var(--muted);
  font-size: 13px;
  font-family: inherit;
  cursor: pointer;
  transition: all 0.18s;
  font-weight: 500;
  white-space: nowrap;
}
body.dark .freq-pill,
body.dark .priority-pill {
  border-color: rgba(255,255,255,0.12);
  color: #94a3b8;
}
.freq-pill:hover, .priority-pill:hover {
  border-color: var(--accent,#00f5a0);
  color: var(--accent,#00f5a0);
}
.freq-pill.active, .priority-pill.active {
  background: var(--accent,#00f5a0);
  border-color: transparent;
  color: #0b0f19;
  font-weight: 700;
}
/* Scrollable modal so it never gets cut off */
.task-modal {
  max-height: 90vh;
  overflow-y: auto;
  scrollbar-width: thin;
}

/* ─── THEME PANEL (sidebar) ──────────────────────────────────── */
.theme-panel {
  padding: 10px 16px 6px;
  margin-bottom: 4px;
}
.theme-panel-label {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: rgba(255,255,255,0.3);
  margin-bottom: 7px;
}
.combo-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 5px;
  margin-bottom: 4px;
}
.combo-btn {
  padding: 6px 8px;
  border-radius: 10px;
  border: 1.5px solid rgba(255,255,255,0.1);
  background: rgba(255,255,255,0.04);
  color: rgba(255,255,255,0.65);
  font-size: 11px;
  font-family: inherit;
  cursor: pointer;
  text-align: left;
  transition: all 0.18s;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.combo-btn:hover {
  border-color: var(--accent,#00f5a0);
  color: var(--accent,#00f5a0);
  background: rgba(255,255,255,0.07);
}
.combo-btn.active {
  border-color: var(--accent,#00f5a0);
  background: rgba(0,200,122,0.15);
  color: var(--accent,#00f5a0);
  font-weight: 700;
}
/* Rose swatch */
.aap-rose { background: linear-gradient(135deg,#f43f5e,#fb923c); }

/* Hide old accent-picker if it somehow still exists */
.aurora-accent-picker { display: none !important; }

/* Accent swatches always visible in theme panel */
.theme-panel .aap-swatches { display: flex; gap: 7px; flex-wrap: wrap; }
.theme-panel .aap-swatch   { width: 20px; height: 20px; border-radius: 50%; border: 2px solid transparent; cursor: pointer; transition: transform 0.18s, border-color 0.18s; }
.theme-panel .aap-swatch:hover  { transform: scale(1.25); }
.theme-panel .aap-swatch.active { border-color: rgba(255,255,255,0.8); box-shadow: 0 0 8px rgba(255,255,255,0.3); }

/* ─── HOME FOCUS CLICKABLE ROWS ─────────────────────────────── */
.home-focus-link {
  cursor: pointer;
  transition: background 0.15s, transform 0.12s;
  border-radius: 10px;
  padding: 4px 6px;
  margin: 0 -6px;
}
.home-focus-link:hover {
  background: var(--accent-subtle, rgba(0,200,122,0.08));
  transform: translateX(3px);
}

/* ─── THEME TOGGLE BUTTON ────────────────────────────────────── */
.theme-toggle-btn {
  width: calc(100% - 32px);
  margin: 4px 16px 2px;
  padding: 9px 14px;
  border-radius: 12px;
  border: 1.5px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.04);
  color: rgba(255,255,255,0.65);
  font-size: 13px;
  font-family: inherit;
  cursor: pointer;
  text-align: left;
  transition: all 0.18s;
  letter-spacing: 0.3px;
}
.theme-toggle-btn:hover {
  border-color: var(--accent,#00f5a0);
  color: var(--accent,#00f5a0);
}
.theme-toggle-btn.active {
  border-color: var(--accent,#00f5a0);
  color: var(--accent,#00f5a0);
  background: var(--accent-subtle, rgba(0,200,122,0.08));
}

/* Animate panel open */
.theme-panel {
  animation: themePanelIn 0.2s ease;
  overflow: hidden;
}
@keyframes themePanelIn {
  from { opacity: 0; transform: translateY(-6px); }
  to   { opacity: 1; transform: none; }
}

/* ─── REPORT AI BUTTON ───────────────────────────────────────── */
.report-ai-btn {
  padding: 11px 20px;
  border-radius: 30px;
  background: linear-gradient(135deg, var(--accent,#00f5a0), var(--accent2,#00d9f5));
  color: #0b0f19;
  font-weight: 700;
  font-size: 13px;
  border: none;
  cursor: pointer;
  font-family: inherit;
  transition: opacity 0.2s, transform 0.15s;
  white-space: nowrap;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}
.report-ai-btn:hover { opacity: 0.88; transform: translateY(-1px); }
.report-ai-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

/* ─── PAST REPORTS HISTORY ───────────────────────────────────── */
.report-history-group { margin-bottom: 24px; }
.report-history-group-title {
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--accent,#00f5a0);
  margin-bottom: 10px;
  padding-bottom: 6px;
  border-bottom: 1px solid var(--border);
}
.report-history-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 16px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  margin-bottom: 8px;
  transition: border-color 0.18s;
}
.report-history-item:hover { border-color: var(--accent-border, rgba(0,200,122,0.25)); }
.report-hist-info { flex: 1; min-width: 0; }
.report-hist-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.report-hist-meta {
  font-size: 12px;
  color: var(--muted);
  margin-top: 3px;
  display: flex;
  align-items: center;
  gap: 6px;
}
.report-hist-badge {
  font-size: 10px;
  font-weight: 700;
  padding: 2px 7px;
  border-radius: 20px;
  background: var(--accent-subtle, rgba(0,200,122,0.08));
  color: var(--accent, #00c87a);
  border: 1px solid var(--accent-border, rgba(0,200,122,0.2));
  letter-spacing: 0.5px;
}
.report-hist-auto {
  background: rgba(99,102,241,0.08);
  color: #818cf8;
  border-color: rgba(99,102,241,0.2);
}
.report-hist-actions { display: flex; gap: 6px; flex-shrink: 0; }
.report-hist-view-btn {
  padding: 6px 14px;
  border-radius: 20px;
  border: 1.5px solid var(--accent-border, rgba(0,200,122,0.3));
  background: transparent;
  color: var(--accent, #00c87a);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  font-family: inherit;
  transition: all 0.15s;
}
.report-hist-view-btn:hover {
  background: var(--accent, #00c87a);
  color: #0b0f19;
}
.report-hist-export-btn {
  padding: 6px 10px;
  border-radius: 20px;
  border: 1.5px solid var(--border);
  background: transparent;
  color: var(--muted);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s;
}
.report-hist-export-btn:hover { color: var(--text); border-color: var(--text); }
.report-hist-del-btn {
  padding: 6px 9px;
  border-radius: 20px;
  border: none;
  background: transparent;
  color: var(--muted);
  font-size: 12px;
  cursor: pointer;
  transition: color 0.15s;
}
.report-hist-del-btn:hover { color: #ef4444; }
.report-history-content .report-card,
.report-history-content .report-ai-card {
  margin-bottom: 12px;
}

/* ═══════════════════════════════════════════════════════════════
   FRIENDS PAGE
═══════════════════════════════════════════════════════════════ */
.friends-page { max-width: 700px; margin: 0 auto; padding: 0 0 40px; }
.friends-header { margin-bottom: 20px; }
.friends-title  { font-size: 22px; font-weight: 700; color: var(--text); margin: 0 0 4px; }
.friends-sub    { font-size: 13px; color: var(--muted); margin: 0; }

.friends-add-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 18px;
  margin-bottom: 20px;
}
.friends-add-row { display: flex; gap: 10px; }
.friends-email-input {
  flex: 1;
  padding: 11px 16px;
  border-radius: 12px;
  border: 1.5px solid var(--border);
  background: var(--bg);
  color: var(--text);
  font-size: 14px;
  font-family: inherit;
  outline: none;
  transition: border-color 0.18s;
}
.friends-email-input:focus { border-color: var(--accent); }
.friends-email-input::placeholder { color: var(--muted); }
.friends-add-btn {
  padding: 11px 20px;
  border-radius: 12px;
  background: var(--accent);
  color: #0b0f19;
  font-weight: 700;
  font-size: 13px;
  border: none;
  cursor: pointer;
  font-family: inherit;
  white-space: nowrap;
  transition: opacity 0.18s;
}
.friends-add-btn:hover { opacity: 0.85; }
.friends-add-msg { font-size: 13px; margin-top: 10px; }

.friends-section { margin-bottom: 24px; }
.friends-section-title {
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 10px;
}
.friends-loading, .friends-empty {
  text-align: center;
  padding: 32px 20px;
  color: var(--muted);
  font-size: 14px;
}

/* Friend request item */
.friend-request-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 16px;
  background: var(--surface);
  border: 1px solid rgba(245,158,11,0.3);
  border-radius: 14px;
  margin-bottom: 8px;
}
.friend-req-name  { font-size: 14px; font-weight: 600; color: var(--text); }
.friend-req-email { font-size: 12px; color: var(--muted); }
.friend-req-actions { display: flex; gap: 8px; flex-shrink: 0; }
.friend-accept-btn {
  padding: 7px 14px;
  border-radius: 20px;
  background: var(--accent);
  color: #0b0f19;
  border: none;
  font-weight: 700;
  font-size: 12px;
  cursor: pointer;
  font-family: inherit;
}
.friend-decline-btn {
  padding: 7px 10px;
  border-radius: 20px;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--muted);
  font-size: 12px;
  cursor: pointer;
}

/* Friend card */
.friend-card {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px 16px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  margin-bottom: 10px;
  transition: border-color 0.18s;
}
.friend-card:hover { border-color: var(--accent-border, rgba(0,200,122,0.25)); }
.friend-avatar {
  width: 44px; height: 44px;
  border-radius: 50%;
  background: var(--grad-accent, linear-gradient(135deg,#00f5a0,#00d9f5));
  display: flex; align-items: center; justify-content: center;
  font-size: 18px; font-weight: 700; color: #0b0f19;
  flex-shrink: 0;
}
.friend-info { flex: 1; min-width: 0; }
.friend-name  { font-size: 15px; font-weight: 600; color: var(--text); }
.friend-email { font-size: 12px; color: var(--muted); }
.friend-card-actions { display: flex; gap: 8px; flex-shrink: 0; }
.friend-view-btn {
  padding: 8px 16px;
  border-radius: 20px;
  border: 1.5px solid var(--accent-border, rgba(0,200,122,0.3));
  background: transparent;
  color: var(--accent);
  font-weight: 600;
  font-size: 12px;
  cursor: pointer;
  font-family: inherit;
  white-space: nowrap;
  transition: all 0.15s;
}
.friend-view-btn:hover { background: var(--accent); color: #0b0f19; }
.friend-remove-btn {
  padding: 7px 10px;
  border-radius: 20px;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--muted);
  font-size: 12px;
  cursor: pointer;
  transition: color 0.15s;
}
.friend-remove-btn:hover { color: #ef4444; border-color: #ef4444; }

/* Friend dashboard modal */
.friend-modal-overlay {
  position: fixed; inset: 0; z-index: 9000;
  background: rgba(0,0,0,0.65);
  backdrop-filter: blur(8px);
  display: flex; align-items: center; justify-content: center;
  padding: 20px;
}
.friend-modal {
  background: var(--surface);
  border-radius: 22px;
  padding: 0;
  max-width: 560px;
  width: 100%;
  max-height: 85vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-shadow: 0 32px 100px rgba(0,0,0,0.6);
  animation: modalIn 0.2s ease;
}
@keyframes modalIn { from { opacity:0; transform:scale(0.96) translateY(10px); } to { opacity:1; transform:none; } }
.friend-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 22px 24px 16px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.friend-modal-name  { font-size: 18px; font-weight: 700; color: var(--text); }
.friend-modal-email { font-size: 13px; color: var(--muted); margin-top: 2px; }
.friend-modal-close {
  width: 34px; height: 34px;
  border-radius: 50%;
  background: var(--bg);
  border: none;
  font-size: 20px;
  cursor: pointer;
  color: var(--muted);
  display: flex; align-items: center; justify-content: center;
  transition: color 0.15s;
}
.friend-modal-close:hover { color: var(--text); }
.friend-modal-body {
  overflow-y: auto;
  padding: 20px 24px;
  flex: 1;
}
.friend-modal-loading { text-align:center; padding:32px; color:var(--muted); font-size:14px; }

/* Friend dashboard internals */
.fdash-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  margin-bottom: 18px;
}
.fdash-stat {
  background: var(--bg);
  border-radius: 12px;
  padding: 12px;
  text-align: center;
}
.fdash-stat-val { font-size: 22px; font-weight: 700; color: var(--text); }
.fdash-stat-lbl { font-size: 11px; color: var(--muted); margin-top: 2px; }
.fdash-progress-wrap { margin-bottom: 18px; }
.fdash-progress-label {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  color: var(--muted);
  margin-bottom: 6px;
}
.fdash-bar-track {
  height: 8px;
  background: var(--bg);
  border-radius: 99px;
  overflow: hidden;
}
.fdash-bar-fill {
  height: 100%;
  background: var(--grad-accent, linear-gradient(90deg,#00f5a0,#00d9f5));
  border-radius: 99px;
  transition: width 0.6s ease;
}
.fdash-section { margin-bottom: 16px; }
.fdash-section-title {
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 1.2px;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 8px;
}
.fdash-task-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 7px 0;
  border-bottom: 1px solid var(--border);
  font-size: 13px;
  color: var(--text2);
}
.fdash-task-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}
.fdash-task-name { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

/* ═══════════════════════════════════════════════════════════════
   MOBILE — Full responsive overhaul
═══════════════════════════════════════════════════════════════ */
@media (max-width: 768px) {
  /* Sidebar hidden by default, slides in */
  .sidebar {
    position: fixed !important;
    left: -260px;
    top: 0; bottom: 0;
    width: 240px !important;
    z-index: 1000;
    transition: left 0.28s cubic-bezier(0.4,0,0.2,1) !important;
    overflow-y: auto;
    box-shadow: 4px 0 24px rgba(0,0,0,0.5);
  }
  .sidebar.mobile-open { left: 0 !important; }

  /* Overlay behind open sidebar */
  .sidebar-overlay {
    display: none;
    position: fixed; inset: 0; z-index: 999;
    background: rgba(0,0,0,0.5);
    backdrop-filter: blur(2px);
  }
  .sidebar-overlay.active { display: block; }

  /* Main content full width */
  .main-area { width: 100% !important; margin-left: 0 !important; }

  /* Topbar: show hamburger */
  .topbar {
    padding: 0 16px !important;
    height: 56px !important;
  }
  .mobile-menu-btn {
    display: flex !important;
    align-items: center; justify-content: center;
    width: 40px; height: 40px;
    border-radius: 10px;
    background: transparent;
    border: 1.5px solid var(--border);
    color: var(--text);
    font-size: 20px;
    cursor: pointer;
    flex-shrink: 0;
    transition: background 0.15s;
  }
  .mobile-menu-btn:hover { background: var(--surface); }

  /* Content padding */
  #appContent { padding: 14px 14px 80px !important; }

  /* Home hero stacks vertically */
  .home-hero { flex-direction: column !important; gap: 16px !important; }
  .home-hero-right { display: none !important; }
  .home-cards-row { grid-template-columns: 1fr !important; }
  .home-bottom-row { grid-template-columns: 1fr !important; }
  .home-greeting { font-size: 22px !important; }

  /* Task modal full screen */
  .task-modal-overlay { padding: 0 !important; align-items: flex-end !important; }
  .task-modal {
    border-radius: 24px 24px 0 0 !important;
    max-height: 92vh !important;
    width: 100% !important;
    padding: 20px 18px 32px !important;
  }

  /* Freq/priority pills wrap */
  .freq-pills, .priority-pills { gap: 5px !important; }
  .freq-pill, .priority-pill { padding: 6px 12px !important; font-size: 12px !important; }

  /* Report tabs scroll */
  .report-tab { font-size: 12px !important; padding: 7px 12px !important; }

  /* Friend modal full height */
  .friend-modal { max-height: 95vh !important; border-radius: 22px 22px 0 0 !important; }
  .fdash-stats { grid-template-columns: repeat(3,1fr) !important; }

  /* Calendar */
  .cal-grid { gap: 2px !important; }
  .cal-day-num { font-size: 12px !important; }

  /* SWOT grid */
  .swot-grid { grid-template-columns: 1fr !important; }

  /* Theme panel */
  .combo-grid { grid-template-columns: 1fr 1fr !important; }
}

@media (max-width: 480px) {
  /* Even tighter */
  .freq-pill, .priority-pill { padding: 5px 9px !important; font-size: 11px !important; }
  .fdash-stats { grid-template-columns: repeat(2,1fr) !important; }
  .friend-card { flex-wrap: wrap; }
  .friend-card-actions { width: 100%; justify-content: flex-end; }
  .report-header { flex-direction: column !important; gap: 10px !important; align-items: flex-start !important; }
  .home-title { font-size: 20px !important; }
}

/* ── Friends: username banner ─────────────────────────────── */
.friends-username-btn {
  padding: 8px 16px; border-radius: 20px;
  border: 1.5px solid rgba(var(--accent-rgb, 0,200,122), 0.4);
  background: transparent; color: var(--accent);
  font-size: 12px; font-weight: 600; cursor: pointer;
  font-family: inherit; transition: all 0.2s;
}
.friends-username-btn:hover { background: rgba(var(--accent-rgb,0,200,122),0.08); }

.friends-username-banner {
  background: rgba(var(--accent-rgb,0,200,122),0.06);
  border: 1px solid rgba(var(--accent-rgb,0,200,122),0.2);
  border-radius: 14px; padding: 14px 18px; margin-bottom: 16px;
}
.friends-username-banner-inner {
  display: flex; flex-direction: column; gap: 10px;
  font-size: 13px; color: var(--text);
}
.friends-username-edit { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }

/* ── Friends: modal wide + tabs ──────────────────────────── */
.friend-modal-wide { max-width: 720px; width: 95%; }

.friend-tab-btn {
  padding: 7px 14px; border-radius: 20px;
  border: 1.5px solid rgba(255,255,255,0.12);
  background: transparent; color: var(--muted);
  font-size: 12px; font-weight: 600; cursor: pointer;
  font-family: inherit; transition: all 0.2s;
}
.friend-tab-btn.active {
  background: var(--accent); color: #000;
  border-color: var(--accent);
}

/* ── Unread badge ─────────────────────────────────────────── */
.unread-badge {
  display: inline-flex; align-items: center; justify-content: center;
  background: #ef4444; color: #fff;
  border-radius: 50%; width: 16px; height: 16px;
  font-size: 10px; font-weight: 700; margin-left: 4px;
}

/* ── Chat panel ───────────────────────────────────────────── */
.friend-chat-panel {
  display: flex; flex-direction: column;
  height: 380px; gap: 0;
}
.chat-messages {
  flex: 1; overflow-y: auto; padding: 16px;
  display: flex; flex-direction: column; gap: 10px;
}
.chat-bubble-wrap {
  display: flex; flex-direction: column; max-width: 70%;
}
.chat-me   { align-self: flex-end;  align-items: flex-end; }
.chat-them { align-self: flex-start; align-items: flex-start; }
.chat-bubble {
  padding: 10px 14px; border-radius: 18px;
  font-size: 13px; line-height: 1.5; word-break: break-word;
}
.chat-me .chat-bubble {
  background: var(--accent); color: #000; border-bottom-right-radius: 4px;
}
.chat-them .chat-bubble {
  background: rgba(255,255,255,0.08); color: var(--text); border-bottom-left-radius: 4px;
}
.chat-time { font-size: 10px; color: var(--muted); margin-top: 2px; padding: 0 4px; }

.chat-input-row {
  display: flex; gap: 8px; padding: 12px 16px;
  border-top: 1px solid rgba(255,255,255,0.08);
}
.chat-input {
  flex: 1; padding: 10px 14px; border-radius: 22px;
  border: 1.5px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.05); color: var(--text);
  font-size: 13px; font-family: inherit; outline: none;
}
.chat-input:focus { border-color: var(--accent); }
.chat-send-btn {
  padding: 10px 18px; border-radius: 22px;
  background: var(--accent); color: #000;
  border: none; font-weight: 700; font-size: 13px;
  cursor: pointer; font-family: inherit; transition: opacity 0.2s;
}
.chat-send-btn:disabled { opacity: 0.5; cursor: not-allowed; }

/* ═══════════════════════════════════════════════════
   FRIENDS PAGE — Complete Redesign
═══════════════════════════════════════════════════ */
.fr-page { display: flex; flex-direction: column; gap: 16px; padding: 0 0 40px; }

/* My profile card */
.fr-my-card {
  display: flex; align-items: center; gap: 14px; flex-wrap: wrap;
  background: var(--surface); border-radius: 18px;
  padding: 18px 20px; border: 1px solid rgba(255,255,255,0.07);
}
.fr-my-avatar {
  width: 52px; height: 52px; border-radius: 50%;
  background: var(--accent); color: #000;
  display: flex; align-items: center; justify-content: center;
  font-size: 22px; font-weight: 700; flex-shrink: 0;
}
.fr-my-info { flex: 1; min-width: 0; }
.fr-my-username { font-size: 16px; font-weight: 700; color: var(--text); }
.fr-my-email    { font-size: 12px; color: var(--muted); margin-top: 2px; }
.fr-my-actions  { display: flex; flex-direction: column; gap: 8px; align-items: flex-end; }

.fr-online-toggle { display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 12px; color: var(--muted); }
.fr-toggle-track {
  width: 34px; height: 18px; border-radius: 9px;
  background: rgba(255,255,255,0.12); position: relative; transition: background 0.2s;
}
.fr-online-toggle input { display: none; }
.fr-online-toggle input:checked + .fr-toggle-track { background: var(--accent); }
.fr-toggle-track::after {
  content: ""; position: absolute; top: 2px; left: 2px;
  width: 14px; height: 14px; border-radius: 50%;
  background: #fff; transition: transform 0.2s;
}
.fr-online-toggle input:checked + .fr-toggle-track::after { transform: translateX(16px); }

.fr-edit-btn {
  padding: 6px 12px; border-radius: 16px;
  border: 1.5px solid rgba(255,255,255,0.15);
  background: transparent; color: var(--muted);
  font-size: 11px; cursor: pointer; font-family: inherit;
  transition: all 0.2s;
}
.fr-edit-btn:hover { border-color: var(--accent); color: var(--accent); }

/* Username edit row */
.fr-username-edit-row {
  display: flex; gap: 8px; align-items: center; flex-wrap: wrap;
  background: rgba(255,255,255,0.03); border-radius: 14px;
  padding: 14px 16px; border: 1px solid rgba(255,255,255,0.07);
}

/* Section cards */
.fr-section-card {
  background: var(--surface); border-radius: 18px;
  padding: 18px 20px; border: 1px solid rgba(255,255,255,0.07);
}
.fr-section-title { font-size: 13px; font-weight: 700; color: var(--text); margin-bottom: 14px; letter-spacing: 0.3px; }

/* Add friend row */
.fr-add-row { display: flex; gap: 8px; }
.fr-text-input {
  flex: 1; padding: 10px 14px; border-radius: 22px;
  border: 1.5px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.05); color: var(--text);
  font-size: 13px; font-family: inherit; outline: none; min-width: 0;
}
.fr-text-input:focus { border-color: var(--accent); }
.fr-accent-btn {
  padding: 10px 18px; border-radius: 22px;
  background: var(--accent); color: #000;
  border: none; font-weight: 700; font-size: 13px;
  cursor: pointer; font-family: inherit; white-space: nowrap;
  transition: opacity 0.2s;
}
.fr-accent-btn:disabled { opacity: 0.5; cursor: not-allowed; }

.fr-small-msg { font-size: 12px; color: var(--muted); }
.fr-loading   { font-size: 13px; color: var(--muted); padding: 12px 0; }
.fr-empty     { text-align: center; padding: 24px; font-size: 13px; color: var(--muted); }

/* Requests */
.fr-request-item {
  display: flex; align-items: center; gap: 12px;
  padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,0.06);
}
.fr-request-item:last-child { border-bottom: none; padding-bottom: 0; }
.fr-req-avatar {
  width: 40px; height: 40px; border-radius: 50%;
  background: rgba(255,255,255,0.1); color: var(--text);
  display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: 16px; flex-shrink: 0;
}
.fr-req-info { flex: 1; min-width: 0; }
.fr-req-name  { font-size: 14px; font-weight: 600; color: var(--text); }
.fr-req-email { font-size: 11px; color: var(--muted); margin-top: 1px; }
.fr-req-btns  { display: flex; gap: 6px; }
.fr-accept-btn {
  padding: 6px 12px; border-radius: 16px;
  background: var(--accent); color: #000;
  border: none; font-size: 12px; font-weight: 700;
  cursor: pointer; font-family: inherit;
}
.fr-decline-btn {
  padding: 6px 10px; border-radius: 16px;
  background: rgba(239,68,68,0.15); color: #ef4444;
  border: 1px solid rgba(239,68,68,0.3); font-size: 12px;
  cursor: pointer; font-family: inherit;
}

/* Friend cards */
.fr-friend-card {
  display: flex; align-items: center; gap: 12px;
  padding: 14px 0; border-bottom: 1px solid rgba(255,255,255,0.06);
  transition: background 0.15s;
}
.fr-friend-card:last-child { border-bottom: none; padding-bottom: 0; }
.fr-friend-avatar-wrap { position: relative; flex-shrink: 0; }
.fr-friend-avatar {
  width: 44px; height: 44px; border-radius: 50%;
  background: rgba(255,255,255,0.1); color: var(--text);
  display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: 18px;
}
.fr-online-dot {
  width: 11px; height: 11px; border-radius: 50%;
  background: #00c87a; border: 2px solid var(--surface);
  position: absolute; bottom: 1px; right: 1px;
}
.fr-friend-info { flex: 1; min-width: 0; }
.fr-friend-name { font-size: 14px; font-weight: 600; color: var(--text); }
.fr-friend-sub  { font-size: 11px; color: var(--muted); margin-top: 2px; }
.fr-friend-actions { display: flex; gap: 6px; align-items: center; }
.fr-open-btn {
  padding: 7px 14px; border-radius: 18px;
  background: rgba(255,255,255,0.07); color: var(--text);
  border: 1.5px solid rgba(255,255,255,0.1); font-size: 12px;
  font-weight: 600; cursor: pointer; font-family: inherit;
  display: flex; align-items: center; gap: 5px;
  transition: all 0.2s;
}
.fr-open-btn:hover { border-color: var(--accent); color: var(--accent); }
.fr-remove-btn {
  width: 30px; height: 30px; border-radius: 50%;
  background: transparent; color: var(--muted);
  border: 1px solid rgba(255,255,255,0.1); font-size: 13px;
  cursor: pointer; font-family: inherit; display: flex;
  align-items: center; justify-content: center; transition: all 0.2s;
}
.fr-remove-btn:hover { background: rgba(239,68,68,0.15); color: #ef4444; border-color: rgba(239,68,68,0.3); }

/* Badge */
.fr-badge {
  display: inline-flex; align-items: center; justify-content: center;
  background: #ef4444; color: #fff;
  border-radius: 50%; width: 16px; height: 16px;
  font-size: 10px; font-weight: 700;
}

/* Modal */
.fr-modal-overlay {
  position: fixed; inset: 0; z-index: 9000;
  background: rgba(0,0,0,0.75); display: flex;
  align-items: center; justify-content: center; padding: 20px;
}
.fr-modal {
  background: var(--surface); border-radius: 22px;
  width: 100%; max-width: 680px;
  max-height: 88vh; display: flex; flex-direction: column;
  border: 1px solid rgba(255,255,255,0.1);
  box-shadow: 0 28px 80px rgba(0,0,0,0.6);
  overflow: hidden;
}
.fr-modal-header {
  display: flex; justify-content: space-between; align-items: center;
  padding: 20px 22px 16px; border-bottom: 1px solid rgba(255,255,255,0.08);
  flex-wrap: wrap; gap: 10px;
}
.fr-modal-user { display: flex; align-items: center; gap: 12px; }
.fr-modal-avatar {
  width: 46px; height: 46px; border-radius: 50%;
  background: var(--accent); color: #000;
  display: flex; align-items: center; justify-content: center;
  font-size: 20px; font-weight: 700; flex-shrink: 0;
}
.fr-modal-name   { font-size: 16px; font-weight: 700; color: var(--text); }
.fr-modal-status { font-size: 12px; color: var(--muted); margin-top: 2px; }
.fr-modal-tabs   { display: flex; gap: 6px; align-items: center; }
.fr-tab {
  padding: 7px 14px; border-radius: 18px;
  border: 1.5px solid rgba(255,255,255,0.12);
  background: transparent; color: var(--muted);
  font-size: 12px; font-weight: 600; cursor: pointer;
  font-family: inherit; transition: all 0.2s;
  display: flex; align-items: center; gap: 5px;
}
.fr-tab.active { background: var(--accent); color: #000; border-color: var(--accent); }
.fr-modal-close {
  width: 32px; height: 32px; border-radius: 50%;
  background: rgba(255,255,255,0.07); color: var(--text);
  border: none; font-size: 15px; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: background 0.2s;
}
.fr-modal-close:hover { background: rgba(239,68,68,0.2); color: #ef4444; }

/* Panels */
.fr-panel { padding: 20px 22px; overflow-y: auto; max-height: 55vh; }

/* Stats */
.fr-stats-row {
  display: grid; grid-template-columns: repeat(6, 1fr);
  gap: 10px; margin-bottom: 16px;
}
.fr-stat { text-align: center; }
.fr-stat-val { font-size: 20px; font-weight: 700; color: var(--text); }
.fr-stat-lbl { font-size: 10px; color: var(--muted); margin-top: 2px; text-transform: uppercase; letter-spacing: 0.5px; }

.fr-progress-wrap { margin-bottom: 16px; }
.fr-progress-label { display: flex; justify-content: space-between; font-size: 12px; color: var(--muted); margin-bottom: 6px; }
.fr-progress-track { height: 6px; background: rgba(255,255,255,0.08); border-radius: 3px; overflow: hidden; }
.fr-progress-fill  { height: 100%; background: var(--accent); border-radius: 3px; transition: width 0.5s; }

.fr-task-group { margin-top: 14px; }
.fr-task-group-title { font-size: 11px; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
.fr-task-row { display: flex; align-items: center; gap: 8px; padding: 5px 0; font-size: 13px; color: var(--text); }
.fr-task-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }

/* Chat */
.fr-chat-panel { flex-direction: column; height: 400px; padding: 0; }
.fr-chat-messages {
  flex: 1; overflow-y: auto; padding: 16px 20px;
  display: flex; flex-direction: column; gap: 10px;
}
.fr-chat-empty { text-align: center; padding: 40px; color: var(--muted); font-size: 13px; }

.fr-bubble-wrap { display: flex; flex-direction: column; max-width: 68%; }
.fr-me    { align-self: flex-end;  align-items: flex-end; }
.fr-them  { align-self: flex-start; align-items: flex-start; }
.fr-bubble {
  padding: 10px 14px; border-radius: 18px;
  font-size: 13px; line-height: 1.5; word-break: break-word;
}
.fr-me .fr-bubble   { background: var(--accent); color: #000; border-bottom-right-radius: 4px; }
.fr-them .fr-bubble { background: rgba(255,255,255,0.09); color: var(--text); border-bottom-left-radius: 4px; }
.fr-bubble-time { font-size: 10px; color: var(--muted); margin-top: 3px; padding: 0 3px; }

.fr-chat-input-row {
  display: flex; gap: 8px; padding: 12px 18px;
  border-top: 1px solid rgba(255,255,255,0.08);
}
.fr-chat-input {
  flex: 1; padding: 10px 14px; border-radius: 22px;
  border: 1.5px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.05); color: var(--text);
  font-size: 13px; font-family: inherit; outline: none;
}
.fr-chat-input:focus { border-color: var(--accent); }

@media (max-width: 600px) {
  .fr-stats-row { grid-template-columns: repeat(3, 1fr); }
  .fr-modal-header { flex-direction: column; align-items: flex-start; }
  .fr-my-card { flex-direction: column; align-items: flex-start; }
  .fr-my-actions { align-items: flex-start; }
}

/* ═══════════════════════════════════════════════════
   REPORT PAGE — Detailed Stats
═══════════════════════════════════════════════════ */
.report-loading {
  display: flex; align-items: center; gap: 10px;
  padding: 40px; justify-content: center;
  color: var(--muted); font-size: 14px;
}
.report-spinner {
  width: 18px; height: 18px; border-radius: 50%;
  border: 2px solid rgba(255,255,255,0.1);
  border-top-color: var(--accent);
  animation: spin 0.8s linear infinite; display: inline-block;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Big stat grid */
.report-stats-grid {
  display: grid; grid-template-columns: repeat(3, 1fr);
  gap: 12px; margin-bottom: 16px;
}
.report-big-stat {
  background: rgba(255,255,255,0.04); border-radius: 12px;
  padding: 14px; text-align: center;
}
.report-big-val { font-size: 26px; font-weight: 800; color: var(--text); line-height: 1; }
.report-big-lbl { font-size: 11px; color: var(--muted); margin-top: 4px; text-transform: uppercase; letter-spacing: 0.5px; }

/* Progress bar */
.report-progress-wrap { margin-top: 4px; }
.report-progress-label { display: flex; justify-content: space-between; font-size: 12px; color: var(--muted); margin-bottom: 6px; }
.report-progress-track { height: 7px; background: rgba(255,255,255,0.08); border-radius: 4px; overflow: hidden; }
.report-progress-fill  { height: 100%; background: var(--accent); border-radius: 4px; transition: width 0.6s ease; }

/* Priority breakdown */
.report-priority-list { display: flex; flex-direction: column; gap: 8px; }
.report-priority-row  { display: flex; align-items: center; gap: 10px; }
.report-priority-label { display: flex; align-items: center; gap: 6px; min-width: 90px; font-size: 12px; color: var(--text); }
.report-priority-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
.report-priority-bar-wrap { flex: 1; height: 6px; background: rgba(255,255,255,0.07); border-radius: 3px; overflow: hidden; }
.report-priority-bar { height: 100%; border-radius: 3px; transition: width 0.5s; }
.report-priority-nums { font-size: 11px; color: var(--muted); min-width: 70px; text-align: right; }

/* Category grid */
.report-cat-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 10px; }
.report-cat-item {
  background: rgba(255,255,255,0.04); border-radius: 12px;
  padding: 12px; text-align: center;
}
.report-cat-icon { font-size: 20px; margin-bottom: 4px; }
.report-cat-name { font-size: 11px; color: var(--muted); text-transform: capitalize; margin-bottom: 4px; }
.report-cat-val  { font-size: 14px; font-weight: 700; color: var(--text); margin-bottom: 6px; }
.report-cat-bar-track { height: 4px; background: rgba(255,255,255,0.08); border-radius: 2px; overflow: hidden; }
.report-cat-bar-fill  { height: 100%; background: var(--accent); border-radius: 2px; }

/* Task list in reports */
.report-task-list { display: flex; flex-direction: column; gap: 6px; }
.report-task-item { display: flex; align-items: center; gap: 8px; padding: 7px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
.report-task-item:last-child { border-bottom: none; }
.report-task-dot  { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
.report-task-name { flex: 1; font-size: 13px; color: var(--text); }
.report-task-done .report-task-name { opacity: 0.8; }
.report-task-time { font-size: 11px; color: var(--muted); }
.report-task-badge { padding: 2px 7px; border-radius: 10px; font-size: 10px; font-weight: 600; }
.report-task-badge-red    { background: rgba(239,68,68,0.15); color: #ef4444; }
.report-task-badge-yellow { background: rgba(245,158,11,0.15); color: #f59e0b; }

.report-best-day { font-size: 12px; color: var(--muted); padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.07); margin-top: 8px; }
.report-card-danger { border-color: rgba(239,68,68,0.25) !important; }
.report-card-warn   { border-color: rgba(245,158,11,0.25) !important; }

/* AI card - improved */
.report-ai-spinner-dot {
  width: 8px; height: 8px; border-radius: 50%;
  background: var(--accent); display: inline-block;
  animation: pulse 1s ease-in-out infinite;
}
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.3} }

.report-ai-section-title {
  color: var(--accent); font-size: 11px; font-weight: 800;
  letter-spacing: 2px; text-transform: uppercase;
  display: block; margin: 16px 0 6px; padding-bottom: 4px;
  border-bottom: 1px solid rgba(var(--accent-rgb,0,200,122),0.2);
}
.report-ai-section-title:first-child { margin-top: 4px; }
.report-ai-number { color: var(--accent); font-weight: 700; }
.report-ai-body p { margin: 0 0 8px; line-height: 1.65; }

@media (max-width: 600px) {
  .report-stats-grid { grid-template-columns: repeat(2, 1fr) !important; }
  .report-big-val { font-size: 22px; }
  .report-cat-grid { grid-template-columns: repeat(2, 1fr); }
  .report-priority-label { min-width: 72px; }
}

/* ═══════════════════════════════════════════════════
   BRAINSTORM AI PANEL
═══════════════════════════════════════════════════ */
.bs-ai-panel {
  position: fixed;
  top: 0; right: 0; bottom: 0;
  width: min(320px, 100vw);
  background: var(--surface);
  border-left: 1px solid rgba(255,255,255,0.1);
  z-index: 700;
  display: flex;
  flex-direction: column;
  box-shadow: -12px 0 40px rgba(0,0,0,0.4);
  transform: translateX(0);
  animation: slideInRight 0.25s cubic-bezier(0.32,0.72,0,1);
}
@keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }

.bs-ai-panel-header {
  display: flex; justify-content: space-between; align-items: center;
  padding: 16px 16px 12px;
  border-bottom: 1px solid rgba(255,255,255,0.08);
}
.bs-ai-panel-body { padding: 12px 14px; border-bottom: 1px solid rgba(255,255,255,0.08); }
.bs-ai-prompt-ta {
  width: 100%; padding: 10px 12px; border-radius: 10px;
  border: 1.5px solid rgba(255,255,255,0.1);
  background: rgba(255,255,255,0.04); color: var(--text);
  font-size: 12px; font-family: inherit; resize: none; outline: none;
  box-sizing: border-box; line-height: 1.5;
}
.bs-ai-prompt-ta:focus { border-color: var(--accent); }

.bs-ai-results { flex: 1; overflow-y: auto; padding: 12px 14px; }
.bs-ai-hint { font-size: 12px; color: var(--muted); text-align: center; padding: 20px 10px; line-height: 1.6; }

.bs-ai-idea-item {
  display: flex; align-items: flex-start; gap: 8px;
  padding: 9px 10px; border-radius: 10px; cursor: pointer;
  font-size: 12px; color: var(--text); line-height: 1.5;
  border: 1px solid rgba(255,255,255,0.06);
  margin-bottom: 6px; transition: all 0.15s;
  background: rgba(255,255,255,0.03);
}
.bs-ai-idea-item:hover { background: rgba(var(--accent-rgb,0,200,122),0.08); border-color: rgba(var(--accent-rgb,0,200,122),0.25); }
.bs-ai-idea-dot {
  color: var(--accent); font-size: 14px; font-weight: 700;
  flex-shrink: 0; line-height: 1.4; width: 16px;
}

/* ═══════════════════════════════════════════════════
   SWOT AI result formatting
═══════════════════════════════════════════════════ */
#swotAiBody p { margin: 0 0 8px; line-height: 1.65; }

/* ═══════════════════════════════════════════════════
   PROFILE PHOTO UPLOAD
═══════════════════════════════════════════════════ */
.fr-my-avatar-wrap {
  position: relative;
  flex-shrink: 0;
}

.fr-my-avatar {
  width: 56px; height: 56px; border-radius: 50%;
  background: var(--accent); color: #000;
  display: flex; align-items: center; justify-content: center;
  font-size: 22px; font-weight: 800;
  background-size: cover; background-position: center;
  border: 2px solid rgba(255,255,255,0.1);
}

.fr-avatar-upload-btn {
  position: absolute; bottom: -2px; right: -2px;
  width: 22px; height: 22px; border-radius: 50%;
  background: var(--surface); border: 1.5px solid rgba(255,255,255,0.15);
  display: flex; align-items: center; justify-content: center;
  font-size: 11px; cursor: pointer;
  transition: transform 0.15s, background 0.15s;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}
.fr-avatar-upload-btn:hover {
  transform: scale(1.15);
  background: var(--accent);
}

/* Friend avatars with photos */
.fr-friend-avatar {
  background-size: cover !important;
  background-position: center !important;
}
.fr-modal-avatar {
  background-size: cover !important;
  background-position: center !important;
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateX(-50%) translateY(10px); }
  to   { opacity: 1; transform: translateX(-50%) translateY(0); }
}

/* ═══════════════════════════════════════════════════════════════
   TASK ITEM — Redesigned for clarity + mobile safety
═══════════════════════════════════════════════════════════════ */
.task-item {
  display: flex;
  align-items: stretch;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: var(--surface);
  margin-bottom: 8px;
  overflow: hidden;
  transition: box-shadow 0.2s, transform 0.15s;
  position: relative;
}
.task-item:hover {
  box-shadow: 0 4px 20px rgba(0,0,0,0.12);
}
.task-item.task-completed {
  opacity: 0.55;
}

/* Left accent stripe */
.task-priority-stripe {
  width: 4px;
  flex-shrink: 0;
  border-radius: 0;
}

/* Drag handle */
.drag-handle {
  display: flex;
  align-items: center;
  padding: 0 6px;
  color: var(--muted);
  opacity: 0.3;
  cursor: grab;
  font-size: 14px;
  flex-shrink: 0;
}

/* Body: content + actions stacked */
.task-body {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  padding: 12px 12px 10px;
  gap: 10px;
}

/* Content area */
.task-content {
  flex: 1;
  min-width: 0;
}

.task-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
  line-height: 1.4;
  word-break: break-word;
  margin-bottom: 4px;
}
.task-title.strikethrough {
  text-decoration: line-through;
  opacity: 0.6;
}

.task-desc {
  font-size: 12px;
  color: var(--muted);
  margin-bottom: 6px;
  line-height: 1.5;
}

.task-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
  align-items: center;
}

.task-badge {
  font-size: 11px;
  padding: 2px 7px;
  border-radius: 6px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.1);
  color: var(--muted);
  white-space: nowrap;
}

/* Actions row — always inside card, never overflows */
/* Task section header */
.task-section-title {
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--muted);
  padding: 12px 0 8px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 10px;
}

/* Empty state */
.task-empty {
  text-align: center;
  padding: 32px 20px;
  color: var(--muted);
  font-size: 13px;
}



/* ═══════════════════════════════════════════════════════════════
   WHISPER BUTTONS — fix dark hover override from components.css
═══════════════════════════════════════════════════════════════ */
/* Whisper buttons — override components.css dark hover */
.whisper-hero-btns .whisper-btn-primary,
.whisper-btn.whisper-btn-primary {
  background: linear-gradient(135deg, #00f5a0, #00d9f5) !important;
  color: #060f1e !important;
  border: none !important;
  letter-spacing: 0 !important;
  text-transform: none !important;
  padding: 13px 26px !important;
}
.whisper-hero-btns .whisper-btn-primary:hover,
.whisper-btn.whisper-btn-primary:hover {
  background: linear-gradient(135deg, #00f5a0, #00d9f5) !important;
  transform: translateY(-3px) !important;
  box-shadow: 0 10px 30px rgba(0,200,122,0.4) !important;
  color: #060f1e !important;
  border-color: transparent !important;
}
.whisper-hero-btns .whisper-btn-ghost,
.whisper-btn.whisper-btn-ghost {
  background: transparent !important;
  border: 1.5px solid rgba(255,255,255,0.18) !important;
  color: rgba(255,255,255,0.7) !important;
  letter-spacing: 0 !important;
  text-transform: none !important;
  padding: 13px 26px !important;
}
.whisper-hero-btns .whisper-btn-ghost:hover,
.whisper-btn.whisper-btn-ghost:hover {
  background: rgba(255,255,255,0.05) !important;
  border-color: rgba(255,255,255,0.5) !important;
  color: white !important;
  transform: translateY(-2px) !important;
  box-shadow: 0 0 20px rgba(255,255,255,0.05) !important;
}

/* ═══════════════════════════════════════════════════════════════
   TASK ACTION BUTTONS — mobile friendly tap targets
═══════════════════════════════════════════════════════════════ */
/* ── Task card: body is a column (content on top, actions on bottom) ── */
.task-body {
  flex: 1 !important;
  min-width: 0 !important;
  display: flex !important;
  flex-direction: column !important;
  padding: 12px 12px 10px !important;
}
.task-content {
  flex: 1 !important;
  min-width: 0 !important;
  padding-bottom: 10px !important;
}

/* ── Actions row — always at the bottom of the card, full width ── */
.task-actions {
  display: flex !important;
  gap: 7px !important;
  padding-top: 8px !important;
  border-top: 1px solid rgba(255,255,255,0.06) !important;
  width: 100% !important;
}
body:not(.dark) .task-actions {
  border-top-color: rgba(0,0,0,0.07) !important;
}
.complete-btn, .edit-btn, .delete-btn {
  flex: 1 !important;
  min-height: 38px !important;
  padding: 7px 4px !important;
  font-size: 12px !important;
  font-weight: 600 !important;
  border-radius: 9px !important;
  cursor: pointer !important;
  font-family: inherit !important;
  transition: all 0.15s !important;
  white-space: nowrap !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 4px !important;
  border: 1px solid transparent !important;
}
.complete-btn {
  background: rgba(0,200,122,0.1) !important;
  border-color: rgba(0,200,122,0.3) !important;
  color: #00c87a !important;
}
.complete-btn:hover, .complete-btn:active { background: rgba(0,200,122,0.22) !important; }
.edit-btn {
  background: rgba(99,120,200,0.12) !important;
  border-color: rgba(99,120,200,0.4) !important;
  color: #8ba3f5 !important;
}
.edit-btn:hover, .edit-btn:active { background: rgba(99,120,200,0.22) !important; color: #a8bef8 !important; }
.delete-btn {
  background: rgba(239,68,68,0.1) !important;
  border-color: rgba(239,68,68,0.4) !important;
  color: #f87171 !important;
}
.delete-btn:hover, .delete-btn:active { background: rgba(239,68,68,0.22) !important; color: #fca5a5 !important; }
body:not(.dark) .edit-btn {
  background: rgba(59,130,246,0.08) !important;
  border-color: rgba(59,130,246,0.3) !important;
  color: #2563eb !important;
}
body:not(.dark) .edit-btn:hover { background: rgba(59,130,246,0.15) !important; }
body:not(.dark) .delete-btn {
  background: rgba(220,38,38,0.07) !important;
  border-color: rgba(220,38,38,0.3) !important;
  color: #dc2626 !important;
}
body:not(.dark) .delete-btn:hover { background: rgba(220,38,38,0.15) !important; }

/* ═══════════════════════════════════════════════════════════════
   PAST REPORTS — filter tabs
═══════════════════════════════════════════════════════════════ */
.report-hist-filters {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 16px;
  padding-bottom: 14px;
  border-bottom: 1px solid var(--border);
}
.report-hist-filter-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 7px 14px;
  border-radius: 20px;
  border: 1px solid var(--border);
  background: transparent;
  color: var(--muted);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  font-family: inherit;
  transition: all 0.18s;
  white-space: nowrap;
}
.report-hist-filter-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
  background: rgba(0,200,122,0.06);
}
.report-hist-filter-btn.active {
  background: rgba(0,200,122,0.12);
  border-color: var(--accent);
  color: var(--accent);
  font-weight: 600;
}
.report-hist-filter-count {
  background: rgba(255,255,255,0.08);
  border-radius: 10px;
  padding: 1px 6px;
  font-size: 11px;
  font-weight: 700;
}
.report-hist-filter-btn.active .report-hist-filter-count {
  background: rgba(0,200,122,0.2);
}

/* ═══════════════════════════════════════════════════════════════
   FRIENDS — profile card & avatar upload fix
═══════════════════════════════════════════════════════════════ */
.fr-profile-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 16px;
}
.fr-profile-left { display: flex; align-items: center; gap: 16px; }
.fr-avatar-wrap  { position: relative; }
.fr-avatar {
  width: 64px; height: 64px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent), var(--accent2, #00d9f5));
  display: flex; align-items: center; justify-content: center;
  font-size: 24px; font-weight: 700; color: #000;
  overflow: hidden;
}
.fr-avatar-upload-btn {
  position: absolute; bottom: -2px; right: -2px;
  width: 24px; height: 24px;
  background: var(--surface2, #1a1a2e);
  border: 2px solid var(--border);
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; font-size: 11px;
  transition: background 0.2s;
}
.fr-avatar-upload-btn:hover { background: var(--accent); }
.fr-profile-name  { font-size: 16px; font-weight: 700; color: var(--text); }
.fr-profile-email { font-size: 12px; color: var(--muted); margin-top: 2px; }
.fr-modal-av-wrap { flex-shrink: 0; }
.fr-modal-avatar  {
  width: 48px; height: 48px; border-radius: 50%;
  background: linear-gradient(135deg, var(--accent), var(--accent2, #00d9f5));
  display: flex; align-items: center; justify-content: center;
  font-size: 18px; font-weight: 700; color: #000; overflow: hidden;
}

/* ═══════════════════════════════════════════════════════════════
   WELLBEING PAGE
═══════════════════════════════════════════════════════════════ */
.wb-page { max-width: 680px; margin: 0 auto; padding-bottom: 40px; }
.wb-header {
  display: flex; align-items: flex-start; justify-content: space-between;
  margin-bottom: 24px; gap: 12px; flex-wrap: wrap;
}
.wb-title    { font-size: 26px; font-weight: 800; color: var(--text); margin: 0; }
.wb-subtitle { font-size: 13px; color: var(--muted); margin-top: 3px; }
.wb-ai-btn {
  padding: 9px 18px; border-radius: 20px;
  background: rgba(0,200,122,0.12); border: 1px solid rgba(0,200,122,0.3);
  color: var(--accent); font-size: 13px; font-weight: 600;
  cursor: pointer; font-family: inherit; white-space: nowrap;
  transition: all 0.18s;
}
.wb-ai-btn:hover { background: rgba(0,200,122,0.22); }
.wb-ai-btn:disabled { opacity: 0.5; cursor: not-allowed; }

.wb-today-card, .wb-ai-card, .wb-history-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 18px;
  padding: 22px;
  margin-bottom: 16px;
}
.wb-card-title {
  font-size: 14px; font-weight: 700; color: var(--text);
  margin-bottom: 18px; letter-spacing: 0.3px;
}

.wb-field { margin-bottom: 18px; }
.wb-field-label {
  font-size: 12px; font-weight: 600; color: var(--muted);
  text-transform: uppercase; letter-spacing: 0.8px;
  margin-bottom: 10px;
}

/* Emoji row */
.wb-emoji-row { display: flex; gap: 8px; flex-wrap: wrap; }
.wb-emoji-btn {
  width: 40px; height: 40px; border-radius: 10px;
  border: 2px solid transparent;
  background: rgba(255,255,255,0.04);
  font-size: 20px; cursor: pointer;
  transition: all 0.15s; display: flex; align-items: center; justify-content: center;
}
.wb-emoji-btn:hover { background: rgba(255,255,255,0.1); transform: scale(1.1); }
.wb-emoji-btn.active {
  border-color: var(--accent);
  background: rgba(0,200,122,0.15);
  transform: scale(1.12);
}

/* Stress */
.wb-stress-row { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
.wb-stress-btn {
  width: 40px; height: 40px; border-radius: 10px;
  border: 2px solid var(--border);
  background: transparent;
  color: var(--text); font-size: 14px; font-weight: 700;
  cursor: pointer; transition: all 0.15s;
  font-family: inherit;
}
.wb-stress-btn:hover { border-color: var(--accent); color: var(--accent); }
.wb-stress-btn.active { background: var(--accent); border-color: var(--accent); color: #000; }
.wb-stress-labels {
  display: flex; gap: 4px; font-size: 10px; color: var(--muted);
  flex-direction: column; margin-left: 4px; line-height: 1.3;
}

/* Steppers */
.wb-row-2col { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.wb-stepper  { display: flex; align-items: center; gap: 14px; }
.wb-step-btn {
  width: 32px; height: 32px; border-radius: 8px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.04);
  color: var(--text); font-size: 18px; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.15s; font-family: inherit; line-height: 1;
}
.wb-step-btn:hover { background: rgba(255,255,255,0.1); border-color: var(--accent); }
.wb-step-val { font-size: 20px; font-weight: 700; color: var(--text); min-width: 28px; text-align: center; }

/* Toggle row */
.wb-toggle-row { display: flex; gap: 8px; flex-wrap: wrap; }
.wb-toggle-btn {
  padding: 7px 14px; border-radius: 20px;
  border: 1px solid var(--border);
  background: transparent; color: var(--muted);
  font-size: 12px; font-weight: 500; cursor: pointer;
  transition: all 0.15s; font-family: inherit;
}
.wb-toggle-btn:hover  { border-color: var(--accent); color: var(--accent); }
.wb-toggle-btn.active { background: rgba(0,200,122,0.15); border-color: var(--accent); color: var(--accent); font-weight: 600; }

/* Note */
.wb-note-input {
  width: 100%; padding: 12px; border-radius: 10px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.03);
  color: var(--text); font-family: inherit; font-size: 13px;
  resize: vertical; box-sizing: border-box;
  line-height: 1.6; min-height: 72px;
}
.wb-note-input:focus { outline: none; border-color: var(--accent); }

/* Save */
.wb-save-btn {
  width: 100%; padding: 12px; border-radius: 12px;
  background: var(--accent); border: none;
  color: #000; font-size: 14px; font-weight: 700;
  cursor: pointer; font-family: inherit;
  transition: opacity 0.2s; margin-top: 4px;
}
.wb-save-btn:hover    { opacity: 0.88; }
.wb-save-btn:disabled { opacity: 0.5; cursor: not-allowed; }
.wb-save-msg { text-align: center; font-size: 13px; margin-top: 8px; min-height: 18px; }

/* AI card */
.wb-ai-body { font-size: 14px; color: var(--text); line-height: 1.75; }
.wb-ai-body p:last-child { margin-bottom: 0; }

/* History */
.wb-chart-wrap { margin-bottom: 16px; }
.wb-history-list { display: flex; flex-direction: column; gap: 10px; }
.wb-hist-row {
  padding: 12px 14px; border-radius: 10px;
  background: rgba(255,255,255,0.03);
  border: 1px solid var(--border);
}
.wb-hist-date  { font-size: 12px; font-weight: 600; color: var(--muted); margin-bottom: 6px; }
.wb-hist-icons { display: flex; gap: 6px; flex-wrap: wrap; align-items: center; font-size: 16px; }
.wb-hist-pill  {
  font-size: 11px; padding: 3px 8px; border-radius: 20px;
  background: rgba(255,255,255,0.07); color: var(--muted);
}
.wb-hist-stress {
  width: 20px; height: 20px; border-radius: 50%;
  font-size: 10px; font-weight: 700; color: #000;
  display: inline-flex; align-items: center; justify-content: center;
}
.wb-hist-note { font-size: 12px; color: var(--muted); margin-top: 6px; font-style: italic; }

@media (max-width: 480px) {
  .wb-row-2col { grid-template-columns: 1fr; }
  .wb-emoji-btn { width: 36px; height: 36px; font-size: 18px; }
}

/* ═══════════════════════════════════════════════════════════════
   AUTH — fix text visibility on all backgrounds
═══════════════════════════════════════════════════════════════ */
.beam-box {
  background: rgba(8, 12, 28, 0.92) !important;
}
.auth-subtitle {
  color: #00f5a0 !important;
}
.beam-box input {
  color: #e2e8f0 !important;
  background: rgba(255,255,255,0.06) !important;
}
.beam-box input::placeholder {
  color: rgba(148,163,184,0.6) !important;
}
.auth-reset-desc {
  color: rgba(226,232,240,0.75) !important;
}
.auth-forgot-link, .auth-forgot-link:visited {
  color: rgba(0,245,160,0.7) !important;
}
.auth-forgot-link:hover { color: #00f5a0 !important; }
.dismiss { color: rgba(148,163,184,0.6) !important; }
#verifyEmail {
  color: #00f5a0 !important;
  font-weight: 600;
}

/* ═══════════════════════════════════════════════════════════════
   WELLBEING — stress buttons with color, sliders
═══════════════════════════════════════════════════════════════ */
.wb-stress-row {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}
.wb-stress-btn {
  flex: 1;
  min-width: 60px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
  padding: 10px 8px;
  border-radius: 12px;
  border: 2px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.04);
  cursor: pointer;
  font-family: inherit;
  transition: all 0.18s;
}
.wb-stress-btn:hover {
  border-color: var(--stress-color, var(--accent));
  background: color-mix(in srgb, var(--stress-color, var(--accent)) 15%, transparent);
}
.wb-stress-btn.active {
  border-color: var(--stress-color, var(--accent)) !important;
  background: color-mix(in srgb, var(--stress-color, var(--accent)) 20%, transparent) !important;
}
.wb-stress-num {
  font-size: 18px;
  font-weight: 700;
  color: var(--stress-color, var(--text));
  line-height: 1;
}
.wb-stress-lbl {
  font-size: 10px;
  font-weight: 500;
  color: var(--muted);
  text-align: center;
}
.wb-stress-btn.active .wb-stress-lbl {
  color: var(--stress-color, var(--accent));
}

/* Sliders */
.wb-slider-wrap {
  display: flex;
  align-items: center;
  gap: 12px;
}
.wb-slider {
  flex: 1;
  -webkit-appearance: none;
  height: 6px;
  border-radius: 3px;
  background: rgba(255,255,255,0.1);
  outline: none;
  cursor: pointer;
}
.wb-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--accent);
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(0,200,122,0.4);
  transition: transform 0.15s;
}
.wb-slider::-webkit-slider-thumb:hover { transform: scale(1.2); }
.wb-slider-val {
  font-size: 16px;
  font-weight: 700;
  color: var(--text);
  min-width: 56px;
  text-align: center;
}
.wb-slider-hints {
  display: flex;
  justify-content: space-between;
  font-size: 10px;
  color: var(--muted);
  padding: 2px 0;
  opacity: 0.6;
}

@media (max-width: 480px) {
  .wb-stress-btn { min-width: 50px; padding: 8px 4px; }
  .wb-stress-lbl { font-size: 9px; }
}

/* ═══════════════════════════════════════════════════════════════
   AUTH VERIFY PANEL — all text must be clearly visible
═══════════════════════════════════════════════════════════════ */
#authPanelVerify {
  text-align: center;
}
#authPanelVerify .auth-reset-desc {
  color: rgba(226,232,240,0.9) !important;
  font-size: 14px !important;
  opacity: 1 !important;
}
#authPanelVerify strong {
  color: #fff !important;
}
#verifyEmailAddr {
  color: #00f5a0 !important;
  font-size: 15px !important;
  font-weight: 700 !important;
  word-break: break-all;
}
#verifyMsg {
  font-size: 14px !important;
  font-weight: 600 !important;
  min-height: 20px;
}
#checkVerifyBtn {
  background: linear-gradient(90deg, #00f5a0, #00d9f5) !important;
  color: #0b0f19 !important;
  font-weight: 700 !important;
  font-size: 14px !important;
  border: none !important;
  padding: 13px !important;
  border-radius: 40px !important;
}
#resendVerifyBtn {
  color: rgba(148,163,184,0.8) !important;
  font-size: 13px !important;
}
#resendVerifyBtn:hover { color: #00f5a0 !important; }
.auth-verify-icon { font-size: 48px !important; }

/* Analytics chart cards — ensure canvas fills properly */
.dash-charts .chart-card canvas,
.analytics-container > .chart-card canvas {
  display: block !important;
  width: 100% !important;
  height: 200px !important;
}
.analytics-container > .chart-card[style*="min-height"] {
  display: flex;
  flex-direction: column;
}
.analytics-container > .chart-card[style*="min-height"] canvas {
  flex: 1;
}

/* ═══════════════════════════════════════════════════════════════
   NAV GROUP LABELS — sidebar sections
═══════════════════════════════════════════════════════════════ */
.nav-group-label {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--muted);
  opacity: 0.5;
  padding: 14px 16px 4px;
  pointer-events: none;
  user-select: none;
}
.sidebar nav button { margin: 1px 0; }

/* ═══════════════════════════════════════════════════════════════
   FRIENDS — full redesign
═══════════════════════════════════════════════════════════════ */
.fr-profile-name-row {
  display: flex; align-items: center; gap: 8px; flex-wrap: wrap;
}
.fr-edit-btn {
  background: rgba(255,255,255,0.07);
  border: 1px solid rgba(255,255,255,0.12);
  color: var(--muted);
  font-size: 11px;
  padding: 3px 8px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}
.fr-edit-btn:hover { background: var(--accent); color: #000; border-color: var(--accent); }

.fr-username-edit-wrap {
  margin-top: 10px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.fr-username-input {
  width: 100%;
  padding: 9px 12px;
  border-radius: 10px;
  border: 1.5px solid rgba(255,255,255,0.15);
  background: rgba(255,255,255,0.06);
  color: var(--text);
  font-size: 14px;
  font-family: monospace;
  outline: none;
  box-sizing: border-box;
}
.fr-username-input:focus { border-color: var(--accent); }
.fr-username-edit-actions { display: flex; gap: 8px; }
.fr-btn-save {
  flex: 1; padding: 8px; border-radius: 8px; border: none;
  background: var(--accent); color: #000; font-weight: 700;
  font-size: 13px; cursor: pointer;
}
.fr-btn-cancel {
  padding: 8px 14px; border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.12);
  background: transparent; color: var(--muted);
  font-size: 13px; cursor: pointer;
}
.fr-username-rules { font-size: 11px; color: var(--muted); opacity: 0.6; }
.fr-username-msg { font-size: 12px; min-height: 16px; }

/* Add friend card */
.fr-add-card {
  background: var(--surface);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 16px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.06);
}
body.dark .fr-add-card { background: #1c2740; }
.fr-add-title {
  font-size: 14px; font-weight: 700; color: var(--text);
  margin-bottom: 14px;
}
.fr-search-tabs {
  display: flex; gap: 6px; margin-bottom: 12px;
}
.fr-search-tab {
  flex: 1; padding: 8px; border-radius: 10px;
  border: 1.5px solid rgba(255,255,255,0.1);
  background: transparent; color: var(--muted);
  font-size: 13px; font-weight: 600; cursor: pointer;
  transition: all 0.15s;
}
.fr-search-tab.active {
  background: var(--accent);
  color: #000;
  border-color: var(--accent);
}
.fr-add-row {
  display: flex;
  gap: 8px;
  flex-wrap: nowrap;
  align-items: stretch;
}
.fr-search-input {
  flex: 1;
  min-width: 0;
  padding: 10px 14px;
  border-radius: 10px;
  border: 1.5px solid rgba(255,255,255,0.1);
  background: rgba(255,255,255,0.05);
  color: var(--text); font-size: 14px; outline: none;
  font-family: inherit;
}
.fr-search-input:focus { border-color: var(--accent); }
.fr-add-btn {
  flex-shrink: 0;
  padding: 10px 14px;
  border-radius: 10px;
  border: none;
  background: var(--accent);
  color: #000;
  font-weight: 700;
  font-size: 13px;
  cursor: pointer;
  white-space: nowrap;
  max-width: 120px;
}
@media (max-width: 380px) {
  .fr-add-row { flex-wrap: wrap; }
  .fr-add-btn { flex: 1; max-width: 100%; }
}
.fr-add-msg {
  margin-top: 8px; font-size: 13px; font-weight: 500;
}

/* Friends section */
.fr-section { margin-bottom: 16px; }
.fr-section-title {
  font-size: 12px; font-weight: 700; letter-spacing: 1px;
  text-transform: uppercase; color: var(--muted);
  margin-bottom: 10px; padding-bottom: 6px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}

/* Friend cards */
.fr-friend-card {
  display: flex; align-items: center; gap: 12px;
  background: var(--surface);
  border-radius: 14px; padding: 14px 16px;
  margin-bottom: 8px;
  border: 1px solid rgba(255,255,255,0.05);
  transition: border-color 0.15s;
}
body.dark .fr-friend-card { background: #1c2740; }
.fr-friend-card:hover { border-color: rgba(255,255,255,0.12); }
.fr-friend-av {
  width: 44px; height: 44px; border-radius: 50%;
  background: var(--accent);
  display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: 18px; color: #000;
  flex-shrink: 0;
}
.fr-friend-info { flex: 1; min-width: 0; }
.fr-friend-name { font-weight: 700; font-size: 14px; color: var(--text); }
.fr-friend-email { font-size: 12px; color: var(--muted); margin-top: 2px; }
.fr-friend-actions { display: flex; gap: 6px; flex-shrink: 0; }
.fr-view-btn {
  padding: 6px 14px; border-radius: 8px; border: none;
  background: var(--accent); color: #000;
  font-size: 12px; font-weight: 700; cursor: pointer;
}
.fr-remove-btn {
  padding: 6px 10px; border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.1);
  background: transparent; color: var(--muted);
  font-size: 12px; cursor: pointer;
}
.fr-remove-btn:hover { color: #ef4444; border-color: #ef4444; }

/* Requests */
.fr-request-item {
  display: flex; align-items: center; justify-content: space-between;
  gap: 12px; padding: 12px 16px;
  background: var(--surface); border-radius: 12px;
  margin-bottom: 8px;
  border: 1px solid rgba(249,115,22,0.2);
}
body.dark .fr-request-item { background: #1c2740; }
.fr-req-name { font-weight: 700; font-size: 14px; color: var(--text); }
.fr-req-email { font-size: 12px; color: var(--muted); }
.fr-req-actions { display: flex; gap: 6px; }
.fr-accept-btn {
  padding: 6px 14px; border-radius: 8px; border: none;
  background: var(--accent); color: #000;
  font-size: 12px; font-weight: 700; cursor: pointer;
}
.fr-decline-btn {
  padding: 6px 10px; border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.1);
  background: transparent; color: var(--muted);
  font-size: 12px; cursor: pointer;
}
.fr-empty, .fr-loading {
  text-align: center; padding: 32px 20px;
  color: var(--muted); font-size: 14px;
}
.fr-modal-loading { text-align: center; padding: 24px; color: var(--muted); }

/* ═══════════════════════════════════════════════════════════════
   ANALYTICS — AI analysis card
═══════════════════════════════════════════════════════════════ */
.analytics-ai-card {
  border: 1px solid rgba(255,255,255,0.08);
}
.analytics-ai-header {
  display: flex; align-items: flex-start;
  justify-content: space-between; gap: 16px;
  margin-bottom: 16px;
}
.analytics-ai-btn {
  padding: 10px 20px; border-radius: 12px; border: none;
  background: linear-gradient(135deg, var(--accent), var(--accent2, #00d9f5));
  color: #000; font-weight: 700; font-size: 13px;
  cursor: pointer; white-space: nowrap; flex-shrink: 0;
  transition: opacity 0.15s;
}
.analytics-ai-btn:hover { opacity: 0.85; }
.analytics-ai-btn:disabled { opacity: 0.5; cursor: not-allowed; }
.analytics-ai-nudge {
  display: flex; align-items: center; gap: 10px;
  background: rgba(249,115,22,0.08);
  border: 1px solid rgba(249,115,22,0.25);
  border-radius: 10px; padding: 10px 14px;
  font-size: 13px; color: var(--text);
  margin-bottom: 12px; flex-wrap: wrap;
}
.analytics-ai-body { line-height: 1.7; }
.analytics-ai-para {
  margin: 0 0 14px; font-size: 14px; color: var(--text);
}
.analytics-ai-para:last-child { margin-bottom: 0; }

/* ═══════════════════════════════════════════════════════════════
   WELLBEING TABS
═══════════════════════════════════════════════════════════════ */
.wb-tabs {
  display: flex; gap: 6px; margin-bottom: 16px;
  background: rgba(255,255,255,0.04);
  border-radius: 12px; padding: 4px;
}
.wb-tab {
  flex: 1; padding: 9px 12px; border-radius: 9px; border: none;
  background: transparent; color: var(--muted);
  font-size: 13px; font-weight: 600; cursor: pointer;
  transition: all 0.15s; font-family: inherit;
}
.wb-tab.active {
  background: var(--accent); color: #000;
}
.wb-section-label {
  font-size: 12px; font-weight: 700; letter-spacing: 0.5px;
  color: var(--muted); margin: 16px 0 8px; text-transform: uppercase;
}
.wb-two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }

/* Emoji buttons */
.wb-emoji-btn {
  display: flex; flex-direction: column; align-items: center;
  gap: 4px; padding: 8px 4px; border-radius: 10px;
  border: 2px solid transparent;
  background: rgba(255,255,255,0.04);
  cursor: pointer; flex: 1; min-width: 40px;
  transition: all 0.15s; font-family: inherit;
}
.wb-emoji-glyph { font-size: 22px; line-height: 1; }
.wb-emoji-label { font-size: 9px; color: var(--muted); text-align: center; }
.wb-emoji-btn:hover { border-color: var(--accent); background: rgba(0,200,122,0.08); }
.wb-emoji-btn.active { border-color: var(--accent); background: rgba(0,200,122,0.15); }
.wb-emoji-btn.active .wb-emoji-label { color: var(--accent); }

/* SWOT in wellbeing */
.wb-swot-grid {
  display: grid; grid-template-columns: 1fr 1fr; gap: 12px;
  margin: 16px 0;
}
.wb-swot-card {
  border-radius: 14px; padding: 16px;
  border: 1px solid rgba(255,255,255,0.08);
}
.wb-swot-s { background: rgba(34,197,94,0.08); border-color: rgba(34,197,94,0.2); }
.wb-swot-w { background: rgba(239,68,68,0.08); border-color: rgba(239,68,68,0.2); }
.wb-swot-o { background: rgba(59,130,246,0.08); border-color: rgba(59,130,246,0.2); }
.wb-swot-t { background: rgba(249,115,22,0.08); border-color: rgba(249,115,22,0.2); }
.wb-swot-label { font-size: 12px; font-weight: 700; margin-bottom: 10px; letter-spacing: 0.5px; }
.wb-swot-item {
  font-size: 13px; color: var(--text); line-height: 1.5;
  padding: 5px 0; border-bottom: 1px solid rgba(255,255,255,0.04);
}
.wb-swot-item:last-child { border-bottom: none; }
.wb-swot-intro p { font-size: 13px; color: var(--muted); line-height: 1.6; }
.wb-chart-legend { display: flex; gap: 14px; font-size: 11px; margin-top: 8px; }

@media (max-width: 600px) {
  .wb-two-col { grid-template-columns: 1fr; }
  .wb-swot-grid { grid-template-columns: 1fr; }
  .wb-emoji-label { display: none; }
  .fr-friend-actions { flex-direction: column; }
  .analytics-ai-header { flex-direction: column; }
}

/* ═══════════════════════════════════════════════════════════════
   WELLBEING TRENDS — per-metric chart cards
═══════════════════════════════════════════════════════════════ */
.wb-trend-summary {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 16px;
}
.wb-summary-pill {
  display: flex; align-items: center; gap: 6px;
  padding: 8px 14px; border-radius: 20px;
  border: 1px solid rgba(255,255,255,0.08);
  font-size: 13px;
  flex: 1; min-width: 100px; justify-content: center;
}

.wb-trend-charts {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.wb-trend-card {
  background: var(--surface);
  border-radius: 16px;
  padding: 16px;
  border: 1px solid rgba(255,255,255,0.05);
}
body.dark .wb-trend-card { background: #1c2740; }

.wb-trend-card-header {
  display: flex; align-items: center; gap: 8px;
  margin-bottom: 12px;
}
.wb-trend-icon { font-size: 16px; }
.wb-trend-label {
  font-size: 13px; font-weight: 700; color: var(--text);
  flex: 1;
}
.wb-trend-avg {
  font-size: 16px; font-weight: 800; color: var(--accent);
}

.wb-trend-chart-wrap {
  position: relative;
  height: 100px;
}
.wb-trend-chart-wrap canvas {
  display: block !important;
  width: 100% !important;
  height: 100px !important;
}

.wb-trend-scale {
  font-size: 10px; color: var(--muted); margin-top: 6px;
  opacity: 0.6;
}

@media (max-width: 500px) {
  .wb-trend-charts { grid-template-columns: 1fr; }
  .wb-summary-pill { min-width: 80px; }
}

/* ═══════════════════════════════════════════════════════════════
   ANALYTICS HEATMAP — proper display on all screens
═══════════════════════════════════════════════════════════════ */
.heatmap-grid {
  display: grid !important;
  grid-template-rows: repeat(7, 11px) !important;
  grid-auto-flow: column !important;
  gap: 3px !important;
  overflow-x: auto !important;
  overflow-y: hidden !important;
  padding-bottom: 4px !important;
  min-height: 95px;
  /* Ensure it actually renders by giving it width */
  width: 100% !important;
}
.heat-cell {
  width: 11px !important;
  height: 11px !important;
  border-radius: 2px !important;
  flex-shrink: 0 !important;
  cursor: default;
  transition: transform 0.1s;
}
.heat-cell:hover { transform: scale(1.4); z-index: 1; position: relative; }
.heat-today {
  outline: 2px solid rgba(255,255,255,0.6) !important;
  outline-offset: 1px;
}
.heatmap-legend {
  display: flex !important;
  align-items: center !important;
  gap: 5px !important;
  margin-top: 8px !important;
  justify-content: flex-end;
}

/* ── Repeat day buttons in task modal ── */
.repeat-days-row {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}
.repeat-day-btn {
  flex: 1;
  min-width: 38px;
  padding: 8px 4px;
  border-radius: 8px;
  border: 1.5px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.04);
  color: var(--muted);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  font-family: inherit;
  text-align: center;
  transition: all 0.15s;
}
.repeat-day-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
  background: rgba(var(--accent-rgb, 0,200,122), 0.08);
}
.repeat-day-btn.active {
  background: var(--accent) !important;
  color: #000 !important;
  border-color: var(--accent) !important;
  font-weight: 700;
}
body:not(.dark) .repeat-day-btn {
  border-color: rgba(0,0,0,0.15);
  background: rgba(0,0,0,0.03);
  color: #64748b;
}
body:not(.dark) .repeat-day-btn.active {
  background: var(--accent) !important;
  color: #fff !important;
  border-color: var(--accent) !important;
}

/* ═══════════════════════════════════════════════════════════════
   WELLBEING v2 (wb2-*)  — complete redesign
═══════════════════════════════════════════════════════════════ */

.wb2-page {
  max-width: 740px; margin: 0 auto; padding-bottom: 48px;
  display: flex; flex-direction: column; gap: 0;
}

/* Header */
.wb2-header {
  display: flex; align-items: flex-start; justify-content: space-between;
  margin-bottom: 20px; gap: 12px; flex-wrap: wrap;
}
.wb2-title { font-size: 26px; font-weight: 800; color: var(--text); margin: 0; }
.wb2-subtitle { font-size: 13px; color: var(--muted); margin-top: 4px; }
.wb2-ai-pill {
  padding: 8px 18px; border-radius: 20px; flex-shrink: 0;
  background: rgba(0,200,122,0.1); border: 1px solid rgba(0,200,122,0.3);
  color: var(--accent); font-size: 13px; font-weight: 600;
  cursor: pointer; font-family: inherit; white-space: nowrap;
  transition: all 0.18s;
}
.wb2-ai-pill:hover { background: rgba(0,200,122,0.2); }
.wb2-ai-pill:disabled { opacity: 0.5; cursor: not-allowed; }

/* Tabs */
.wb2-tabs {
  display: flex; gap: 4px; margin-bottom: 20px;
  background: rgba(255,255,255,0.04); padding: 4px; border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.06);
}
body:not(.dark) .wb2-tabs { background: rgba(0,0,0,0.03); border-color: rgba(0,0,0,0.07); }
.wb2-tab {
  flex: 1; padding: 9px 12px; border-radius: 10px; border: none;
  background: transparent; color: var(--muted);
  font-size: 13px; font-weight: 600; cursor: pointer;
  font-family: inherit; transition: all 0.18s; white-space: nowrap;
}
.wb2-tab.active {
  background: var(--surface); color: var(--text);
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}
body:not(.dark) .wb2-tab.active { box-shadow: 0 2px 8px rgba(0,0,0,0.08); }

/* Panels */
.wb2-panel { display: flex; flex-direction: column; gap: 12px; }

/* Section card */
.wb2-section {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.07);
  border-radius: 16px;
  padding: 18px 20px;
}
body:not(.dark) .wb2-section { border-color: rgba(0,0,0,0.07); }

.wb2-section-head {
  display: flex; align-items: flex-start; gap: 12px; margin-bottom: 14px;
}
.wb2-section-icon { font-size: 20px; flex-shrink: 0; margin-top: 1px; }
.wb2-section-title { font-size: 14px; font-weight: 700; color: var(--text); }
.wb2-section-hint { font-size: 12px; color: var(--muted); margin-top: 2px; }
.wb2-current-label {
  margin-left: auto; flex-shrink: 0;
  font-size: 13px; font-weight: 700; color: var(--accent);
  white-space: nowrap;
}

/* Emoji row */
.wb2-emoji-row { display: flex; gap: 8px; flex-wrap: wrap; }
.wb2-emoji-btn {
  display: flex; flex-direction: column; align-items: center; gap: 4px;
  padding: 8px 10px; border-radius: 12px;
  border: 2px solid transparent;
  background: rgba(255,255,255,0.04);
  cursor: pointer; transition: all 0.15s; flex: 1; min-width: 52px;
}
body:not(.dark) .wb2-emoji-btn { background: rgba(0,0,0,0.03); }
.wb2-emoji-btn:hover { background: rgba(255,255,255,0.09); transform: translateY(-2px); }
.wb2-emoji-btn.active {
  border-color: var(--accent);
  background: rgba(0,200,122,0.12);
  transform: translateY(-2px);
}
.wb2-emoji { font-size: 24px; line-height: 1; }
.wb2-emoji-lbl { font-size: 10px; color: var(--muted); font-weight: 500; text-align: center; }

/* Stress grid */
.wb2-stress-grid { display: flex; gap: 8px; }
.wb2-stress-btn {
  flex: 1; padding: 10px 6px; border-radius: 12px;
  border: 2px solid rgba(255,255,255,0.06);
  background: rgba(255,255,255,0.03);
  cursor: pointer; font-family: inherit;
  display: flex; flex-direction: column; align-items: center; gap: 3px;
  transition: all 0.18s;
}
body:not(.dark) .wb2-stress-btn { border-color: rgba(0,0,0,0.07); background: rgba(0,0,0,0.02); }
.wb2-stress-btn:hover {
  border-color: var(--sc, var(--accent));
  background: color-mix(in srgb, var(--sc, var(--accent)) 12%, transparent);
}
.wb2-stress-btn.active {
  border-color: var(--sc, var(--accent)) !important;
  background: color-mix(in srgb, var(--sc, var(--accent)) 18%, transparent) !important;
}
.wb2-stress-num { font-size: 20px; font-weight: 800; color: var(--sc, var(--text)); }
.wb2-stress-name { font-size: 11px; font-weight: 700; color: var(--sc, var(--text)); }
.wb2-stress-desc { font-size: 9px; color: var(--muted); text-align: center; }

/* 2-column layout */
.wb2-row-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

/* Sleep slider */
.wb2-slider-track { margin-bottom: 8px; }
.wb2-slider {
  width: 100%; height: 6px; border-radius: 3px;
  -webkit-appearance: none; appearance: none;
  background: rgba(255,255,255,0.1); outline: none; cursor: pointer;
}
body:not(.dark) .wb2-slider { background: rgba(0,0,0,0.1); }
.wb2-slider::-webkit-slider-thumb {
  -webkit-appearance: none; width: 18px; height: 18px; border-radius: 50%;
  background: var(--accent); cursor: pointer;
  box-shadow: 0 0 8px rgba(0,200,122,0.4);
}
.wb2-slider-marks {
  display: flex; justify-content: space-between;
  font-size: 10px; color: var(--muted); margin-top: 4px;
}
.wb2-sleep-bar {
  height: 8px; border-radius: 4px; background: rgba(255,255,255,0.07);
  position: relative; overflow: visible; margin-top: 8px;
}
body:not(.dark) .wb2-sleep-bar { background: rgba(0,0,0,0.07); }
.wb2-sleep-fill {
  height: 100%; border-radius: 4px;
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  transition: width 0.2s;
}
.wb2-sleep-zone {
  position: absolute; top: -2px; height: 12px;
  border-radius: 3px; background: rgba(0,200,122,0.15);
  border: 1px solid rgba(0,200,122,0.3);
  pointer-events: none;
}

/* Water grid */
.wb2-water-grid {
  display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 6px;
}
.wb2-water-cup {
  width: 40px; height: 44px; border-radius: 10px;
  border: 1.5px solid rgba(255,255,255,0.07);
  background: rgba(255,255,255,0.03);
  cursor: pointer; font-size: 20px;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.15s;
}
body:not(.dark) .wb2-water-cup { border-color: rgba(0,0,0,0.08); background: rgba(0,0,0,0.02); }
.wb2-water-cup.filled { background: rgba(0,217,245,0.12); border-color: rgba(0,217,245,0.35); }
.wb2-water-cup:hover { transform: scale(1.08); }
.wb2-cup-icon { line-height: 1; }
.wb2-water-hint { font-size: 11px; color: var(--muted); }

/* Exercise */
.wb2-exercise-row { display: flex; gap: 8px; flex-wrap: wrap; }
.wb2-ex-btn {
  padding: 8px 16px; border-radius: 20px;
  border: 1.5px solid rgba(255,255,255,0.08);
  background: transparent; color: var(--muted);
  font-size: 12px; font-weight: 600; cursor: pointer;
  font-family: inherit; transition: all 0.15s;
}
body:not(.dark) .wb2-ex-btn { border-color: rgba(0,0,0,0.1); }
.wb2-ex-btn:hover { border-color: var(--accent); color: var(--accent); }
.wb2-ex-btn.active { background: rgba(0,200,122,0.12); border-color: var(--accent); color: var(--accent); }

/* Note */
.wb2-note {
  width: 100%; padding: 12px 14px; border-radius: 12px;
  border: 1.5px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.03);
  color: var(--text); font-family: inherit; font-size: 13px;
  resize: vertical; box-sizing: border-box; line-height: 1.6;
  min-height: 80px; transition: border-color 0.18s;
}
body:not(.dark) .wb2-note { border-color: rgba(0,0,0,0.1); background: rgba(0,0,0,0.02); }
.wb2-note:focus { outline: none; border-color: var(--accent); }
.wb2-note::placeholder { color: var(--muted); }

/* Save */
.wb2-save-btn {
  width: 100%; padding: 13px; border-radius: 14px;
  background: var(--accent); border: none;
  color: #000; font-size: 14px; font-weight: 700;
  cursor: pointer; font-family: inherit; transition: opacity 0.18s;
}
.wb2-save-btn:hover { opacity: 0.88; }
.wb2-save-btn:disabled { opacity: 0.5; cursor: not-allowed; }
.wb2-save-msg { text-align: center; font-size: 13px; margin-top: 8px; min-height: 20px; }

/* AI card */
.wb2-ai-card {
  background: var(--surface);
  border: 1px solid rgba(0,200,122,0.25);
  border-radius: 16px; padding: 20px;
}
.wb2-ai-card-head {
  display: flex; align-items: center; justify-content: space-between;
  font-size: 13px; font-weight: 700; color: var(--accent);
  margin-bottom: 14px;
}
.wb2-ai-regen {
  background: transparent; border: none; color: var(--muted);
  font-size: 12px; cursor: pointer; font-family: inherit;
  transition: color 0.15s;
}
.wb2-ai-regen:hover { color: var(--accent); }
.wb2-ai-body { font-size: 14px; color: var(--text); line-height: 1.8; }
.wb2-ai-body p { margin: 0 0 12px; }
.wb2-ai-body p:last-child { margin-bottom: 0; }
.wb2-ai-loading { color: var(--muted); font-style: italic; font-size: 13px; }

/* ── Trends ── */
.wb2-summary-row {
  display: grid; grid-template-columns: repeat(4,1fr); gap: 10px;
  margin-bottom: 4px;
}
.wb2-sum-pill {
  background: var(--surface); border: 1px solid rgba(255,255,255,0.07);
  border-radius: 14px; padding: 14px 12px;
  display: flex; flex-direction: column; align-items: center; gap: 4px;
  text-align: center;
}
body:not(.dark) .wb2-sum-pill { border-color: rgba(0,0,0,0.07); }
.wb2-sum-skeleton { min-height: 80px; animation: pulse 1.5s infinite; }
@keyframes pulse { 0%,100% { opacity:1 } 50% { opacity:0.4 } }
.wb2-sum-icon { font-size: 20px; }
.wb2-sum-val { font-size: 22px; font-weight: 800; line-height: 1; }
.wb2-sum-label { font-size: 11px; color: var(--muted); font-weight: 600; }

.wb2-insight-bar {
  display: flex; align-items: flex-start; gap: 10px;
  padding: 12px 16px; border-radius: 12px;
  background: rgba(0,200,122,0.07); border: 1px solid rgba(0,200,122,0.2);
  margin-bottom: 4px;
}
.wb2-insight-icon { font-size: 18px; flex-shrink: 0; }
.wb2-insight-text { font-size: 13px; color: var(--text); line-height: 1.6; }

.wb2-charts-grid {
  display: grid; grid-template-columns: 1fr 1fr; gap: 12px;
}
.wb2-chart-card {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.07);
  border-radius: 16px; padding: 16px 18px;
}
body:not(.dark) .wb2-chart-card { border-color: rgba(0,0,0,0.07); }
.wb2-chart-head {
  display: flex; align-items: center; justify-content: space-between;
  font-size: 12px; font-weight: 700; color: var(--text); margin-bottom: 10px;
}
.wb2-chart-avg {
  font-size: 14px; font-weight: 800; color: var(--accent);
}
.wb2-chart-wrap { height: 100px; position: relative; }
.wb2-chart-wrap canvas { width: 100% !important; height: 100% !important; }
.wb2-chart-scale { font-size: 10px; color: var(--muted); margin-top: 6px; }

/* Log */
.wb2-log-card {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.07);
  border-radius: 16px; padding: 18px 20px;
}
body:not(.dark) .wb2-log-card { border-color: rgba(0,0,0,0.07); }
.wb2-log-title { font-size: 13px; font-weight: 700; color: var(--text); margin-bottom: 14px; }
.wb2-log-count { font-size: 11px; font-weight: 500; color: var(--muted); margin-left: 6px; }
.wb2-log-list { display: flex; flex-direction: column; gap: 8px; }
.wb2-log-row {
  padding: 12px 14px; border-radius: 12px;
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.06);
}
body:not(.dark) .wb2-log-row { background: rgba(0,0,0,0.02); border-color: rgba(0,0,0,0.06); }
.wb2-log-date { font-size: 11px; font-weight: 700; color: var(--muted); margin-bottom: 8px; }
.wb2-log-metrics { display: flex; gap: 6px; flex-wrap: wrap; align-items: center; }
.wb2-log-metric { display: flex; align-items: center; gap: 4px; font-size: 15px; }
.wb2-log-num { font-size: 11px; font-weight: 700; color: var(--text); }
.wb2-log-badge {
  font-size: 11px; font-weight: 600; padding: 2px 8px; border-radius: 8px;
}
.wb2-log-pill {
  font-size: 11px; padding: 3px 8px; border-radius: 8px;
  background: rgba(255,255,255,0.06); color: var(--muted);
}
body:not(.dark) .wb2-log-pill { background: rgba(0,0,0,0.05); }
.wb2-log-note { font-size: 12px; color: var(--muted); margin-top: 6px; font-style: italic; }

/* ── SWOT ── */
.wb2-swot-intro {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.07);
  border-radius: 16px; padding: 32px 24px;
  text-align: center;
}
body:not(.dark) .wb2-swot-intro { border-color: rgba(0,0,0,0.07); }
.wb2-swot-intro-icon { font-size: 36px; margin-bottom: 12px; }
.wb2-swot-intro h3 { font-size: 18px; font-weight: 700; color: var(--text); margin: 0 0 10px; }
.wb2-swot-intro p { font-size: 13px; color: var(--muted); line-height: 1.6; max-width: 440px; margin: 0 auto 20px; }

.wb2-swot-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.wb2-swot-card {
  border-radius: 14px; padding: 18px;
  border: 1.5px solid;
}
.wb2-swot-card.s { background: rgba(34,197,94,0.07); border-color: rgba(34,197,94,0.25); }
.wb2-swot-card.w { background: rgba(239,68,68,0.07); border-color: rgba(239,68,68,0.25); }
.wb2-swot-card.o { background: rgba(59,130,246,0.07); border-color: rgba(59,130,246,0.25); }
.wb2-swot-card.t { background: rgba(245,158,11,0.07); border-color: rgba(245,158,11,0.25); }
.wb2-swot-label { font-size: 12px; font-weight: 700; margin-bottom: 10px; color: var(--text); letter-spacing: 0.5px; }
.wb2-swot-body { display: flex; flex-direction: column; gap: 6px; }
.wb2-swot-item { font-size: 13px; color: var(--text); line-height: 1.5; }
.wb2-swot-summary {
  margin-top: 16px; padding: 14px 18px; border-radius: 12px;
  background: rgba(255,255,255,0.04);
  font-size: 13px; color: var(--muted); line-height: 1.6;
}
body:not(.dark) .wb2-swot-summary { background: rgba(0,0,0,0.04); }

/* Responsive */
@media (max-width: 640px) {
  .wb2-row-2 { grid-template-columns: 1fr; }
  .wb2-charts-grid { grid-template-columns: 1fr; }
  .wb2-swot-grid { grid-template-columns: 1fr; }
  .wb2-summary-row { grid-template-columns: repeat(2,1fr); }
  .wb2-emoji-btn { min-width: 40px; padding: 6px 6px; }
  .wb2-emoji { font-size: 20px; }
  .wb2-stress-grid { flex-wrap: wrap; }
  .wb2-stress-btn { min-width: 70px; }
  .wb2-tab { font-size: 11px; padding: 8px 6px; }
}
@media (max-width: 400px) {
  .wb2-summary-row { grid-template-columns: 1fr 1fr; }
}

/* ═══════════════════════════════════════════════════════════════
   WELLBEING v3 (wb3-*)  — redesigned check-in + trends
═══════════════════════════════════════════════════════════════ */

/* ── Page shell ─────────────────────────────────────────────── */
.wb3-page {
  max-width: 760px;
  margin: 0 auto;
  padding-bottom: 56px;
  display: flex;
  flex-direction: column;
  gap: 0;
}

/* ── Header ─────────────────────────────────────────────────── */
.wb3-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 22px;
  gap: 12px;
  flex-wrap: wrap;
}
.wb3-title {
  font-size: 26px;
  font-weight: 800;
  color: var(--text);
  margin: 0;
  letter-spacing: -0.5px;
}
.wb3-subtitle {
  font-size: 13px;
  color: var(--muted);
  margin-top: 3px;
}
.wb3-header-actions { display: flex; align-items: center; gap: 10px; }

/* Streak badge */
.wb3-streak-badge {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 6px 13px;
  border-radius: 20px;
  background: rgba(249,115,22,0.1);
  border: 1px solid rgba(249,115,22,0.3);
  font-size: 14px;
  font-weight: 700;
  color: #f97316;
}
.wb3-streak-lbl { font-size: 11px; font-weight: 600; }

/* ── Tabs ───────────────────────────────────────────────────── */
.wb3-tabs {
  display: flex;
  gap: 4px;
  margin-bottom: 20px;
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.06);
  padding: 4px;
  border-radius: 14px;
}
body:not(.dark) .wb3-tabs {
  background: rgba(0,0,0,0.03);
  border-color: rgba(0,0,0,0.07);
}
.wb3-tab {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 9px 12px;
  border-radius: 10px;
  border: none;
  background: transparent;
  color: var(--muted);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  font-family: inherit;
  transition: all 0.18s;
  white-space: nowrap;
}
.wb3-tab-icon { font-size: 14px; }
.wb3-tab.active {
  background: var(--surface);
  color: var(--text);
  box-shadow: 0 2px 10px rgba(0,0,0,0.12);
}
body:not(.dark) .wb3-tab.active { box-shadow: 0 2px 8px rgba(0,0,0,0.08); }

/* ── Panel ──────────────────────────────────────────────────── */
.wb3-panel {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* ── Saved banner ───────────────────────────────────────────── */
.wb3-saved-banner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  border-radius: 12px;
  background: rgba(0,200,122,0.08);
  border: 1px solid rgba(0,200,122,0.25);
  font-size: 13px;
  font-weight: 600;
  color: var(--accent);
}
.wb3-saved-edit {
  background: transparent;
  border: 1px solid rgba(0,200,122,0.35);
  color: var(--accent);
  border-radius: 8px;
  padding: 4px 12px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  font-family: inherit;
  transition: background 0.15s;
}
.wb3-saved-edit:hover { background: rgba(0,200,122,0.12); }

/* ── Cards ──────────────────────────────────────────────────── */
.wb3-card {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.07);
  border-radius: 16px;
  padding: 18px 20px;
}
body:not(.dark) .wb3-card { border-color: rgba(0,0,0,0.07); }

.wb3-card-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 14px;
}
.wb3-card-label {
  display: flex;
  align-items: flex-start;
  gap: 11px;
  flex: 1;
}
.wb3-card-icon { font-size: 20px; flex-shrink: 0; line-height: 1.2; }
.wb3-card-title { font-size: 14px; font-weight: 700; color: var(--text); }
.wb3-card-hint { font-size: 12px; color: var(--muted); margin-top: 2px; }
.wb3-optional {
  font-size: 10px;
  font-weight: 500;
  color: var(--muted);
  margin-left: 5px;
  vertical-align: middle;
}

/* Selected tag (shows chosen value in card header) */
.wb3-selected-tag {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  border-radius: 20px;
  background: rgba(0,200,122,0.1);
  border: 1px solid rgba(0,200,122,0.25);
  color: var(--accent);
  font-size: 12px;
  font-weight: 600;
  white-space: nowrap;
  flex-shrink: 0;
}

/* ── Mood / Energy emoji buttons ────────────────────────────── */
.wb3-emoji-row {
  display: flex;
  gap: 6px;
  flex-wrap: nowrap;
}
.wb3-emoji-btn {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 5px;
  padding: 10px 4px 8px;
  border-radius: 12px;
  border: 2px solid transparent;
  background: rgba(255,255,255,0.04);
  cursor: pointer;
  transition: all 0.15s;
}
body:not(.dark) .wb3-emoji-btn { background: rgba(0,0,0,0.03); }
.wb3-emoji-btn:hover {
  background: rgba(255,255,255,0.09);
  transform: translateY(-3px);
}
.wb3-emoji-btn.active {
  border-color: var(--accent);
  background: rgba(0,200,122,0.12);
  transform: translateY(-3px);
  box-shadow: 0 4px 12px rgba(0,200,122,0.2);
}
.wb3-emoji { font-size: 24px; line-height: 1; }
.wb3-emoji-lbl { font-size: 10px; color: var(--muted); font-weight: 500; text-align: center; line-height: 1.2; }

/* ── Stress bar buttons ─────────────────────────────────────── */
.wb3-stress-row {
  display: flex;
  gap: 8px;
  align-items: flex-end;
  height: 96px;
}
.wb3-stress-btn {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
  gap: 0;
  padding: 0 4px 8px;
  border-radius: 10px;
  border: 2px solid rgba(255,255,255,0.06);
  background: rgba(255,255,255,0.03);
  cursor: pointer;
  font-family: inherit;
  transition: all 0.18s;
  height: 100%;
  position: relative;
  overflow: hidden;
}
body:not(.dark) .wb3-stress-btn {
  border-color: rgba(0,0,0,0.07);
  background: rgba(0,0,0,0.02);
}
.wb3-stress-btn:hover {
  border-color: var(--sc);
  background: color-mix(in srgb, var(--sc) 10%, transparent);
  transform: translateY(-2px);
}
.wb3-stress-btn.active {
  border-color: var(--sc) !important;
  background: color-mix(in srgb, var(--sc) 18%, transparent) !important;
  transform: translateY(-2px);
  box-shadow: 0 4px 14px color-mix(in srgb, var(--sc) 30%, transparent);
}
/* animated fill bar behind the button */
.wb3-stress-bar-wrap {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 100%;
  display: flex;
  align-items: flex-end;
  z-index: 0;
}
.wb3-stress-bar {
  width: 100%;
  background: color-mix(in srgb, var(--sc) 15%, transparent);
  border-radius: 0 0 8px 8px;
  transition: height 0.3s ease;
}
.wb3-stress-emoji {
  font-size: 20px;
  line-height: 1;
  z-index: 1;
  margin-bottom: 4px;
}
.wb3-stress-lbl {
  font-size: 10px;
  font-weight: 700;
  color: var(--sc);
  z-index: 1;
  text-align: center;
}

/* ── 2-column grid ──────────────────────────────────────────── */
.wb3-row-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

/* ── Sleep ──────────────────────────────────────────────────── */
.wb3-sleep-reading {
  font-size: 22px;
  font-weight: 800;
  color: var(--accent);
  line-height: 1;
  flex-shrink: 0;
}
.wb3-sleep-unit { font-size: 13px; font-weight: 600; color: var(--muted); margin-left: 1px; }

.wb3-slider {
  width: 100%;
  height: 6px;
  border-radius: 3px;
  -webkit-appearance: none;
  appearance: none;
  background: rgba(255,255,255,0.1);
  outline: none;
  cursor: pointer;
  margin-bottom: 4px;
}
body:not(.dark) .wb3-slider { background: rgba(0,0,0,0.1); }
.wb3-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--accent);
  cursor: pointer;
  box-shadow: 0 0 8px rgba(0,200,122,0.5);
}
.wb3-sleep-scale {
  display: flex;
  justify-content: space-between;
  font-size: 10px;
  color: var(--muted);
  margin-bottom: 8px;
}
.wb3-sleep-feedback {
  font-size: 12px;
  font-weight: 600;
  padding: 5px 10px;
  border-radius: 8px;
  display: inline-block;
}
.wb3-sleep-feedback.ok   { color: #22c55e; background: rgba(34,197,94,0.1); }
.wb3-sleep-feedback.warn { color: #f59e0b; background: rgba(245,158,11,0.1); }
.wb3-sleep-feedback.bad  { color: #ef4444; background: rgba(239,68,68,0.1); }

/* ── Water ──────────────────────────────────────────────────── */
.wb3-water-count {
  font-size: 20px;
  font-weight: 800;
  color: #00d9f5;
  flex-shrink: 0;
}
.wb3-water-track {
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
  margin-bottom: 8px;
}
.wb3-water-drop {
  width: 34px;
  height: 38px;
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  border: 1.5px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.03);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  transition: all 0.15s;
  color: var(--muted);
}
body:not(.dark) .wb3-water-drop {
  border-color: rgba(0,0,0,0.08);
  background: rgba(0,0,0,0.02);
}
.wb3-water-drop.filled {
  background: rgba(0,217,245,0.15);
  border-color: rgba(0,217,245,0.4);
  color: #00d9f5;
}
.wb3-water-drop.goal-marker { border-color: rgba(0,217,245,0.5); }
.wb3-water-drop:hover { transform: scale(1.12); }
.wb3-water-feedback {
  font-size: 12px;
  font-weight: 600;
  padding: 5px 10px;
  border-radius: 8px;
  display: inline-block;
}
.wb3-water-feedback.ok   { color: #22c55e; background: rgba(34,197,94,0.1); }
.wb3-water-feedback.warn { color: #00d9f5; background: rgba(0,217,245,0.1); }
.wb3-water-feedback.bad  { color: #f59e0b; background: rgba(245,158,11,0.1); }

/* ── Movement ───────────────────────────────────────────────── */
.wb3-ex-row {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}
.wb3-ex-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 10px 14px;
  border-radius: 12px;
  border: 1.5px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.03);
  color: var(--muted);
  font-size: 11px;
  font-weight: 600;
  cursor: pointer;
  font-family: inherit;
  transition: all 0.15s;
  min-width: 64px;
}
body:not(.dark) .wb3-ex-btn {
  border-color: rgba(0,0,0,0.08);
  background: rgba(0,0,0,0.02);
}
.wb3-ex-btn:hover { border-color: var(--accent); color: var(--accent); }
.wb3-ex-btn.active {
  background: rgba(0,200,122,0.1);
  border-color: var(--accent);
  color: var(--accent);
  box-shadow: 0 2px 10px rgba(0,200,122,0.15);
}
.wb3-ex-icon { font-size: 20px; }
.wb3-ex-lbl  { font-size: 11px; font-weight: 600; }

/* ── Note ───────────────────────────────────────────────────── */
.wb3-note {
  width: 100%;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1.5px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.03);
  color: var(--text);
  font-family: inherit;
  font-size: 13px;
  resize: vertical;
  box-sizing: border-box;
  line-height: 1.6;
  min-height: 80px;
  transition: border-color 0.18s;
}
body:not(.dark) .wb3-note {
  border-color: rgba(0,0,0,0.1);
  background: rgba(0,0,0,0.02);
}
.wb3-note:focus { outline: none; border-color: var(--accent); }
.wb3-note::placeholder { color: var(--muted); }

/* ── Save button ────────────────────────────────────────────── */
.wb3-save-btn {
  width: 100%;
  padding: 14px;
  border-radius: 14px;
  background: var(--accent);
  border: none;
  color: #000;
  font-size: 14px;
  font-weight: 700;
  cursor: pointer;
  font-family: inherit;
  transition: opacity 0.18s, transform 0.12s;
}
.wb3-save-btn:hover { opacity: 0.88; transform: translateY(-1px); }
.wb3-save-btn:disabled { opacity: 0.45; cursor: not-allowed; transform: none; }

.wb3-save-msg { text-align: center; font-size: 13px; margin-top: 8px; min-height: 20px; font-weight: 600; }
.wb3-save-ok   { color: var(--accent); }
.wb3-save-warn { color: #f59e0b; }
.wb3-save-err  { color: #ef4444; }

/* ── AI Insight ─────────────────────────────────────────────── */
.wb3-ai-trigger {
  width: 100%;
  padding: 12px;
  border-radius: 14px;
  background: rgba(0,200,122,0.08);
  border: 1px solid rgba(0,200,122,0.28);
  color: var(--accent);
  font-size: 14px;
  font-weight: 700;
  cursor: pointer;
  font-family: inherit;
  transition: background 0.18s;
}
.wb3-ai-trigger:hover { background: rgba(0,200,122,0.14); }
.wb3-ai-trigger:disabled { opacity: 0.5; cursor: not-allowed; }

.wb3-ai-card {
  background: var(--surface);
  border: 1px solid rgba(0,200,122,0.22);
  border-radius: 16px;
  padding: 20px;
}
.wb3-ai-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 14px;
}
.wb3-ai-label {
  font-size: 13px;
  font-weight: 700;
  color: var(--accent);
}
.wb3-ai-regen {
  background: transparent;
  border: none;
  color: var(--muted);
  font-size: 12px;
  cursor: pointer;
  font-family: inherit;
  transition: color 0.15s;
}
.wb3-ai-regen:hover { color: var(--accent); }
.wb3-ai-body { font-size: 14px; color: var(--text); line-height: 1.8; }
.wb3-ai-body p { margin: 0 0 12px; }
.wb3-ai-body p:last-child { margin: 0; }
.wb3-ai-loading { color: var(--muted); font-style: italic; font-size: 13px; }
.wb3-ai-error   { color: #ef4444; font-size: 13px; }

/* ── Trends: period selector ────────────────────────────────── */
.wb3-period-row {
  display: flex;
  align-items: center;
  gap: 10px;
}
.wb3-period-lbl { font-size: 13px; color: var(--muted); font-weight: 600; }
.wb3-period-btns { display: flex; gap: 4px; }
.wb3-period-btn {
  padding: 6px 14px;
  border-radius: 20px;
  border: 1.5px solid rgba(255,255,255,0.08);
  background: transparent;
  color: var(--muted);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  font-family: inherit;
  transition: all 0.15s;
}
body:not(.dark) .wb3-period-btn { border-color: rgba(0,0,0,0.1); }
.wb3-period-btn:hover { border-color: var(--accent); color: var(--accent); }
.wb3-period-btn.active {
  background: rgba(0,200,122,0.1);
  border-color: var(--accent);
  color: var(--accent);
}

/* ── Trends: score cards ────────────────────────────────────── */
.wb3-score-row {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
}
.wb3-score-card {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.07);
  border-radius: 14px;
  padding: 16px 12px 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  text-align: center;
  position: relative;
  overflow: hidden;
  transition: transform 0.18s;
}
body:not(.dark) .wb3-score-card { border-color: rgba(0,0,0,0.07); }
.wb3-score-card:not(.na):not(.loading) { border-color: color-mix(in srgb, var(--sc) 30%, transparent); }
.wb3-score-card.loading {
  min-height: 110px;
  animation: wb3pulse 1.5s ease-in-out infinite;
}
@keyframes wb3pulse { 0%,100%{ opacity:1 } 50%{ opacity:0.35 } }
.wb3-score-shimmer {
  width: 100%; height: 100%;
  background: linear-gradient(135deg, rgba(255,255,255,0.04), rgba(255,255,255,0.01));
}
.wb3-score-icon { font-size: 22px; }
.wb3-score-num  { font-size: 22px; font-weight: 800; color: var(--sc, var(--text)); line-height: 1; }
.wb3-score-label { font-size: 11px; font-weight: 700; color: var(--muted); }
.wb3-score-bar {
  width: 100%;
  height: 4px;
  border-radius: 2px;
  background: rgba(255,255,255,0.08);
  overflow: hidden;
  margin: 2px 0;
}
body:not(.dark) .wb3-score-bar { background: rgba(0,0,0,0.08); }
.wb3-score-fill {
  height: 100%;
  border-radius: 2px;
  background: var(--sc, var(--accent));
  transition: width 0.6s ease;
}
.wb3-score-desc { font-size: 11px; color: var(--muted); font-weight: 500; }
.wb3-score-card.na .wb3-score-num { color: var(--muted); font-size: 20px; }

/* ── Trends: insight callout ────────────────────────────────── */
.wb3-insight-callout {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 14px 18px;
  border-radius: 14px;
  background: rgba(0,200,122,0.06);
  border: 1px solid rgba(0,200,122,0.2);
}
.wb3-insight-icon { font-size: 22px; flex-shrink: 0; margin-top: 1px; }
.wb3-insight-content { flex: 1; }
.wb3-insight-headline {
  font-size: 14px;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 4px;
}
.wb3-insight-body { font-size: 13px; color: var(--muted); line-height: 1.6; }

/* ── Trends: charts ─────────────────────────────────────────── */
.wb3-charts-wrap { display: flex; flex-direction: column; gap: 12px; }
.wb3-charts-duo  { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

.wb3-chart-card {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.07);
  border-radius: 16px;
  padding: 16px 18px 12px;
}
body:not(.dark) .wb3-chart-card { border-color: rgba(0,0,0,0.07); }
.wb3-chart-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}
.wb3-chart-name { font-size: 13px; font-weight: 700; color: var(--text); }
.wb3-chart-meta { display: flex; gap: 8px; align-items: center; }
.wb3-chart-avg {
  font-size: 13px;
  font-weight: 800;
  padding: 2px 8px;
  border-radius: 8px;
}
.wb3-chart-avg.mood   { color: #00c87a; background: rgba(0,200,122,0.1); }
.wb3-chart-avg.energy { color: #818cf8; background: rgba(129,140,248,0.1); }
.wb3-chart-avg.good   { color: #22c55e; background: rgba(34,197,94,0.1); }
.wb3-chart-avg.ok     { color: #f59e0b; background: rgba(245,158,11,0.1); }
.wb3-chart-avg.bad    { color: #ef4444; background: rgba(239,68,68,0.1); }
.wb3-chart-wide .wb3-chart-area { height: 130px; }
.wb3-charts-duo .wb3-chart-area { height: 100px; }
.wb3-chart-area { position: relative; }
.wb3-chart-area canvas { width: 100% !important; height: 100% !important; }
.wb3-chart-foot { font-size: 10px; color: var(--muted); margin-top: 6px; text-align: right; }

/* ── Trends: log ────────────────────────────────────────────── */
.wb3-log-card {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.07);
  border-radius: 16px;
  padding: 18px 20px;
}
body:not(.dark) .wb3-log-card { border-color: rgba(0,0,0,0.07); }
.wb3-log-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 14px;
}
.wb3-log-title { font-size: 13px; font-weight: 700; color: var(--text); }
.wb3-log-count { font-size: 11px; color: var(--muted); font-weight: 500; }
.wb3-log-list  { display: flex; flex-direction: column; gap: 8px; }

.wb3-log-row {
  padding: 11px 14px;
  border-radius: 12px;
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.05);
}
body:not(.dark) .wb3-log-row {
  background: rgba(0,0,0,0.02);
  border-color: rgba(0,0,0,0.05);
}
.wb3-log-date {
  font-size: 11px;
  font-weight: 700;
  color: var(--muted);
  margin-bottom: 7px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}
.wb3-log-chips { display: flex; gap: 5px; flex-wrap: wrap; align-items: center; }

.wb3-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  font-weight: 600;
  padding: 3px 9px;
  border-radius: 20px;
  background: rgba(255,255,255,0.06);
  color: var(--text);
}
body:not(.dark) .wb3-chip { background: rgba(0,0,0,0.05); }
.wb3-chip.dim { color: var(--muted); background: rgba(255,255,255,0.04); }
body:not(.dark) .wb3-chip.dim { background: rgba(0,0,0,0.04); }
.wb3-chip.stress-chip {
  background: color-mix(in srgb, var(--sc) 14%, transparent);
  color: var(--sc);
  border: 1px solid color-mix(in srgb, var(--sc) 30%, transparent);
}
.wb3-log-note {
  font-size: 12px;
  color: var(--muted);
  margin-top: 8px;
  font-style: italic;
  line-height: 1.5;
  padding-top: 7px;
  border-top: 1px solid rgba(255,255,255,0.05);
}
body:not(.dark) .wb3-log-note { border-top-color: rgba(0,0,0,0.06); }

/* ── AI Analysis tab ────────────────────────────────────────── */
.wb3-analysis-intro {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.07);
  border-radius: 16px;
  padding: 36px 28px;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}
body:not(.dark) .wb3-analysis-intro { border-color: rgba(0,0,0,0.07); }
.wb3-analysis-icon    { font-size: 40px; margin-bottom: 4px; }
.wb3-analysis-heading { font-size: 18px; font-weight: 800; color: var(--text); }
.wb3-analysis-desc    {
  font-size: 14px; color: var(--muted); line-height: 1.65;
  max-width: 420px; margin: 0 auto;
}
.wb3-generate-btn {
  margin-top: 6px;
  padding: 12px 28px;
  border-radius: 14px;
  background: var(--accent);
  border: none;
  color: #000;
  font-size: 14px;
  font-weight: 700;
  cursor: pointer;
  font-family: inherit;
  transition: opacity 0.18s, transform 0.12s;
}
.wb3-generate-btn:hover { opacity: 0.88; transform: translateY(-1px); }
.wb3-generate-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

/* SWOT grid */
.wb3-swot-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-bottom: 12px;
}
.wb3-swot-q {
  border-radius: 14px;
  padding: 18px;
  border: 1.5px solid;
}
.wb3-swot-s { background: rgba(34,197,94,0.07);  border-color: rgba(34,197,94,0.25); }
.wb3-swot-w { background: rgba(239,68,68,0.07);   border-color: rgba(239,68,68,0.25); }
.wb3-swot-o { background: rgba(59,130,246,0.07);  border-color: rgba(59,130,246,0.25); }
.wb3-swot-t { background: rgba(245,158,11,0.07);  border-color: rgba(245,158,11,0.25); }
.wb3-swot-q-head {
  font-size: 12px;
  font-weight: 800;
  color: var(--text);
  margin-bottom: 10px;
  letter-spacing: 0.2px;
}
.wb3-swot-q-body { display: flex; flex-direction: column; gap: 7px; }
.wb3-swot-item {
  font-size: 13px;
  color: var(--text);
  line-height: 1.55;
  padding-left: 12px;
  position: relative;
}
.wb3-swot-item::before {
  content: "·";
  position: absolute;
  left: 2px;
  color: var(--muted);
}

/* Action plan */
.wb3-action-plan {
  background: var(--surface);
  border: 1px solid rgba(0,200,122,0.2);
  border-radius: 14px;
  padding: 16px 20px;
  margin-bottom: 14px;
}
.wb3-action-plan-head {
  font-size: 12px;
  font-weight: 800;
  color: var(--accent);
  margin-bottom: 8px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}
.wb3-action-plan p { font-size: 14px; color: var(--text); line-height: 1.7; margin: 0; }

.wb3-regen-btn {
  width: 100%;
  padding: 11px;
  border-radius: 12px;
  background: transparent;
  border: 1.5px solid rgba(255,255,255,0.1);
  color: var(--muted);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  font-family: inherit;
  transition: all 0.15s;
}
body:not(.dark) .wb3-regen-btn { border-color: rgba(0,0,0,0.1); }
.wb3-regen-btn:hover { border-color: var(--accent); color: var(--accent); }
.wb3-regen-btn:disabled { opacity: 0.5; cursor: not-allowed; }

/* ── Empty state ────────────────────────────────────────────── */
.wb3-empty {
  text-align: center;
  font-size: 13px;
  color: var(--muted);
  padding: 28px 0;
}

/* ── Responsive ─────────────────────────────────────────────── */
@media (max-width: 640px) {
  .wb3-row-2           { grid-template-columns: 1fr; }
  .wb3-charts-duo      { grid-template-columns: 1fr; }
  .wb3-swot-grid       { grid-template-columns: 1fr; }
  .wb3-score-row       { grid-template-columns: repeat(2, 1fr); }
  .wb3-emoji-row       { flex-wrap: wrap; }
  .wb3-emoji-btn       { min-width: 44px; flex: none; width: calc(25% - 5px); }
  .wb3-tab-lbl         { font-size: 11px; }
  .wb3-stress-row      { height: 80px; }
  .wb3-chart-wide .wb3-chart-area  { height: 110px; }
  .wb3-charts-duo .wb3-chart-area  { height: 90px; }
  .wb3-analysis-intro  { padding: 24px 18px; }
}
@media (max-width: 400px) {
  .wb3-score-row { grid-template-columns: 1fr 1fr; }
  .wb3-emoji-btn { width: calc(33% - 4px); }
}

/* wb3 supplemental — patch 4 missing classes */
.wb3-header-text { flex: 1; }

.wb3-drop-icon {
  font-size: 15px;
  line-height: 1;
  pointer-events: none;
}

/* Animated thinking dots for AI loading state */
.wb3-ai-dots {
  display: inline-block;
  width: 18px;
}
.wb3-ai-dots::after {
  content: "...";
  animation: wb3dots 1.2s steps(4, end) infinite;
}
@keyframes wb3dots {
  0%   { content: ".";   }
  33%  { content: "..";  }
  66%  { content: "..."; }
  100% { content: "";    }
}

/* wb3-save-{ok,warn,err} are applied as compound classes,
   base .wb3-save-msg provides layout; colors already defined above */
.wb3-save-msg { display: block; }