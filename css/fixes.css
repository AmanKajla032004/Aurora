/* ═══════════════════════════════════════
   LAYOUT — fix chart overflow
═══════════════════════════════════════ */
#appContent {
  padding: 24px 28px;
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  box-sizing: border-box;
  transition: opacity 0.18s ease, transform 0.18s ease;
}
.dashboard-container,
.analytics-container,
.home-container { display:flex; flex-direction:column; gap:22px; }

.charts-section {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 18px;
  min-height: 0;
}
.chart-card {
  overflow: hidden;
  min-width: 0;
  min-height: 0;
  display: flex;
  flex-direction: column;
  padding: 20px 22px;
}
.chart-card canvas {
  flex: 1;
  min-height: 0;
  max-height: 220px;
}
.chart-card h3, .chart-card .card-title {
  font-size: 13px; font-weight: 600; color: var(--text);
  letter-spacing: 0.4px; margin-bottom: 12px; flex-shrink: 0;
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
.stat-card { padding: 18px 20px; }
.stats-section, .bottom-stats {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(130px,1fr));
  gap: 14px;
}
.dash-two-col {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 18px;
}
.dash-two-col .chart-card canvas { max-height: none; }

/* ═══════════════════════════════════════
   GLASS CARDS
═══════════════════════════════════════ */
body.dark .stat-card,
body.dark .chart-card,
body.dark .home-card,
body.dark .home-hero,
body.dark .analytics-top,
body.dark .bs-card,
body.dark .cal-day {
  background: rgba(28,39,64,0.78);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.05);
}
body:not(.dark) .stat-card,
body:not(.dark) .chart-card,
body:not(.dark) .home-card,
body:not(.dark) .home-hero {
  background: rgba(255,255,255,0.78);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(0,0,0,0.06);
}

/* ═══════════════════════════════════════
   AUTH — Forgot password
═══════════════════════════════════════ */
.auth-error-msg { color:#ff4d4d; font-size:13px; text-align:center; min-height:16px; margin:0; }
.auth-forgot-link { font-size:12px; color:rgba(255,255,255,0.4); text-decoration:none; transition:color 0.2s; display:inline-block; }
.auth-forgot-link:hover { color:#00f5a0; }
.auth-reset-desc { font-size:13px; color:rgba(255,255,255,0.5); text-align:center; line-height:1.6; margin:0; }
.auth-reset-icon { font-size:40px; text-align:center; }

/* ═══════════════════════════════════════
   CALENDAR — Apple Bottom Sheet
═══════════════════════════════════════ */
.cal-page { display:flex; flex-direction:column; height:100%; gap:0; position:relative; }
.cal-topnav { display:flex; align-items:center; gap:10px; padding-bottom:16px; }
.cal-title-group { flex:1; display:flex; justify-content:center; gap:8px; }
.cal-jump-select {
  padding:8px 14px; border-radius:10px; border:1px solid rgba(0,0,0,0.1);
  background:var(--surface); color:var(--text); font-size:15px; font-weight:600;
  outline:none; cursor:pointer; font-family:inherit; appearance:none;
  transition:border-color 0.2s;
}
body.dark .cal-jump-select { background:#1c2740; border-color:rgba(255,255,255,0.1); }
.cal-jump-select:focus { border-color:var(--accent); }
.cal-nav-btn {
  width:36px; height:36px; border-radius:50%; border:1px solid rgba(0,0,0,0.1);
  background:var(--surface); cursor:pointer; font-size:20px; display:flex; align-items:center; justify-content:center;
  color:var(--text); transition:all 0.2s; line-height:1;
}
body.dark .cal-nav-btn { background:#1c2740; border-color:rgba(255,255,255,0.1); }
.cal-nav-btn:hover { background:var(--accent); color:#000; border-color:var(--accent); transform:scale(1.08); }
.cal-today-btn { padding:8px 16px; border-radius:20px; border:1px solid rgba(0,0,0,0.1); background:var(--surface); color:var(--text); font-size:13px; cursor:pointer; font-family:inherit; transition:all 0.2s; }
body.dark .cal-today-btn { background:#1c2740; border-color:rgba(255,255,255,0.1); }
.cal-today-btn:hover { border-color:var(--accent); color:var(--accent); }
.cal-dow-row { display:grid; grid-template-columns:repeat(7,1fr); margin-bottom:6px; }
.cal-dow { text-align:center; font-size:10px; font-weight:700; color:var(--muted); letter-spacing:1.5px; padding:6px 0; }
.cal-grid-wrap { flex:1; overflow:hidden; }
.cal-grid { display:grid; grid-template-columns:repeat(7,1fr); gap:3px; }
.cal-day {
  min-height:72px; border-radius:10px; padding:8px 6px; cursor:pointer;
  background:var(--surface); border:1.5px solid transparent; position:relative;
  transition:border-color 0.15s, background 0.15s, transform 0.12s, box-shadow 0.15s;
  display:flex; flex-direction:column; align-items:center;
}
body.dark .cal-day { background:rgba(28,39,64,0.6); }
.cal-day:hover { border-color:rgba(0,245,160,0.3); background:rgba(0,245,160,0.04); transform:scale(1.03); z-index:1; }
.cal-day-other { opacity:.3; pointer-events:none; }
.cal-today { background:rgba(0,245,160,0.09)!important; border-color:var(--accent)!important; }
.cal-today .cal-day-num { color:var(--accent); font-weight:800; }
.cal-past { opacity:.65; }
.cal-selected { border-color:var(--accent)!important; box-shadow:0 0 12px rgba(0,245,160,0.2)!important; }
.cal-day-num { font-size:13px; font-weight:600; color:var(--text); }
.cal-dots { display:flex; gap:3px; margin-top:5px; flex-wrap:wrap; justify-content:center; }
.cal-dot { width:5px; height:5px; border-radius:50%; }
.cal-task-badge { position:absolute; top:4px; right:5px; font-size:9px; font-weight:700; background:var(--accent); color:#000; border-radius:8px; padding:1px 4px; }

/* Bottom sheet */
.cal-sheet-backdrop { position:fixed; inset:0; background:rgba(0,0,0,0); pointer-events:none; z-index:200; transition:background 0.3s ease; }
.cal-sheet-backdrop.active { background:rgba(0,0,0,0.35); pointer-events:all; backdrop-filter:blur(4px); }
.cal-bottom-sheet {
  position:fixed; left:0; right:0; bottom:0;
  background:var(--surface);
  border-radius:22px 22px 0 0;
  padding:0 0 30px;
  z-index:300;
  transform:translateY(100%);
  transition:transform 0.35s cubic-bezier(0.22,1,0.36,1);
  box-shadow:0 -20px 60px rgba(0,0,0,0.2);
  max-height:75vh; overflow-y:auto;
}
body.dark .cal-bottom-sheet { background:#1a2540; box-shadow:0 -30px 80px rgba(0,0,0,0.6); }
.cal-bottom-sheet.active { transform:translateY(0); }
.cal-sheet-pill { width:40px; height:4px; background:rgba(0,0,0,0.2); border-radius:2px; margin:14px auto 0; }
body.dark .cal-sheet-pill { background:rgba(255,255,255,0.15); }
.cal-sheet-head { display:flex; justify-content:space-between; align-items:center; padding:20px 24px 12px; }
.cal-sheet-day-name { font-size:22px; font-weight:700; color:var(--text); display:block; }
.cal-sheet-full-date { font-size:13px; color:var(--muted); margin-top:2px; display:block; }
.cal-sheet-add-btn { padding:10px 20px; border-radius:22px; background:var(--accent); color:#000; font-weight:700; font-size:13px; border:none; cursor:pointer; font-family:inherit; transition:opacity 0.2s,transform 0.15s; }
.cal-sheet-add-btn:hover { opacity:.85; transform:scale(1.04); }
.cal-sheet-tasks { padding:0 24px 8px; display:flex; flex-direction:column; gap:10px; }
.cal-sheet-task { display:flex; align-items:center; gap:12px; padding:14px 16px; background:rgba(0,0,0,0.03); border-radius:14px; }
body.dark .cal-sheet-task { background:rgba(255,255,255,0.04); }
.cal-sheet-task-dot { width:10px; height:10px; border-radius:50%; flex-shrink:0; }
.cal-sheet-task-body { flex:1; min-width:0; }
.cal-sheet-task-title { font-size:14px; font-weight:500; color:var(--text); display:block; }
.cal-sheet-task-meta  { font-size:11px; color:var(--muted); display:block; margin-top:2px; }
.cal-sheet-task-done  { opacity:.5; }
.cal-sheet-done-tick  { color:var(--accent); font-size:16px; font-weight:700; }
.cal-sheet-empty { text-align:center; padding:30px 20px; color:var(--muted); }
.cal-sheet-empty-icon { font-size:32px; margin-bottom:8px; display:block; }
.cal-sheet-empty p { font-size:13px; line-height:1.7; }
/* Inline add form */
.cal-sheet-form { overflow:hidden; max-height:0; opacity:0; transition:max-height 0.3s ease, opacity 0.3s ease, padding 0.3s ease; display:flex; flex-direction:column; gap:10px; padding:0 24px; }
.cal-sheet-form.active { max-height:220px; opacity:1; padding:16px 24px; }
.cal-sheet-input { width:100%; padding:12px 14px; border-radius:12px; border:1px solid rgba(0,0,0,0.1); background:rgba(0,0,0,0.04); color:var(--text); font-size:14px; outline:none; font-family:inherit; transition:border-color 0.2s; box-sizing:border-box; }
body.dark .cal-sheet-input { background:rgba(255,255,255,0.06); border-color:rgba(255,255,255,0.1); }
.cal-sheet-input:focus { border-color:var(--accent); }
.cal-sheet-form-row { display:flex; gap:10px; }
.cal-sheet-time-input { max-width:130px; }
.cal-sheet-select { flex:1; padding:12px 14px; border-radius:12px; border:1px solid rgba(0,0,0,0.1); background:rgba(0,0,0,0.04); color:var(--text); font-size:13px; outline:none; font-family:inherit; }
body.dark .cal-sheet-select { background:rgba(255,255,255,0.06); border-color:rgba(255,255,255,0.1); }
.cal-sheet-form-actions { display:flex; gap:10px; }
@keyframes calSlideLeft  { from{opacity:0;transform:translateX(16px)} to{opacity:1;transform:translateX(0)} }
@keyframes calSlideRight { from{opacity:0;transform:translateX(-16px)} to{opacity:1;transform:translateX(0)} }

/* ═══════════════════════════════════════
   BRAINSTORM SHELL
═══════════════════════════════════════ */
.bs-shell { display:flex; flex-direction:column; height:100%; }
.bs-boards-view { display:flex; flex-direction:column; gap:20px; }
.bs-header { display:flex; justify-content:space-between; align-items:flex-end; }
.bs-title { font-size:24px; font-weight:700; color:var(--text); letter-spacing:-0.5px; }
.bs-subtitle { font-size:13px; color:var(--muted); margin-top:3px; }
.bs-new-btn { padding:11px 22px; border-radius:30px; background:linear-gradient(90deg,#00f5a0,#00d9f5); color:#060f1e; font-weight:700; font-size:13px; border:none; cursor:pointer; font-family:inherit; transition:opacity 0.2s, transform 0.15s; }
.bs-new-btn:hover { opacity:.85; transform:translateY(-2px); }
.bs-search-wrap { position:relative; }
.bs-search-icon { position:absolute; left:14px; top:50%; transform:translateY(-50%); font-size:16px; color:var(--muted); pointer-events:none; }
.bs-search { width:100%; padding:12px 18px 12px 40px; border-radius:14px; border:1px solid rgba(0,0,0,0.1); background:var(--surface); color:var(--text); font-size:14px; outline:none; font-family:inherit; box-sizing:border-box; transition:border-color 0.2s; }
body.dark .bs-search { background:#1c2740; border-color:rgba(255,255,255,0.08); }
.bs-search:focus { border-color:var(--accent); }
.bs-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:16px; }
.bs-card { border-radius:18px; cursor:pointer; transition:transform 0.22s cubic-bezier(0.22,1,0.36,1), box-shadow 0.22s; overflow:hidden; }
.bs-card:hover { transform:translateY(-6px) scale(1.01); box-shadow:0 18px 50px rgba(0,0,0,0.15); }
body.dark .bs-card:hover { box-shadow:0 20px 60px rgba(0,0,0,0.5); }
.bs-card-stripe { height:4px; background:var(--bc,#00f5a0); }
.bs-card-body { padding:18px 18px 14px; }
.bs-card-row { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:5px; }
.bs-card-name { font-size:15px; font-weight:600; color:var(--text); flex:1; }
.bs-card-del { background:none; border:none; color:transparent; cursor:pointer; font-size:17px; transition:color 0.2s; }
.bs-card:hover .bs-card-del { color:rgba(255,77,77,0.5); }
.bs-card-del:hover { color:#ff4d4d!important; }
.bs-card-desc { font-size:12px; color:var(--muted); margin-bottom:10px; }
.bs-card-preview { display:flex; flex-direction:column; gap:4px; margin-bottom:10px; }
.bs-card-idea { font-size:12px; color:var(--muted); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; padding:3px 7px; background:rgba(0,0,0,0.04); border-radius:5px; }
body.dark .bs-card-idea { background:rgba(255,255,255,0.04); }
.bs-card-empty { font-size:12px; color:var(--muted); opacity:.5; font-style:italic; }
.bs-card-footer { display:flex; justify-content:space-between; font-size:11px; color:var(--muted); }
.bs-card-type { opacity:.5; }
.bs-empty { grid-column:1/-1; text-align:center; padding:60px 20px; color:var(--muted); }
.bs-color-trigger { display:flex; align-items:center; gap:10px; padding:10px 16px; border-radius:12px; border:1px solid rgba(0,0,0,0.1); background:rgba(0,0,0,0.03); cursor:pointer; font-family:inherit; font-size:13px; color:var(--text); transition:border-color 0.2s; }
body.dark .bs-color-trigger { background:rgba(255,255,255,0.05); border-color:rgba(255,255,255,0.1); }
.bs-color-trigger:hover { border-color:var(--accent); }
.bs-color-prev { width:20px; height:20px; border-radius:50%; flex-shrink:0; }
.bs-color-arrow { opacity:.4; }

/* ═══════════════════════════════════════
   MIND MAP VIEW
═══════════════════════════════════════ */
.mm-view {
  position:fixed; inset:0; z-index:800;
  background:#0a0f1e;
  display:none; flex-direction:column;
}
.mm-view[style*="flex"] { animation:fadeIn 0.25s ease forwards; }
.mm-topbar {
  display:flex; justify-content:space-between; align-items:center;
  padding:14px 20px; border-bottom:2px solid var(--accent);
  background:rgba(10,15,30,0.9); backdrop-filter:blur(16px); z-index:10; flex-shrink:0;
}
.mm-topbar-left { display:flex; align-items:center; gap:12px; }
.mm-board-dot { width:12px; height:12px; border-radius:50%; }
.mm-board-name { font-size:17px; font-weight:700; color:#fff; }
.mm-board-sub  { font-size:11px; color:rgba(255,255,255,0.35); margin-top:2px; }
.mm-topbar-right { display:flex; align-items:center; gap:8px; }
.mm-btn { padding:8px 16px; border-radius:20px; border:1px solid rgba(255,255,255,0.15); background:transparent; color:rgba(255,255,255,0.6); cursor:pointer; font-size:12px; letter-spacing:.5px; font-family:inherit; transition:all 0.2s; }
.mm-btn:hover { border-color:rgba(255,255,255,0.4); color:#fff; }
.mm-btn-primary { background:rgba(0,245,160,0.1); border-color:rgba(0,245,160,0.4)!important; color:#00f5a0!important; }
.mm-btn-primary:hover { background:rgba(0,245,160,0.18)!important; box-shadow:0 0 16px rgba(0,245,160,0.2); }
.mm-canvas { position:absolute; top:0; left:0; width:100%; height:100%; cursor:grab; }
.mm-nodes { position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; }
.mm-node {
  position:absolute; pointer-events:all;
  min-width:80px; max-width:200px; padding:12px 16px;
  background:rgba(10,15,30,0.85); backdrop-filter:blur(12px);
  border:1.5px solid #00f5a0; border-radius:50px;
  cursor:grab; user-select:none;
  transition:box-shadow 0.2s, transform 0.1s;
  transform:translate(-50%,-50%);
  will-change:transform;
}
.mm-node:hover { transform:translate(-50%,-50%) scale(1.05); }
.mm-node-sel { transform:translate(-50%,-50%) scale(1.07)!important; }
.mm-node-connecting { border-style:dashed; animation:pulse 1s infinite; }
.mm-node-pinned { border-width:2.5px; }
.mm-pin { font-size:10px; display:block; margin-bottom:4px; }
.mm-node-txt { font-size:13px; color:#fff; font-weight:500; line-height:1.4; text-align:center; white-space:pre-wrap; word-break:break-word; }
.mm-node-glow { position:absolute; inset:-30px; border-radius:50%; pointer-events:none; opacity:.25; }

/* Node panel (slides up from bottom) */
.mm-node-panel {
  position:absolute; bottom:0; left:0; right:0;
  background:rgba(8,12,24,0.96); backdrop-filter:blur(20px);
  border-top:1px solid rgba(0,245,160,0.2);
  padding:16px 24px; display:flex; align-items:center; gap:16px;
  transform:translateY(100%); transition:transform 0.28s cubic-bezier(0.22,1,0.36,1);
  z-index:20;
}
.mm-node-panel.active { transform:translateY(0); }
.mm-node-panel-text { flex:1; font-size:13px; color:rgba(255,255,255,0.7); font-style:italic; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.mm-node-panel-actions { display:flex; gap:8px; }
.mm-panel-btn { padding:8px 14px; border-radius:20px; border:1px solid rgba(255,255,255,0.12); background:transparent; color:rgba(255,255,255,0.6); cursor:pointer; font-size:12px; font-family:inherit; transition:all 0.2s; white-space:nowrap; }
.mm-panel-btn:hover { border-color:rgba(255,255,255,0.4); color:#fff; }
.mm-panel-magic { border-color:rgba(0,245,160,0.4)!important; color:#00f5a0!important; background:rgba(0,245,160,0.07)!important; }
.mm-panel-magic:hover { background:rgba(0,245,160,0.15)!important; box-shadow:0 0 14px rgba(0,245,160,0.2); }
.mm-panel-danger:hover { border-color:#ff4d4d!important; color:#ff4d4d!important; }

/* Hint bar */
.mm-hint { position:absolute; bottom:68px; left:50%; transform:translateX(-50%); font-size:11px; color:rgba(255,255,255,0.2); letter-spacing:.5px; pointer-events:none; transition:opacity 0.3s; white-space:nowrap; }

/* Zoom */
.mm-zoom { position:absolute; right:20px; top:50%; transform:translateY(-50%); display:flex; flex-direction:column; gap:6px; }
.mm-zoom-btn { width:36px; height:36px; border-radius:50%; border:1px solid rgba(255,255,255,0.12); background:rgba(10,15,30,0.8); color:rgba(255,255,255,0.6); cursor:pointer; font-size:18px; display:flex; align-items:center; justify-content:center; transition:all 0.2s; font-family:inherit; }
.mm-zoom-btn:hover { border-color:rgba(0,245,160,0.5); color:#00f5a0; }

/* Add overlay */
.mm-add-overlay { position:absolute; inset:0; background:rgba(0,0,0,0.6); backdrop-filter:blur(8px); display:none; align-items:center; justify-content:center; z-index:30; }
.mm-add-overlay.active { display:flex; animation:fadeIn 0.2s ease; }
.mm-add-box { background:rgba(12,18,36,0.98); border:1px solid rgba(0,245,160,0.2); border-radius:20px; padding:28px; width:min(480px,90vw); display:flex; flex-direction:column; gap:14px; box-shadow:0 30px 80px rgba(0,0,0,0.6); }
.mm-add-label { font-size:11px; letter-spacing:2px; text-transform:uppercase; color:rgba(255,255,255,0.3); }
.mm-idea-textarea { padding:14px 16px; border-radius:14px; border:1px solid rgba(0,245,160,0.25); background:rgba(255,255,255,0.04); color:#fff; font-size:15px; outline:none; resize:none; font-family:inherit; transition:border-color 0.2s, box-shadow 0.2s; }
.mm-idea-textarea:focus { border-color:rgba(0,245,160,0.5); box-shadow:0 0 18px rgba(0,245,160,0.12); }
.mm-add-actions { display:flex; gap:10px; }

/* Make Task overlay */
.mm-task-overlay { position:absolute; inset:0; background:rgba(0,0,0,0.65); backdrop-filter:blur(10px); display:none; align-items:center; justify-content:center; z-index:40; }
.mm-task-overlay.active { display:flex; animation:fadeIn 0.2s ease; }
.mm-task-box { background:rgba(12,18,36,0.98); border:1px solid rgba(0,245,160,0.2); border-radius:20px; padding:28px; width:min(520px,90vw); box-shadow:0 30px 80px rgba(0,0,0,0.7); }
.mm-task-header { display:flex; align-items:center; gap:10px; margin-bottom:6px; }
.mm-task-magic { font-size:18px; color:#00f5a0; }
.mm-task-header h3 { font-size:17px; font-weight:600; color:#fff; }
.mm-task-source { font-size:13px; color:rgba(255,255,255,0.4); font-style:italic; margin-bottom:4px; }
.mm-task-input { width:100%; padding:10px 14px; border-radius:10px; border:1px solid rgba(255,255,255,0.15); background:rgba(255,255,255,0.05); color:#fff; font-size:14px; outline:none; font-family:inherit; box-sizing:border-box; }
.mm-task-input:focus { border-color:rgba(0,245,160,0.4); }

/* List panel */
.mm-list-panel { position:absolute; right:0; top:0; bottom:0; width:320px; background:rgba(8,12,24,0.97); border-left:1px solid rgba(0,245,160,0.1); display:none; flex-direction:column; z-index:25; transform:translateX(100%); transition:transform 0.28s cubic-bezier(0.22,1,0.36,1); }
.mm-list-panel.active { display:flex; transform:translateX(0); }
.mm-list-header { display:flex; justify-content:space-between; align-items:center; padding:18px 20px; border-bottom:1px solid rgba(255,255,255,0.06); }
.mm-list-header h3 { color:#fff; font-size:15px; }
.mm-list-body { flex:1; overflow-y:auto; padding:14px 20px; display:flex; flex-direction:column; gap:8px; }
.mm-list-item { display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:10px; background:rgba(255,255,255,0.03); }
.mm-list-dot { width:8px; height:8px; border-radius:50%; flex-shrink:0; }
.mm-list-item span:nth-child(2) { font-size:13px; color:rgba(255,255,255,0.75); flex:1; }

/* ═══════════════════════════════════════
   FOCUS ROOMS
═══════════════════════════════════════ */
.rooms-page { display:flex; flex-direction:column; gap:24px; }
.rooms-header { display:flex; justify-content:space-between; align-items:flex-end; }
.rooms-title { font-size:24px; font-weight:700; color:var(--text); }
.rooms-sub { font-size:13px; color:var(--muted); margin-top:4px; }
.rooms-list { display:flex; flex-direction:column; gap:14px; }
.rooms-empty { text-align:center; padding:60px 20px; color:var(--muted); }
.room-card { display:flex; align-items:center; gap:16px; padding:20px 24px; background:var(--surface); border-radius:18px; border:1px solid rgba(0,0,0,0.06); transition:transform 0.2s, box-shadow 0.2s; }
body.dark .room-card { background:#1c2740; border-color:rgba(255,255,255,0.05); }
.room-card:hover { transform:translateY(-2px); box-shadow:0 10px 30px rgba(0,0,0,0.1); }
.room-card-auras { display:flex; align-items:center; }
.room-card-aura { width:36px; height:36px; border-radius:50%; border:2px solid #0a0f1e; opacity:.85; }
.room-card-info { flex:1; }
.room-card-name { font-size:15px; font-weight:600; color:var(--text); }
.room-card-meta { font-size:12px; color:var(--muted); margin-top:3px; }
.room-join-btn { flex-shrink:0; padding:9px 20px; }

/* Live session */
.room-session {
  position:fixed; inset:0; z-index:900;
  background:#010108; display:none; align-items:center; justify-content:center;
  flex-direction:column;
}
.room-session.active { display:flex; animation:fadeIn 0.3s ease; }
.room-canvas { position:absolute; inset:0; width:100%; height:100%; }
.room-session-ui { position:relative; z-index:10; text-align:center; display:flex; flex-direction:column; align-items:center; gap:28px; }
.room-top { display:flex; flex-direction:column; align-items:center; gap:8px; }
.room-session-name { font-size:18px; font-weight:200; letter-spacing:6px; text-transform:uppercase; color:rgba(255,255,255,0.5); }
.room-timer { font-size:72px; font-weight:200; letter-spacing:-2px; font-variant-numeric:tabular-nums; background:linear-gradient(90deg,#00f5a0,#00d9f5); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
.room-auras-wrap { display:flex; flex-direction:column; align-items:center; gap:14px; }
.room-auras-label { font-size:10px; letter-spacing:2.5px; text-transform:uppercase; color:rgba(255,255,255,0.2); }
.room-auras { display:flex; gap:24px; flex-wrap:wrap; justify-content:center; }
.aura-wrap { display:flex; flex-direction:column; align-items:center; gap:8px; }
.aura-orb {
  width:64px; height:64px; border-radius:50%;
  background:var(--ac,#00f5a0);
  box-shadow:0 0 30px var(--ac,#00f5a0), 0 0 60px var(--ac,#00f5a0), inset 0 0 20px rgba(255,255,255,0.1);
  animation:auraPulse 2.5s ease-in-out infinite;
}
.aura-self { animation-delay:-0.5s; }
@keyframes auraPulse {
  0%,100% { transform:scale(1);    box-shadow:0 0 30px var(--ac), 0 0 60px var(--ac)44; }
  50%      { transform:scale(1.08); box-shadow:0 0 50px var(--ac), 0 0 100px var(--ac)66; }
}
.aura-label { font-size:10px; letter-spacing:1px; color:rgba(255,255,255,0.25); }
.room-vibe-text { font-size:13px; color:rgba(255,255,255,0.2); letter-spacing:1px; font-style:italic; }
.room-leave-btn { padding:12px 32px; border-radius:30px; border:1px solid rgba(255,255,255,0.15); background:transparent; color:rgba(255,255,255,0.4); cursor:pointer; font-size:13px; font-family:inherit; transition:all 0.2s; letter-spacing:.5px; }
.room-leave-btn:hover { border-color:#ff4d4d; color:#ff4d4d; }

/* ═══════════════════════════════════════
   WHISPER — Reflection Insights
═══════════════════════════════════════ */
.whisper-insight-card {
  margin:14px 14px 0;
  padding:16px 18px;
  border-radius:14px;
  background:rgba(0,245,160,0.06);
  border:1px solid rgba(0,245,160,0.18);
  display:flex; flex-direction:column; gap:8px;
}
.insight-label { font-size:10px; letter-spacing:2px; text-transform:uppercase; color:#00f5a0; }
.insight-row { display:flex; gap:8px; flex-wrap:wrap; }
.insight-chip { font-size:11px; padding:3px 10px; border-radius:20px; background:rgba(0,245,160,0.1); color:#00f5a0; border:1px solid rgba(0,245,160,0.2); }
.insight-themes { font-size:12px; color:rgba(255,255,255,0.6); line-height:1.6; }
.insight-summary { font-size:12px; color:rgba(255,255,255,0.45); font-style:italic; }

/* ═══════════════════════════════════════
   HOME PAGE
═══════════════════════════════════════ */
.home-hero { display:flex; justify-content:space-between; align-items:center; gap:28px; border-radius:20px; padding:30px 34px; }
.home-hero-left { flex:1; }
.home-date { font-size:11px; letter-spacing:2px; text-transform:uppercase; color:var(--muted); margin-bottom:5px; }
.home-greeting { font-size:26px; font-weight:300; color:var(--text); margin-bottom:14px; }
.home-name { font-weight:700; background:linear-gradient(90deg,#00f5a0,#00d9f5); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
.home-quote { border-left:3px solid var(--accent); padding-left:14px; font-size:14px; color:var(--text); font-style:italic; line-height:1.65; }
.home-quote-mark { font-size:18px; color:var(--accent); font-style:normal; }
.home-quote-author { display:block; font-size:11px; color:var(--muted); font-style:normal; margin-top:5px; }
.home-ring-wrap { position:relative; width:90px; height:90px; flex-shrink:0; }
.home-ring-svg { transform:rotate(-90deg); width:100%; height:100%; }
.hr-bg { fill:none; stroke:rgba(0,0,0,0.08); stroke-width:8; }
body.dark .hr-bg { stroke:rgba(255,255,255,0.08); }
.hr-fill { fill:none; stroke:#00f5a0; stroke-width:8; stroke-linecap:round; transition:stroke-dashoffset 1.2s cubic-bezier(0.4,0,.2,1); }
.home-ring-label { position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; }
.home-ring-pct { font-size:18px; font-weight:800; color:var(--accent); }
.home-ring-sub { font-size:9px; color:var(--muted); letter-spacing:1px; text-transform:uppercase; }
.home-stats-row { display:grid; grid-template-columns:repeat(4,1fr); gap:12px; }
.home-stat-pill { border-radius:14px; padding:14px 18px; display:flex; flex-direction:column; gap:4px; }
.home-stat-pill.hsp-warn { border:1px solid rgba(239,68,68,0.3); }
.hsp-val { font-size:22px; font-weight:800; color:var(--accent); }
.hsp-label { font-size:10px; color:var(--muted); text-transform:uppercase; letter-spacing:.8px; }
.home-two-col { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
.home-card { border-radius:16px; padding:18px 20px; }
.home-card-header { display:flex; align-items:center; gap:9px; margin-bottom:12px; }
.home-card-icon { font-size:15px; }
.home-card-header h3 { font-size:13px; font-weight:600; color:var(--text); }
.home-focus-row { display:flex; align-items:flex-start; gap:10px; padding:8px 0; border-bottom:1px solid rgba(0,0,0,0.05); }
body.dark .home-focus-row { border-bottom-color:rgba(255,255,255,0.05); }
.home-focus-dot { width:7px; height:7px; border-radius:50%; flex-shrink:0; margin-top:5px; }
.home-focus-title { font-size:13px; font-weight:500; color:var(--text); }
.home-focus-meta { font-size:10px; color:var(--muted); text-transform:uppercase; letter-spacing:.5px; margin-top:2px; }
.home-empty { font-size:13px; color:var(--muted); padding:6px 0; }
.home-bottom-row { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
.home-streak-display { display:flex; align-items:baseline; gap:6px; margin-bottom:5px; }
.home-streak-num { font-size:44px; font-weight:900; color:#f97316; line-height:1; }
.home-streak-unit { font-size:14px; color:var(--muted); }
.home-streak-msg { font-size:12px; color:var(--muted); }
.home-quick-actions { display:grid; grid-template-columns:1fr 1fr; gap:8px; }
.home-quick-btn { padding:10px 11px; border-radius:10px; border:1px solid rgba(0,0,0,0.08); background:rgba(0,0,0,0.02); font-size:12px; font-weight:500; cursor:pointer; transition:all 0.18s; color:var(--text); font-family:inherit; text-align:left; }
body.dark .home-quick-btn { border-color:rgba(255,255,255,0.07); background:rgba(255,255,255,0.02); }
.home-quick-btn:hover { background:rgba(0,245,160,0.08); border-color:rgba(0,245,160,0.25); color:var(--accent); transform:translateY(-1px); }
.skeleton { background:linear-gradient(90deg,rgba(0,0,0,.05) 25%,rgba(0,0,0,.1) 50%,rgba(0,0,0,.05) 75%); background-size:200% 100%; animation:shimmer 1.4s infinite; border-radius:10px; min-height:70px; }
body.dark .skeleton { background:linear-gradient(90deg,rgba(255,255,255,.04) 25%,rgba(255,255,255,.08) 50%,rgba(255,255,255,.04) 75%); background-size:200% 100%; }
@keyframes shimmer { 0%{background-position:200% 0} 100%{background-position:-200% 0} }

/* ═══════════════════════════════════════
   ANALYTICS
═══════════════════════════════════════ */
.analytics-top { display:grid; grid-template-columns:auto 1fr; gap:22px; align-items:center; border-radius:20px; padding:26px 30px; }
.analytics-score-card { display:flex; align-items:center; gap:20px; }
.score-ring-wrap { position:relative; width:110px; height:110px; flex-shrink:0; }
.score-ring-svg { transform:rotate(-90deg); width:100%; height:100%; }
.score-ring-bg { fill:none; stroke:rgba(0,0,0,0.08); stroke-width:9; }
body.dark .score-ring-bg { stroke:rgba(255,255,255,0.08); }
.score-ring-fill { fill:none; stroke:var(--accent); stroke-width:9; stroke-linecap:round; transition:stroke-dashoffset 1.2s cubic-bezier(0.4,0,.2,1); }
.score-ring-label { position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; }
.score-num { font-size:26px; font-weight:900; color:var(--accent); }
.score-sub { font-size:10px; color:var(--muted); letter-spacing:1px; }
.score-info h3 { font-size:16px; font-weight:600; color:var(--text); margin-bottom:4px; }
.score-info p { font-size:13px; color:var(--muted); }
.analytics-mini-stats { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
.analytics-mini { background:rgba(0,0,0,0.03); border-radius:10px; padding:12px; display:flex; flex-direction:column; gap:3px; }
body.dark .analytics-mini { background:rgba(255,255,255,0.04); }
.am-val { font-size:20px; font-weight:800; color:var(--accent); }
.am-label { font-size:10px; color:var(--muted); text-transform:uppercase; letter-spacing:.8px; }
.analytics-heatmap-card { padding:22px 24px; }
.heatmap-grid { display:grid; grid-template-columns:repeat(84,1fr); gap:2px; margin:12px 0 8px; }
.heat-cell { aspect-ratio:1; border-radius:2px; transition:transform 0.12s; }
.heat-cell:hover { transform:scale(1.5); z-index:1; position:relative; }
.heatmap-legend { display:flex; align-items:center; gap:4px; justify-content:flex-end; font-size:11px; color:var(--muted); }

/* ═══════════════════════════════════════
   NAV ACTIVE + GLOW STANDARD
═══════════════════════════════════════ */
:root { --glow-sm:0 0 12px rgba(0,245,160,0.25); --glow-md:0 0 20px rgba(0,245,160,0.3); }
.sidebar nav button { transition:background 0.22s ease, color 0.22s ease, transform 0.18s ease, border-left-color 0.22s ease, box-shadow 0.22s ease; border-left:3px solid transparent; }
.sidebar nav button:hover { background:rgba(0,245,160,0.07); transform:translateX(3px); }
.sidebar nav button.nav-active { background:rgba(0,245,160,0.12); color:#00f5a0; border-left-color:#00f5a0; padding-left:11px; box-shadow:var(--glow-sm); }
.primary-btn:hover, .add-task-btn:hover, .bs-new-btn:hover { transform:translateY(-2px); box-shadow:var(--glow-md); }
.ghost-btn:hover { transform:translateY(-1px); }
input:focus, textarea:focus, select:focus { box-shadow:0 0 0 2px rgba(0,245,160,0.18); }
.task-modal { animation:scaleIn 0.18s cubic-bezier(0.22,1,0.36,1) forwards; }
@keyframes scaleIn { from{opacity:0;transform:scale(0.96) translateY(8px)} to{opacity:1;transform:scale(1) translateY(0)} }
@keyframes fadeIn  { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }
@keyframes pulse   { 0%,100%{opacity:1} 50%{opacity:.5} }

/* ═══════════════════════════════════════
   MISC SHARED
═══════════════════════════════════════ */
.dash-empty { font-size:13px; color:var(--muted); text-align:center; padding:16px 0; }
.dash-loading { font-size:14px; color:var(--muted); padding:40px; text-align:center; }
.strikethrough { text-decoration:line-through; opacity:.5; }
.stat-warn { border:1px solid rgba(239,68,68,0.2)!important; }
.deadline-today { color:#f97316!important; }
.overdue { color:#ef4444!important; }
.ring-fill, .hr-fill, .score-ring-fill { transition:stroke-dashoffset 1.2s cubic-bezier(0.4,0,.2,1); }
.focus-task-item { display:flex; align-items:flex-start; gap:10px; padding:10px; background:rgba(0,0,0,0.03); border-radius:10px; }
body.dark .focus-task-item { background:rgba(255,255,255,0.04); }
.focus-priority-dot { width:8px; height:8px; border-radius:50%; flex-shrink:0; margin-top:5px; }
.focus-task-title { font-size:13px; font-weight:500; color:var(--text); }
.focus-task-meta  { font-size:11px; color:var(--muted); margin-top:2px; }
.deadline-list { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:10px; }
.deadline-item { display:flex; justify-content:space-between; align-items:center; padding:10px; background:rgba(0,0,0,0.02); border-radius:9px; }
body.dark .deadline-item { background:rgba(255,255,255,0.03); }
.deadline-name { font-size:13px; color:var(--text); font-weight:500; flex:1; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; margin-right:10px; }
.deadline-when { font-size:12px; font-weight:600; color:var(--muted); flex-shrink:0; }
.progress-ring-wrap { position:relative; width:80px; height:80px; margin:0 auto; }
.progress-ring { width:100%; height:100%; transform:rotate(-90deg); }
.ring-bg { fill:none; stroke:rgba(0,0,0,0.08); stroke-width:8; }
body.dark .ring-bg { stroke:rgba(255,255,255,0.08); }
.ring-label { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:16px; font-weight:800; color:var(--accent); }
.ring-card { display:flex; flex-direction:column; align-items:center; gap:10px; text-align:center; }

/* ===============================
   CALENDAR — APPLE BOTTOM SHEET
================================= */
.calendar-wrap { display:flex; flex-direction:column; gap:0; height:100%; }
.cal-grid-outer { position:relative; flex:1; display:flex; flex-direction:column; min-height:0; }
.cal-grid { display:grid; grid-template-columns:repeat(7,1fr); gap:3px; }

/* The sheet — initially hidden, slides up over grid */
.cal-sheet {
  position:absolute; bottom:0; left:0; right:0;
  background: var(--surface);
  border-radius:22px 22px 0 0;
  box-shadow: 0 -12px 60px rgba(0,0,0,0.18);
  padding:0 0 20px;
  transform: translateY(100%);
  transition: transform 0.38s cubic-bezier(0.32,0.72,0,1);
  z-index:50; display:flex; flex-direction:column;
  max-height:68%;
  border:1px solid rgba(255,255,255,0.08);
}
body.dark .cal-sheet { background:#111827; box-shadow:0 -20px 80px rgba(0,0,0,0.7); }
.cal-sheet-open { transform:translateY(0)!important; }
.cal-sheet-handle {
  width:36px; height:4px; border-radius:2px;
  background:rgba(0,0,0,0.15);
  margin:12px auto 0;
  flex-shrink:0;
}
body.dark .cal-sheet-handle { background:rgba(255,255,255,0.15); }
.cal-sheet-header {
  display:flex; justify-content:space-between; align-items:center;
  padding:14px 22px 10px; flex-shrink:0;
}
.cal-sheet-header h3 { font-size:16px; font-weight:600; color:var(--text); }
.cal-sheet-close { background:none; border:none; font-size:20px; cursor:pointer; color:var(--muted); width:28px; height:28px; border-radius:50%; display:flex; align-items:center; justify-content:center; transition:background 0.2s,color 0.2s; }
.cal-sheet-close:hover { background:rgba(255,77,77,0.1); color:#ff4d4d; }
.cal-sheet-tasks { flex:1; overflow-y:auto; padding:0 22px 12px; display:flex; flex-direction:column; gap:8px; }
.cal-sheet-task { display:flex; align-items:center; gap:11px; padding:11px 14px; border-radius:12px; background:rgba(0,0,0,0.025); }
body.dark .cal-sheet-task { background:rgba(255,255,255,0.04); }
.cal-sheet-dot { width:8px; height:8px; border-radius:50%; flex-shrink:0; }
.cal-sheet-task-info { flex:1; min-width:0; }
.cal-sheet-task-title { font-size:14px; font-weight:500; color:var(--text); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.cal-sheet-task-meta  { font-size:11px; color:var(--muted); margin-top:2px; }
.cal-sheet-done-badge { font-size:12px; color:var(--accent); font-weight:700; }
.cal-sheet-empty { font-size:13px; color:var(--muted); padding:10px 0 4px; }
.cal-task-done { opacity:0.5; }

.cal-sheet-add {
  padding:12px 22px 0; flex-shrink:0;
  border-top:1px solid rgba(0,0,0,0.06);
  margin-top:4px; display:flex; flex-direction:column; gap:10px;
}
body.dark .cal-sheet-add { border-top-color:rgba(255,255,255,0.06); }
.cal-add-field {
  display:flex; align-items:center; gap:10px;
  padding:11px 16px; border-radius:14px;
  background:rgba(0,0,0,0.04);
  border:1px solid rgba(0,0,0,0.07);
  transition:border-color 0.2s, box-shadow 0.2s;
}
body.dark .cal-add-field { background:rgba(255,255,255,0.04); border-color:rgba(255,255,255,0.08); }
.cal-add-field:focus-within { border-color:var(--accent); box-shadow:var(--glow-sm); }
.cal-add-icon { color:var(--accent); font-size:18px; font-weight:300; flex-shrink:0; }
.cal-add-field input { border:none; background:none; outline:none; font-family:inherit; font-size:14px; color:var(--text); flex:1; }
.cal-add-meta { display:flex; gap:10px; align-items:center; }
.cal-add-select { flex:1; padding:9px 12px; border-radius:10px; border:1px solid rgba(0,0,0,0.08); background:var(--surface); color:var(--text); font-size:13px; font-family:inherit; outline:none; }
body.dark .cal-add-select { background:#1c2740; border-color:rgba(255,255,255,0.08); }
.cal-sheet-add-btn { white-space:nowrap; }

/* Selected day highlight */
.cal-day.cal-selected { background:rgba(0,245,160,0.1)!important; border-color:rgba(0,245,160,0.4)!important; }
.cal-task-badge { position:absolute; top:6px; right:7px; font-size:10px; font-weight:700; background:var(--accent); color:#000; border-radius:10px; padding:1px 5px; }

/* Fix chart overflow */
.charts-section { overflow:hidden; }
.chart-card { overflow:hidden; min-height:0; }
.chart-card canvas { max-height:200px!important; }

/* ===============================
   BRAINSTORM CANVAS
================================= */
.bs-canvas-wrap { flex:1; position:relative; background:#080c18; border-radius:0; overflow:hidden; display:none; }
.bs-mind-canvas { display:block; width:100%; height:100%; cursor:grab; }
.bs-mind-canvas:active { cursor:grabbing; }
.bs-canvas-hint { position:absolute; bottom:14px; left:50%; transform:translateX(-50%); font-size:11px; color:rgba(255,255,255,0.25); letter-spacing:1px; pointer-events:none; white-space:nowrap; }
.bs-view-toggle-btn { padding:7px 14px; border-radius:20px; border:1px solid rgba(0,245,160,0.3); background:rgba(0,245,160,0.07); color:rgba(0,245,160,0.8); font-size:12px; cursor:pointer; font-family:inherit; transition:all 0.2s; white-space:nowrap; }
.bs-view-toggle-btn:hover { background:rgba(0,245,160,0.15); }

/* Convert to task button */
.bs-convert-btn { color:rgba(255,200,0,0.5)!important; }
.bs-convert-btn:hover { color:#ffd700!important; }

/* ===============================
   FOCUS ROOMS
================================= */
.fr-container { min-height:100%; }
.fr-lobby { display:flex; flex-direction:column; gap:28px; padding:4px 0; }
.fr-lobby-header { text-align:left; }
.fr-lobby-title { font-size:28px; font-weight:600; color:var(--text); letter-spacing:-0.5px; }
.fr-lobby-sub { font-size:14px; color:var(--muted); margin-top:6px; line-height:1.6; }
.fr-lobby-actions { display:flex; gap:12px; }
.fr-create-btn { padding:11px 24px; border-radius:30px; font-size:14px; }
.fr-rooms-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:18px; }
.fr-room-card {
  position:relative; border-radius:20px; overflow:hidden; cursor:default;
  background:var(--surface);
  border:1px solid rgba(0,245,160,0.1);
  transition:transform 0.2s, box-shadow 0.2s;
}
body.dark .fr-room-card { background:rgba(28,39,64,0.7); }
.fr-room-card:hover { transform:translateY(-4px); box-shadow:0 16px 48px rgba(0,0,0,0.2); }
.fr-room-card-glow { position:absolute; inset:0; background:radial-gradient(circle at 50% 0%,rgba(0,245,160,0.08),transparent 70%); pointer-events:none; }
.fr-room-card-inner { position:relative; padding:24px; }
.fr-room-card-name { font-size:16px; font-weight:600; color:var(--text); margin-bottom:8px; }
.fr-room-card-meta { font-size:12px; color:var(--muted); display:flex; gap:6px; align-items:center; margin-bottom:16px; }
.fr-room-card-dot { opacity:0.3; }
.fr-join-btn { padding:9px 22px; border-radius:20px; background:rgba(0,245,160,0.1); border:1px solid rgba(0,245,160,0.3); color:#00f5a0; font-size:13px; cursor:pointer; font-family:inherit; transition:all 0.2s; width:100%; }
.fr-join-btn:hover { background:rgba(0,245,160,0.2); box-shadow:var(--glow-sm); }
.fr-no-rooms { grid-column:1/-1; text-align:center; color:var(--muted); padding:60px 20px; }

/* ROOM VIEW */
.fr-room-view { position:fixed; inset:0; z-index:800; display:flex; flex-direction:column; background:#03060f; }
.fr-aurora-canvas { position:absolute; inset:0; width:100%; height:100%; pointer-events:none; }
.fr-hud { position:relative; z-index:10; display:grid; grid-template-columns:1fr auto 1fr; align-items:center; padding:20px 30px; }
.fr-hud-left { display:flex; flex-direction:column; gap:8px; }
.fr-leave-btn { background:none; border:1px solid rgba(255,255,255,0.12); color:rgba(255,255,255,0.45); padding:8px 16px; border-radius:20px; cursor:pointer; font-size:12px; font-family:inherit; transition:all 0.2s; width:fit-content; }
.fr-leave-btn:hover { border-color:rgba(255,77,77,0.5); color:#ff4d4d; }
.fr-room-name-hud { font-size:14px; color:rgba(255,255,255,0.4); letter-spacing:2px; text-transform:uppercase; }
.fr-hud-center { display:flex; flex-direction:column; align-items:center; gap:12px; }
.fr-timer-wrap { text-align:center; }
.fr-timer { font-size:64px; font-weight:100; color:white; letter-spacing:-3px; font-variant-numeric:tabular-nums; text-shadow:0 0 30px rgba(0,245,160,0.3); }
.fr-timer-label { font-size:11px; letter-spacing:3px; text-transform:uppercase; color:rgba(255,255,255,0.3); margin-top:4px; }
.fr-timer-controls { display:flex; gap:10px; }
.fr-ctrl-btn { padding:10px 28px; border-radius:30px; border:1px solid rgba(0,245,160,0.35); background:rgba(0,245,160,0.08); color:#00f5a0; cursor:pointer; font-size:13px; font-family:inherit; transition:all 0.2s; letter-spacing:0.5px; }
.fr-ctrl-btn:hover { background:rgba(0,245,160,0.18); box-shadow:var(--glow-sm); }
.fr-ctrl-ghost { background:transparent!important; border-color:rgba(255,255,255,0.1)!important; color:rgba(255,255,255,0.35)!important; }
.fr-hud-right { display:flex; flex-direction:column; gap:8px; align-items:flex-end; }
.fr-occupants-label { font-size:10px; text-transform:uppercase; letter-spacing:2px; color:rgba(255,255,255,0.25); }
.fr-occupants { display:flex; flex-direction:column; gap:5px; align-items:flex-end; }
.fr-occupant { display:flex; align-items:center; gap:7px; font-size:12px; color:rgba(255,255,255,0.5); }
.fr-occupant-dot { width:7px; height:7px; border-radius:50%; }

/* AURA FIELD */
.fr-aura-field { position:absolute; inset:0; z-index:5; pointer-events:none; display:flex; align-items:center; justify-content:center; flex-wrap:wrap; gap:60px; padding:100px 60px; }
.fr-aura-bubble { position:relative; width:100px; height:100px; display:flex; flex-direction:column; align-items:center; justify-content:center; }
.fr-aura-glow { position:absolute; inset:-20px; border-radius:50%; background:radial-gradient(circle,var(--ac,#00f5a0) 0%,transparent 70%); opacity:0.25; animation:auraBreath 4s ease-in-out infinite; }
.fr-aura-core { width:60px; height:60px; border-radius:50%; background:radial-gradient(circle,rgba(255,255,255,0.2),var(--ac,#00f5a0) 40%,transparent 80%); border:1px solid rgba(255,255,255,0.3); animation:auraBreath 4s ease-in-out infinite; }
.fr-aura-me .fr-aura-core { border-color:white; }
.fr-aura-name { font-size:11px; color:rgba(255,255,255,0.5); letter-spacing:1px; margin-top:8px; text-transform:uppercase; }
@keyframes auraBreath { 0%,100%{transform:scale(1);opacity:0.8} 50%{transform:scale(1.1);opacity:1} }

.fr-status-bar { position:absolute; bottom:24px; left:50%; transform:translateX(-50%); z-index:10; font-size:13px; color:rgba(255,255,255,0.2); letter-spacing:1px; display:flex; align-items:center; gap:8px; transition:opacity 0.4s; }
.fr-dot-blink { animation:blink 2s infinite; color:var(--accent); }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0} }

/* ===============================
   WHISPER INSIGHTS
================================= */
.whisper-insights-panel { right:0; left:auto; }
.whisper-insights-body { flex:1; overflow-y:auto; padding:14px 20px 20px; display:flex; flex-direction:column; gap:18px; }
.wi-summary { display:grid; grid-template-columns:1fr 1fr; gap:14px; }
.wi-section { padding:16px; border-radius:14px; background:rgba(0,245,160,0.05); border:1px solid rgba(0,245,160,0.1); text-align:center; }
.wi-label { font-size:10px; text-transform:uppercase; letter-spacing:1.5px; color:rgba(255,255,255,0.3); margin-bottom:8px; }
.wi-big-num { font-size:38px; font-weight:800; color:#00f5a0; }
.wi-big-mood { font-size:38px; }
.wi-message { font-size:13px; line-height:1.7; color:rgba(255,255,255,0.55); font-style:italic; text-align:center; padding:14px 10px; border-top:1px solid rgba(255,255,255,0.06); border-bottom:1px solid rgba(255,255,255,0.06); }
.wi-mood-bars { display:flex; flex-direction:column; gap:10px; margin-top:10px; }
.wi-mood-row { display:flex; align-items:center; gap:10px; }
.wi-mood-emoji { font-size:18px; flex-shrink:0; }
.wi-mood-bar-wrap { flex:1; height:8px; background:rgba(255,255,255,0.06); border-radius:4px; overflow:hidden; }
.wi-mood-bar { height:100%; background:linear-gradient(90deg,#00f5a0,#00d9f5); border-radius:4px; transition:width 0.8s cubic-bezier(0.4,0,0.2,1); }
.wi-mood-count { font-size:12px; color:rgba(255,255,255,0.4); width:24px; text-align:right; }
.wi-themes { margin-top:4px; }
.wi-theme-tags { display:flex; flex-wrap:wrap; gap:7px; margin-top:10px; }
.wi-theme-tag { padding:5px 12px; border-radius:20px; background:rgba(120,0,255,0.12); border:1px solid rgba(120,0,255,0.25); color:rgba(200,160,255,0.8); font-size:12px; display:flex; align-items:center; gap:5px; }
.wi-tc { font-size:10px; opacity:0.6; }
.whisper-history-empty,.whisper-insights-empty { text-align:center; color:rgba(255,255,255,0.3); padding:30px 10px; font-size:13px; line-height:1.7; }


/* ===============================
   ANALYTICS ADDITIONS
================================= */
.analytics-container { display:flex; flex-direction:column; gap:22px; }
.analytics-insights-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:14px; }
.insight-card { display:flex; align-items:flex-start; gap:14px; padding:18px; border-radius:16px; background:var(--surface); border:1px solid var(--border); box-shadow:var(--shadow-sm); }
body.dark .insight-card { background:var(--surface2); }
.insight-icon { font-size:22px; flex-shrink:0; padding-top:2px; }
.insight-title { font-size:13px; font-weight:600; color:var(--text); margin-bottom:4px; }
.insight-body  { font-size:12px; color:var(--text2); line-height:1.6; }
.goal-progress-wrap { display:flex; flex-direction:column; gap:16px; padding-top:6px; }
.goal-progress-row { display:flex; flex-direction:column; gap:8px; }
.goal-progress-label { display:flex; justify-content:space-between; font-size:13px; color:var(--text); }
.goal-progress-pct  { font-weight:600; color:var(--accent); }
.goal-progress-track { height:10px; border-radius:5px; background:rgba(0,0,0,0.06); overflow:hidden; }
body.dark .goal-progress-track { background:rgba(255,255,255,0.07); }
.goal-progress-fill  { height:100%; border-radius:5px; transition:width 1.2s cubic-bezier(0.4,0,0.2,1); }
.am-icon { margin-right:4px; }

/* Chart card text overflow fix */
.chart-card h3 { font-size:13px; font-weight:600; margin-bottom:14px; color:var(--text); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; letter-spacing:0.4px; }
.chart-card canvas { display:block; max-width:100% !important; }

/* ===============================
   MOBILE TOPBAR ADJUSTMENTS
================================= */
.topbar h1 { font-size:20px; }
@media (max-width:768px) {
  .topbar h1 { font-size:17px; }
}

/* ===============================
   THEME TOGGLE POLISH
================================= */
.aurora-toggle {
  width: 54px; height: 28px; border-radius: 14px;
  background: rgba(0,0,0,0.1);
  display:flex; align-items:center;
  padding: 2px; cursor:pointer;
  border: 1px solid var(--border);
  transition: background var(--transition), border-color var(--transition);
  position:relative;
}
body.dark .aurora-toggle { background: rgba(0,245,160,0.1); border-color:rgba(0,245,160,0.2); }
.toggle-circle {
  width:24px; height:24px; border-radius:50%;
  background: var(--surface);
  box-shadow: var(--shadow-sm);
  display:flex; align-items:center; justify-content:center;
  font-size:13px;
  transition: transform var(--transition), background var(--transition);
}
body.dark .toggle-circle { transform: translateX(26px); background: var(--surface2); }


/* ============================================================
   DASHBOARD — restored clean layout
   ============================================================ */
.dashboard-container { display:flex; flex-direction:column; gap:20px; }
.dash-stats {
  display:grid; grid-template-columns:repeat(5,1fr); gap:16px;
}
.dash-charts, .dash-two-col {
  display:grid; grid-template-columns:1fr 1fr; gap:16px;
}
.dash-bottom {
  display:grid; grid-template-columns:auto auto auto 1fr; gap:16px; align-items:stretch;
}
.dash-task-item { display:flex; gap:12px; align-items:flex-start; padding:10px 0; border-bottom:1px solid var(--border); }
.dash-task-item:last-child { border-bottom:none; }
.dash-task-dot { width:10px; height:10px; border-radius:50%; flex-shrink:0; margin-top:4px; }
.dash-task-info { flex:1; min-width:0; }
.dash-task-title { font-size:14px; font-weight:500; color:var(--text); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.dash-task-meta { font-size:12px; color:var(--muted); margin-top:2px; }
.dash-ring-wrap { position:relative; width:80px; height:80px; margin:8px auto 0; }
.dash-ring-svg { width:100%; height:100%; transform:rotate(-90deg); }
.dash-ring-bg   { fill:none; stroke:rgba(0,0,0,0.06); stroke-width:6; }
body.dark .dash-ring-bg { stroke:rgba(255,255,255,0.06); }
.dash-ring-fill { fill:none; stroke-width:6; stroke-linecap:round; }
.dash-ring-label { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:15px; font-weight:700; color:var(--accent); }
.dash-empty { font-size:13px; color:var(--muted); text-align:center; padding:20px 0; }
.stat-warn .stat-value { color:#ef4444 !important; }

/* Dashboard responsive */
@media (max-width:900px) {
  .dash-stats { grid-template-columns:repeat(3,1fr); }
  .dash-bottom { grid-template-columns:1fr 1fr; }
}
@media (max-width:640px) {
  .dash-stats { grid-template-columns:1fr 1fr; }
  .dash-charts, .dash-two-col { grid-template-columns:1fr; }
  .dash-bottom { grid-template-columns:1fr 1fr; }
}
@media (max-width:400px) {
  .dash-stats { grid-template-columns:1fr; }
}

/* ============================================================
   DASHBOARD — complete layout fix
   ============================================================ */

/* Stat cards — compact, no excess vertical space */
.stat-card {
  background: var(--surface);
  padding: 18px 20px !important;
  border-radius: 16px;
  text-align: center;
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 6px;
}
body.dark .stat-card { background: #1c2740; border-color: rgba(255,255,255,0.06); box-shadow: var(--shadow-md); }
.stat-card h4 { font-size: 11px; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; color: var(--muted); margin: 0; }
.stat-value { font-size: 28px; font-weight: 700; color: var(--accent); line-height: 1; }

/* Chart card compact */
.chart-card {
  background: var(--surface);
  border-radius: 16px;
  padding: 18px 20px !important;
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border);
}
body.dark .chart-card { background: #1c2740; border-color: rgba(255,255,255,0.06); box-shadow: var(--shadow-md); }

/* Specific fix: charts-section height (analytics 30-day etc) */
.charts-section .chart-card { height: 260px !important; padding: 16px 18px !important; }
.charts-section .chart-card canvas { max-width:100% !important; max-height: 200px !important; }

/* Card title */
.card-title, .chart-card h3 {
  font-size: 13px !important;
  font-weight: 700;
  color: var(--text);
  margin: 0 0 12px !important;
  letter-spacing: 0.3px;
}

/* Priority task items in dashboard (readable in light + dark) */
.dash-task-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text) !important; /* Force readable */
}
body.dark .dash-task-title {
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent !important;
}
.dash-task-meta { font-size: 11px; color: var(--muted); margin-top: 2px; }

/* Deadline text readable */
.deadline-name { font-size: 13px; font-weight: 500; color: var(--text) !important; }
.deadline-when { font-size: 11px; font-weight: 700; color: var(--accent); background: var(--accent-subtle, rgba(0,200,122,0.08)); padding: 3px 10px; border-radius: 20px; white-space: nowrap; }
.deadline-overdue { color: #ef4444 !important; background: rgba(239,68,68,0.08) !important; }
.deadline-today { color: #f59e0b !important; background: rgba(245,158,11,0.1) !important; }

/* Dashboard grid */
.dash-stats { display: grid; grid-template-columns: repeat(5,1fr); gap: 12px; }
.dash-charts { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.dash-charts .chart-card { height: 240px; }
.dash-charts .chart-card canvas { max-height: 180px !important; }
.dash-two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.dash-two-col .chart-card { min-height: 0; height: auto; }
.dash-bottom { display: grid; grid-template-columns: 110px 110px 110px 1fr; gap: 12px; align-items: stretch; }
.dash-bottom .chart-card { height: 130px; }
.dash-bottom .chart-card canvas { max-height: 80px !important; }

/* Ring inside stat card */
.dash-ring-wrap { position: relative; width: 70px; height: 70px; margin: 4px auto 0; }
.dash-ring-svg { width: 100%; height: 100%; transform: rotate(-90deg); }
.dash-ring-bg { fill:none; stroke: rgba(0,0,0,0.07); stroke-width:5; }
body.dark .dash-ring-bg { stroke: rgba(255,255,255,0.07); }
.dash-ring-fill { fill:none; stroke-width:5; stroke-linecap:round; stroke: var(--accent); }
.dash-ring-label { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:14px; font-weight:700; color:var(--accent); }
.stat-warn .stat-value { color: #ef4444 !important; }

/* Responsive dashboard */
@media (max-width: 1000px) {
  .dash-stats { grid-template-columns: repeat(3,1fr); }
  .dash-bottom { grid-template-columns: 1fr 1fr 1fr; }
  .dash-bottom .chart-card { grid-column: 1 / -1; height: 160px; }
  .dash-bottom .chart-card canvas { max-height: 110px !important; }
}
@media (max-width: 680px) {
  .dash-stats { grid-template-columns: 1fr 1fr; }
  .dash-charts, .dash-two-col { grid-template-columns: 1fr; }
  .dash-charts .chart-card { height: 220px; }
  .dash-bottom { grid-template-columns: 1fr 1fr; }
}
@media (max-width: 400px) {
  .dash-stats { grid-template-columns: 1fr; }
}

/* ============================================================
   ANALYTICS — fix dark mode colors + chart height
   ============================================================ */
/* Score ring in dark mode */
.score-ring-bg   { fill: none; stroke: rgba(255,255,255,0.06); stroke-width:7; }
body:not(.dark) .score-ring-bg { stroke: rgba(0,0,0,0.06); }
.score-ring-fill { fill: none; stroke: var(--accent); stroke-width:7; stroke-linecap:round; filter: drop-shadow(0 0 8px var(--accent-glow, rgba(0,200,122,0.3))); }
.score-num { font-size: 44px; font-weight: 700; color: var(--text); }
.score-sub { font-size: 11px; letter-spacing: 2px; text-transform: uppercase; color: var(--muted); }
.analytics-score-card { display: flex; align-items: center; gap: 24px; flex-wrap: wrap; padding: 4px 0; }
.score-ring-wrap { position: relative; width: 120px; height: 120px; flex-shrink: 0; }
.score-ring-svg { width: 100%; height: 100%; transform: rotate(-90deg); }
.score-ring-label { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 2px; }
.score-info h3 { font-size: 18px; font-weight: 700; color: var(--text); margin: 0 0 6px; }
.score-info p  { font-size: 13px; color: var(--text2); margin: 0; }

/* Analytics mini stats — dark mode text fix */
.analytics-mini-stats { display: grid; grid-template-columns: repeat(3,1fr); gap: 10px; flex: 1; }
.analytics-mini { padding: 12px 14px; border-radius: 12px; background: var(--surface2); border: 1px solid var(--border); }
body.dark .analytics-mini { background: rgba(255,255,255,0.04); border-color: rgba(255,255,255,0.06); }
.am-label { font-size: 11px; color: var(--muted); margin-bottom: 4px; display: flex; align-items: center; gap: 4px; }
.am-val { font-size: 18px; font-weight: 700; color: var(--text); }

/* Chart cards in analytics same height fix */
.analytics-container .chart-card { height: auto !important; }
.analytics-container .chart-card canvas { max-height: 180px !important; display: block; }
.analytics-container .charts-section { gap: 12px; }
.analytics-container .charts-section .chart-card { height: 240px !important; }
.analytics-container .charts-section .chart-card canvas { max-height: 170px !important; }

/* Analytics top card */
.analytics-top { background: var(--surface); border-radius: 16px; padding: 20px 22px; border: 1px solid var(--border); box-shadow: var(--shadow-sm); }
body.dark .analytics-top { background: #1c2740; border-color: rgba(255,255,255,0.06); }

/* Heatmap */
.heatmap-grid { display: grid; grid-template-rows: repeat(7, 10px); grid-auto-flow: column; gap: 3px; overflow-x: auto; padding-bottom: 4px; }
.heat-cell { width: 10px; height: 10px; border-radius: 2px; }
.heatmap-legend { display: flex; align-items: center; gap: 4px; margin-top: 8px; }

/* Dark mode: fix chart text (Chart.js global override via data attr) */
body.dark canvas { color-scheme: dark; }

